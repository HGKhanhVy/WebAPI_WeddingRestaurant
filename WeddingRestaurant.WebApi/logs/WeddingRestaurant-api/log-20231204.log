2023-12-04T03:18:16.9829166+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("62"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT 1"
2023-12-04T03:18:29.5769107+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("12,493"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');"
2023-12-04T03:18:29.7503337+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("166"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT 1"
2023-12-04T03:18:29.7683110+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("11"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');"
2023-12-04T03:18:36.3156467+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("6,498"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];"
2023-12-04T03:18:36.3573829+07:00 [INF] (Microsoft.EntityFrameworkCore.Migrations) No migrations were applied. The database is already up to date.
2023-12-04T03:18:37.6947402+07:00 [INF] (Microsoft.Hosting.Lifetime) Now listening on: "https://localhost:7267"
2023-12-04T03:18:37.6955736+07:00 [INF] (Microsoft.Hosting.Lifetime) Now listening on: "http://localhost:5140"
2023-12-04T03:18:37.7003951+07:00 [INF] (Microsoft.Hosting.Lifetime) Application started. Press Ctrl+C to shut down.
2023-12-04T03:18:37.7019354+07:00 [INF] (Microsoft.Hosting.Lifetime) Hosting environment: "Development"
2023-12-04T03:18:37.7028478+07:00 [INF] (Microsoft.Hosting.Lifetime) Content root path: "D:\NhaHangTiecCuoi\WeddingRestaurant\WeddingRestaurant.WebApi\"
2023-12-04T03:39:39.4471637+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("90"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT 1"
2023-12-04T03:39:43.6362592+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("4,032"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');"
2023-12-04T03:39:43.6480417+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT 1"
2023-12-04T03:39:43.6524999+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');"
2023-12-04T03:39:43.7515571+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("50"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];"
2023-12-04T03:39:43.8232902+07:00 [INF] (Microsoft.EntityFrameworkCore.Migrations) No migrations were applied. The database is already up to date.
2023-12-04T03:39:44.5259380+07:00 [INF] (Microsoft.Hosting.Lifetime) Now listening on: "https://localhost:7267"
2023-12-04T03:39:44.5274892+07:00 [INF] (Microsoft.Hosting.Lifetime) Now listening on: "http://localhost:5140"
2023-12-04T03:39:44.5337027+07:00 [INF] (Microsoft.Hosting.Lifetime) Application started. Press Ctrl+C to shut down.
2023-12-04T03:39:44.5354669+07:00 [INF] (Microsoft.Hosting.Lifetime) Hosting environment: "Development"
2023-12-04T03:39:44.5369143+07:00 [INF] (Microsoft.Hosting.Lifetime) Content root path: "D:\NhaHangTiecCuoi\WeddingRestaurant\WeddingRestaurant.WebApi\"
2023-12-04T03:40:49.9961194+07:00 [INF] (Serilog.AspNetCore.RequestLoggingMiddleware) HTTP "POST" "/api/dat-tiec/add" responded 400 in 649.5194 ms
2023-12-04T03:42:29.8634706+07:00 [INF] (Serilog.AspNetCore.RequestLoggingMiddleware) HTTP "POST" "/api/dat-tiec/add" responded 400 in 141.7970 ms
2023-12-04T03:45:34.4379188+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("65"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT 1"
2023-12-04T03:45:37.0528045+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("2,520"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');"
2023-12-04T03:45:37.0594279+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT 1"
2023-12-04T03:45:37.0627224+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');"
2023-12-04T03:45:37.1437431+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("51"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];"
2023-12-04T03:45:37.1872912+07:00 [INF] (Microsoft.EntityFrameworkCore.Migrations) No migrations were applied. The database is already up to date.
2023-12-04T03:45:37.6514052+07:00 [INF] (Microsoft.Hosting.Lifetime) Now listening on: "https://localhost:7267"
2023-12-04T03:45:37.6527719+07:00 [INF] (Microsoft.Hosting.Lifetime) Now listening on: "http://localhost:5140"
2023-12-04T03:45:37.6581006+07:00 [INF] (Microsoft.Hosting.Lifetime) Application started. Press Ctrl+C to shut down.
2023-12-04T03:45:37.6598254+07:00 [INF] (Microsoft.Hosting.Lifetime) Hosting environment: "Development"
2023-12-04T03:45:37.6606099+07:00 [INF] (Microsoft.Hosting.Lifetime) Content root path: "D:\NhaHangTiecCuoi\WeddingRestaurant\WeddingRestaurant.WebApi\"
2023-12-04T03:47:49.5929737+07:00 [INF] (Serilog.AspNetCore.RequestLoggingMiddleware) HTTP "POST" "/api/dat-tiec/add" responded 400 in 613.8380 ms
2023-12-04T03:50:39.8890389+07:00 [INF] (Serilog.AspNetCore.RequestLoggingMiddleware) HTTP "POST" "/api/dat-tiec/add" responded 400 in 195.6932 ms
2023-12-04T03:51:04.4136901+07:00 [INF] (Serilog.AspNetCore.RequestLoggingMiddleware) HTTP "POST" "/api/dat-tiec/add" responded 400 in 11.8178 ms
2023-12-04T03:57:46.7355437+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("140"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE DATABASE [DB_WeddingRestaurant];"
2023-12-04T03:57:46.8076017+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("37"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [DB_WeddingRestaurant] SET READ_COMMITTED_SNAPSHOT ON;
END;"
2023-12-04T03:57:46.8282766+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT 1"
2023-12-04T03:57:46.9142594+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("15"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);"
2023-12-04T03:57:46.9158369+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT 1"
2023-12-04T03:57:46.9396814+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("19"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');"
2023-12-04T03:57:46.9444108+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];"
2023-12-04T03:57:46.9595576+07:00 [INF] (Microsoft.EntityFrameworkCore.Migrations) Applying migration '"20231203205738_UpdateKDL"'.
2023-12-04T03:57:47.0536371+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [HoaDon] (
    [MaHoaDon] nvarchar(450) NOT NULL,
    [NgayLap] nvarchar(max) NOT NULL,
    [TongTienPhuThu] decimal(18,2) NOT NULL,
    [TongTienThanhToan] decimal(18,2) NOT NULL,
    [MaTiec] nvarchar(max) NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_HoaDon] PRIMARY KEY ([MaHoaDon])
);"
2023-12-04T03:57:47.0551407+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [KhachHang] (
    [MaKhachHang] nvarchar(450) NOT NULL,
    [TenKhachHang] nvarchar(max) NOT NULL,
    [SoDienThoai] nvarchar(max) NOT NULL,
    [NgaySinh] nvarchar(max) NOT NULL,
    [CCCD] nvarchar(max) NOT NULL,
    [Gmail] nvarchar(max) NOT NULL,
    [MatKhau] nvarchar(max) NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_KhachHang] PRIMARY KEY ([MaKhachHang])
);"
2023-12-04T03:57:47.0570973+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [LoaiDichVu] (
    [MaLoaiDichVu] nvarchar(450) NOT NULL,
    [TenLoaiDichVu] nvarchar(max) NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_LoaiDichVu] PRIMARY KEY ([MaLoaiDichVu])
);"
2023-12-04T03:57:47.0597713+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [LoaiMonAn] (
    [MaLoaiMonAn] nvarchar(450) NOT NULL,
    [TenLoaiMon] nvarchar(max) NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_LoaiMonAn] PRIMARY KEY ([MaLoaiMonAn])
);"
2023-12-04T03:57:47.0620100+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [LoaiNuoc] (
    [MaLoaiNuoc] nvarchar(450) NOT NULL,
    [TenLoaiNuoc] nvarchar(max) NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_LoaiNuoc] PRIMARY KEY ([MaLoaiNuoc])
);"
2023-12-04T03:57:47.0673343+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [Menu] (
    [MaMenu] nvarchar(450) NOT NULL,
    [TenMenu] nvarchar(max) NOT NULL,
    [DonGiaMenu] float NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_Menu] PRIMARY KEY ([MaMenu])
);"
2023-12-04T03:57:47.0684946+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [NguoiDung] (
    [userName] nvarchar(450) NOT NULL,
    [password] nvarchar(max) NOT NULL,
    [quyen] nvarchar(max) NOT NULL,
    [hoTen] nvarchar(max) NOT NULL,
    [sdt] nvarchar(max) NOT NULL,
    [email] nvarchar(max) NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_NguoiDung] PRIMARY KEY ([userName])
);"
2023-12-04T03:57:47.0717056+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [NhanVien] (
    [MaNhanVien] nvarchar(450) NOT NULL,
    [TenNhanVien] nvarchar(max) NOT NULL,
    [SoDienThoai] nvarchar(max) NOT NULL,
    [NgaySinh] nvarchar(max) NOT NULL,
    [CCCD] nvarchar(max) NOT NULL,
    [Gmail] nvarchar(max) NOT NULL,
    [NgayVaoLam] nvarchar(max) NOT NULL,
    [NgayNghiViec] nvarchar(max) NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_NhanVien] PRIMARY KEY ([MaNhanVien])
);"
2023-12-04T03:57:47.0735665+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [Sanh] (
    [MaSanh] nvarchar(450) NOT NULL,
    [TenSanh] nvarchar(max) NOT NULL,
    [HinhAnh] nvarchar(max) NOT NULL,
    [SucChuaToiThieu] int NOT NULL,
    [SucChuaToiDa] int NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_Sanh] PRIMARY KEY ([MaSanh])
);"
2023-12-04T03:57:47.0759590+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [Token] (
    [IDToken] nvarchar(450) NOT NULL,
    [AccessToken] nvarchar(max) NOT NULL,
    [RefreshToken] nvarchar(max) NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_Token] PRIMARY KEY ([IDToken])
);"
2023-12-04T03:57:47.0793649+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [PhuThu] (
    [MaPhuThu] nvarchar(450) NOT NULL,
    [LoaiPhuThu] nvarchar(max) NOT NULL,
    [MoTaPhuThu] nvarchar(max) NOT NULL,
    [TongTien] float NOT NULL,
    [MaHoaDon] nvarchar(450) NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_PhuThu] PRIMARY KEY ([MaPhuThu]),
    CONSTRAINT [FK_PhuThu_HoaDon_MaHoaDon] FOREIGN KEY ([MaHoaDon]) REFERENCES [HoaDon] ([MaHoaDon]) ON DELETE CASCADE
);"
2023-12-04T03:57:47.6067550+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [DanhGia] (
    [MaDanhGia] nvarchar(450) NOT NULL,
    [NoiDungDanhGia] nvarchar(max) NOT NULL,
    [MaKhachHang] nvarchar(450) NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_DanhGia] PRIMARY KEY ([MaDanhGia]),
    CONSTRAINT [FK_DanhGia_KhachHang_MaKhachHang] FOREIGN KEY ([MaKhachHang]) REFERENCES [KhachHang] ([MaKhachHang]) ON DELETE CASCADE
);"
2023-12-04T03:57:47.6161658+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("9"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [DatTiec] (
    [MaTiec] nvarchar(450) NOT NULL,
    [LoaiHinhTiec] nvarchar(max) NOT NULL,
    [NgayDatTiec] datetime2 NOT NULL,
    [NgayToChuc] nvarchar(max) NOT NULL,
    [ThoiGianToChuc] nvarchar(max) NOT NULL,
    [SoLuongBanChinhThuc] int NOT NULL,
    [SoLuongBanTang] int NOT NULL,
    [SoLuongBanChay] int NOT NULL,
    [SoLuongBanDuPhong] int NOT NULL,
    [TongBanSetup] int NOT NULL,
    [LoaiBan] nvarchar(max) NOT NULL,
    [PhiDichVu] float NOT NULL,
    [TongTienDuKien] float NULL,
    [TongTienGiam] float NULL,
    [TongTienPhaiTra] float NULL,
    [TienCocLan1] float NULL,
    [TienCocLan2] float NULL,
    [GhiChu] nvarchar(max) NULL,
    [MaKhachHang] nvarchar(450) NOT NULL,
    [MaHoaDon] nvarchar(max) NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_DatTiec] PRIMARY KEY ([MaTiec]),
    CONSTRAINT [FK_DatTiec_HoaDon_MaTiec] FOREIGN KEY ([MaTiec]) REFERENCES [HoaDon] ([MaHoaDon]) ON DELETE CASCADE,
    CONSTRAINT [FK_DatTiec_KhachHang_MaKhachHang] FOREIGN KEY ([MaKhachHang]) REFERENCES [KhachHang] ([MaKhachHang]) ON DELETE CASCADE
);"
2023-12-04T03:57:47.6180626+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [DichVu] (
    [MaDichVu] nvarchar(450) NOT NULL,
    [TenDichVu] nvarchar(max) NOT NULL,
    [HinhAnh] nvarchar(max) NOT NULL,
    [MaLoaiDichVu] nvarchar(450) NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_DichVu] PRIMARY KEY ([MaDichVu]),
    CONSTRAINT [FK_DichVu_LoaiDichVu_MaLoaiDichVu] FOREIGN KEY ([MaLoaiDichVu]) REFERENCES [LoaiDichVu] ([MaLoaiDichVu]) ON DELETE CASCADE
);"
2023-12-04T03:57:47.6203420+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [MonAn] (
    [MaMonAn] nvarchar(450) NOT NULL,
    [TenMonAn] nvarchar(max) NOT NULL,
    [DonGia] float NOT NULL,
    [HinhAnh] nvarchar(max) NOT NULL,
    [DVT] nvarchar(max) NOT NULL,
    [MaLoaiMonAn] nvarchar(450) NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_MonAn] PRIMARY KEY ([MaMonAn]),
    CONSTRAINT [FK_MonAn_LoaiMonAn_MaLoaiMonAn] FOREIGN KEY ([MaLoaiMonAn]) REFERENCES [LoaiMonAn] ([MaLoaiMonAn]) ON DELETE CASCADE
);"
2023-12-04T03:57:47.6237569+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [Nuoc] (
    [MaNuoc] nvarchar(450) NOT NULL,
    [TenNuoc] nvarchar(max) NOT NULL,
    [DVT] nvarchar(max) NOT NULL,
    [HinhAnh] nvarchar(max) NOT NULL,
    [DonGia] float NOT NULL,
    [MaLoaiNuoc] nvarchar(450) NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_Nuoc] PRIMARY KEY ([MaNuoc]),
    CONSTRAINT [FK_Nuoc_LoaiNuoc_MaLoaiNuoc] FOREIGN KEY ([MaLoaiNuoc]) REFERENCES [LoaiNuoc] ([MaLoaiNuoc]) ON DELETE CASCADE
);"
2023-12-04T03:57:47.6267060+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [AccessToken] (
    [Token] nvarchar(max) NOT NULL,
    [StrTokenIDToken] nvarchar(450) NULL,
    [userName] nvarchar(450) NOT NULL,
    [IsUsed] bit NOT NULL,
    [IsRevoked] bit NOT NULL,
    [ExpireAt] datetime2 NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [FK_AccessToken_NguoiDung_userName] FOREIGN KEY ([userName]) REFERENCES [NguoiDung] ([userName]) ON DELETE CASCADE,
    CONSTRAINT [FK_AccessToken_Token_StrTokenIDToken] FOREIGN KEY ([StrTokenIDToken]) REFERENCES [Token] ([IDToken])
);"
2023-12-04T03:57:51.0071245+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("8"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [RefreshToken] (
    [Token] nvarchar(450) NOT NULL,
    [userName] nvarchar(450) NOT NULL,
    [StrTokenIDToken] nvarchar(450) NULL,
    [JwtID] nvarchar(max) NOT NULL,
    [IsUsed] bit NOT NULL,
    [IsRevoked] bit NOT NULL,
    [ExpireAt] datetime2 NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_RefreshToken] PRIMARY KEY ([Token], [userName]),
    CONSTRAINT [FK_RefreshToken_NguoiDung_userName] FOREIGN KEY ([userName]) REFERENCES [NguoiDung] ([userName]) ON DELETE CASCADE,
    CONSTRAINT [FK_RefreshToken_Token_StrTokenIDToken] FOREIGN KEY ([StrTokenIDToken]) REFERENCES [Token] ([IDToken])
);"
2023-12-04T03:57:51.0109077+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [ChiTietMenu] (
    [MaTiec] nvarchar(450) NOT NULL,
    [MaMenu] nvarchar(450) NOT NULL,
    [SoLuongMenuCuaTiec] int NOT NULL,
    [TongTien] float NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_ChiTietMenu] PRIMARY KEY ([MaTiec], [MaMenu]),
    CONSTRAINT [FK_ChiTietMenu_DatTiec_MaTiec] FOREIGN KEY ([MaTiec]) REFERENCES [DatTiec] ([MaTiec]) ON DELETE CASCADE,
    CONSTRAINT [FK_ChiTietMenu_Menu_MaMenu] FOREIGN KEY ([MaMenu]) REFERENCES [Menu] ([MaMenu]) ON DELETE CASCADE
);"
2023-12-04T03:57:51.0134984+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [LichSanhTiec] (
    [MaTiec] nvarchar(450) NOT NULL,
    [MaSanh] nvarchar(450) NOT NULL,
    [NgayDienRa] datetime2 NOT NULL,
    [Ca] nvarchar(max) NOT NULL,
    [TienPhuThu] float NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_LichSanhTiec] PRIMARY KEY ([MaTiec], [MaSanh]),
    CONSTRAINT [FK_LichSanhTiec_DatTiec_MaTiec] FOREIGN KEY ([MaTiec]) REFERENCES [DatTiec] ([MaTiec]) ON DELETE CASCADE,
    CONSTRAINT [FK_LichSanhTiec_Sanh_MaSanh] FOREIGN KEY ([MaSanh]) REFERENCES [Sanh] ([MaSanh]) ON DELETE CASCADE
);"
2023-12-04T03:57:51.0163810+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [NhanVienTrongTiec] (
    [MaTiec] nvarchar(450) NOT NULL,
    [MaNhanVien] nvarchar(450) NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_NhanVienTrongTiec] PRIMARY KEY ([MaTiec], [MaNhanVien]),
    CONSTRAINT [FK_NhanVienTrongTiec_DatTiec_MaTiec] FOREIGN KEY ([MaTiec]) REFERENCES [DatTiec] ([MaTiec]) ON DELETE CASCADE,
    CONSTRAINT [FK_NhanVienTrongTiec_NhanVien_MaNhanVien] FOREIGN KEY ([MaNhanVien]) REFERENCES [NhanVien] ([MaNhanVien]) ON DELETE CASCADE
);"
2023-12-04T03:57:51.0207306+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [DichVuTinhPhi] (
    [MaDichVuTinhPhi] nvarchar(450) NOT NULL,
    [TenDichVu] nvarchar(max) NOT NULL,
    [MoTa] nvarchar(max) NOT NULL,
    [HinhAnh] nvarchar(max) NOT NULL,
    [DonGiaDichVu] float NOT NULL,
    [MaDichVu] nvarchar(450) NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_DichVuTinhPhi] PRIMARY KEY ([MaDichVuTinhPhi]),
    CONSTRAINT [FK_DichVuTinhPhi_DichVu_MaDichVu] FOREIGN KEY ([MaDichVu]) REFERENCES [DichVu] ([MaDichVu]) ON DELETE CASCADE
);"
2023-12-04T03:57:51.0238317+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [DichVuUuDai] (
    [MaDichVuUuDai] nvarchar(450) NOT NULL,
    [TenDichVu] nvarchar(max) NOT NULL,
    [DieuKienApDung] nvarchar(max) NOT NULL,
    [MoTa] nvarchar(max) NOT NULL,
    [HinhAnh] nvarchar(max) NOT NULL,
    [MaDichVu] nvarchar(450) NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_DichVuUuDai] PRIMARY KEY ([MaDichVuUuDai]),
    CONSTRAINT [FK_DichVuUuDai_DichVu_MaDichVu] FOREIGN KEY ([MaDichVu]) REFERENCES [DichVu] ([MaDichVu]) ON DELETE CASCADE
);"
2023-12-04T03:57:54.5819252+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [ChiTietPhuThuMonAn] (
    [MaPhuThu] nvarchar(450) NOT NULL,
    [MaMonAn] nvarchar(450) NOT NULL,
    [SoLuong] int NOT NULL,
    [DonGia] float NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_ChiTietPhuThuMonAn] PRIMARY KEY ([MaPhuThu], [MaMonAn]),
    CONSTRAINT [FK_ChiTietPhuThuMonAn_MonAn_MaMonAn] FOREIGN KEY ([MaMonAn]) REFERENCES [MonAn] ([MaMonAn]) ON DELETE CASCADE,
    CONSTRAINT [FK_ChiTietPhuThuMonAn_PhuThu_MaPhuThu] FOREIGN KEY ([MaPhuThu]) REFERENCES [PhuThu] ([MaPhuThu]) ON DELETE CASCADE
);"
2023-12-04T03:57:54.5927216+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("11"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [MonAnTrongMenu] (
    [MaMenu] nvarchar(450) NOT NULL,
    [MaMonAn] nvarchar(450) NOT NULL,
    [SoLuongMon] int NOT NULL,
    [DonGia] float NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_MonAnTrongMenu] PRIMARY KEY ([MaMenu], [MaMonAn]),
    CONSTRAINT [FK_MonAnTrongMenu_Menu_MaMenu] FOREIGN KEY ([MaMenu]) REFERENCES [Menu] ([MaMenu]) ON DELETE CASCADE,
    CONSTRAINT [FK_MonAnTrongMenu_MonAn_MaMonAn] FOREIGN KEY ([MaMonAn]) REFERENCES [MonAn] ([MaMonAn]) ON DELETE CASCADE
);"
2023-12-04T03:57:54.5962039+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [ChiTietNuocUong] (
    [MaTiec] nvarchar(450) NOT NULL,
    [MaNuoc] nvarchar(450) NOT NULL,
    [SoLuong] int NOT NULL,
    [TongTien] float NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_ChiTietNuocUong] PRIMARY KEY ([MaTiec], [MaNuoc]),
    CONSTRAINT [FK_ChiTietNuocUong_DatTiec_MaTiec] FOREIGN KEY ([MaTiec]) REFERENCES [DatTiec] ([MaTiec]) ON DELETE CASCADE,
    CONSTRAINT [FK_ChiTietNuocUong_Nuoc_MaNuoc] FOREIGN KEY ([MaNuoc]) REFERENCES [Nuoc] ([MaNuoc]) ON DELETE CASCADE
);"
2023-12-04T03:57:54.6046393+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("8"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [ChiTietPhuThuNuoc] (
    [MaPhuThu] nvarchar(450) NOT NULL,
    [MaNuoc] nvarchar(450) NOT NULL,
    [SoLuong] int NOT NULL,
    [DonGia] float NOT NULL,
    [ThanhTien] float NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_ChiTietPhuThuNuoc] PRIMARY KEY ([MaPhuThu], [MaNuoc]),
    CONSTRAINT [FK_ChiTietPhuThuNuoc_Nuoc_MaNuoc] FOREIGN KEY ([MaNuoc]) REFERENCES [Nuoc] ([MaNuoc]) ON DELETE CASCADE,
    CONSTRAINT [FK_ChiTietPhuThuNuoc_PhuThu_MaPhuThu] FOREIGN KEY ([MaPhuThu]) REFERENCES [PhuThu] ([MaPhuThu]) ON DELETE CASCADE
);"
2023-12-04T03:57:54.6092195+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [ChiTietDichVuTinhPhi] (
    [MaTiec] nvarchar(450) NOT NULL,
    [MaDichVuTinhPhi] nvarchar(450) NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_ChiTietDichVuTinhPhi] PRIMARY KEY ([MaTiec], [MaDichVuTinhPhi]),
    CONSTRAINT [FK_ChiTietDichVuTinhPhi_DatTiec_MaTiec] FOREIGN KEY ([MaTiec]) REFERENCES [DatTiec] ([MaTiec]) ON DELETE CASCADE,
    CONSTRAINT [FK_ChiTietDichVuTinhPhi_DichVuTinhPhi_MaDichVuTinhPhi] FOREIGN KEY ([MaDichVuTinhPhi]) REFERENCES [DichVuTinhPhi] ([MaDichVuTinhPhi]) ON DELETE CASCADE
);"
2023-12-04T03:57:54.6120208+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [ChiTietPhuThuDichVu] (
    [MaPhuThu] nvarchar(450) NOT NULL,
    [MaDichVuTinhPhi] nvarchar(450) NOT NULL,
    [SoLuong] int NOT NULL,
    [DonGia] float NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_ChiTietPhuThuDichVu] PRIMARY KEY ([MaPhuThu], [MaDichVuTinhPhi]),
    CONSTRAINT [FK_ChiTietPhuThuDichVu_DichVuTinhPhi_MaDichVuTinhPhi] FOREIGN KEY ([MaDichVuTinhPhi]) REFERENCES [DichVuTinhPhi] ([MaDichVuTinhPhi]) ON DELETE CASCADE,
    CONSTRAINT [FK_ChiTietPhuThuDichVu_PhuThu_MaPhuThu] FOREIGN KEY ([MaPhuThu]) REFERENCES [PhuThu] ([MaPhuThu]) ON DELETE CASCADE
);"
2023-12-04T03:57:54.6157214+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [ChiTietDichVuUuDai] (
    [MaTiec] nvarchar(450) NOT NULL,
    [MaDichVuUuDai] nvarchar(450) NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_ChiTietDichVuUuDai] PRIMARY KEY ([MaTiec], [MaDichVuUuDai]),
    CONSTRAINT [FK_ChiTietDichVuUuDai_DatTiec_MaTiec] FOREIGN KEY ([MaTiec]) REFERENCES [DatTiec] ([MaTiec]) ON DELETE CASCADE,
    CONSTRAINT [FK_ChiTietDichVuUuDai_DichVuUuDai_MaDichVuUuDai] FOREIGN KEY ([MaDichVuUuDai]) REFERENCES [DichVuUuDai] ([MaDichVuUuDai]) ON DELETE CASCADE
);"
2023-12-04T03:57:57.6297127+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("14"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE INDEX [IX_AccessToken_StrTokenIDToken] ON [AccessToken] ([StrTokenIDToken]);"
2023-12-04T03:57:57.6314263+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE INDEX [IX_AccessToken_userName] ON [AccessToken] ([userName]);"
2023-12-04T03:57:57.6322620+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE INDEX [IX_ChiTietDichVuTinhPhi_MaDichVuTinhPhi] ON [ChiTietDichVuTinhPhi] ([MaDichVuTinhPhi]);"
2023-12-04T03:57:57.6337785+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE INDEX [IX_ChiTietDichVuUuDai_MaDichVuUuDai] ON [ChiTietDichVuUuDai] ([MaDichVuUuDai]);"
2023-12-04T03:57:57.6348193+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE INDEX [IX_ChiTietMenu_MaMenu] ON [ChiTietMenu] ([MaMenu]);"
2023-12-04T03:57:57.6354413+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE INDEX [IX_ChiTietNuocUong_MaNuoc] ON [ChiTietNuocUong] ([MaNuoc]);"
2023-12-04T03:57:57.6366021+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE INDEX [IX_ChiTietPhuThuDichVu_MaDichVuTinhPhi] ON [ChiTietPhuThuDichVu] ([MaDichVuTinhPhi]);"
2023-12-04T03:57:57.6376458+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE INDEX [IX_ChiTietPhuThuMonAn_MaMonAn] ON [ChiTietPhuThuMonAn] ([MaMonAn]);"
2023-12-04T03:57:57.6388280+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE INDEX [IX_ChiTietPhuThuNuoc_MaNuoc] ON [ChiTietPhuThuNuoc] ([MaNuoc]);"
2023-12-04T03:57:57.6405775+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE INDEX [IX_DanhGia_MaKhachHang] ON [DanhGia] ([MaKhachHang]);"
2023-12-04T03:57:57.6413568+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE INDEX [IX_DatTiec_MaKhachHang] ON [DatTiec] ([MaKhachHang]);"
2023-12-04T03:57:57.6420104+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE INDEX [IX_DichVu_MaLoaiDichVu] ON [DichVu] ([MaLoaiDichVu]);"
2023-12-04T03:57:57.6426350+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE INDEX [IX_DichVuTinhPhi_MaDichVu] ON [DichVuTinhPhi] ([MaDichVu]);"
2023-12-04T03:57:57.6438448+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE INDEX [IX_DichVuUuDai_MaDichVu] ON [DichVuUuDai] ([MaDichVu]);"
2023-12-04T03:57:57.6450233+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE INDEX [IX_LichSanhTiec_MaSanh] ON [LichSanhTiec] ([MaSanh]);"
2023-12-04T03:57:57.6459666+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE INDEX [IX_MonAn_MaLoaiMonAn] ON [MonAn] ([MaLoaiMonAn]);"
2023-12-04T03:57:57.6481942+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE INDEX [IX_MonAnTrongMenu_MaMonAn] ON [MonAnTrongMenu] ([MaMonAn]);"
2023-12-04T03:57:57.6490001+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE INDEX [IX_NhanVienTrongTiec_MaNhanVien] ON [NhanVienTrongTiec] ([MaNhanVien]);"
2023-12-04T03:57:57.6506976+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE INDEX [IX_Nuoc_MaLoaiNuoc] ON [Nuoc] ([MaLoaiNuoc]);"
2023-12-04T03:57:57.6515495+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE INDEX [IX_PhuThu_MaHoaDon] ON [PhuThu] ([MaHoaDon]);"
2023-12-04T03:57:57.6522336+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE INDEX [IX_RefreshToken_StrTokenIDToken] ON [RefreshToken] ([StrTokenIDToken]);"
2023-12-04T03:57:59.8454527+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE INDEX [IX_RefreshToken_userName] ON [RefreshToken] ([userName]);"
2023-12-04T03:57:59.8566182+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("11"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20231203205738_UpdateKDL', N'7.0.9');"
2023-12-04T03:58:14.9710636+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("52"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT 1"
2023-12-04T03:58:15.1153856+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("52"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');"
2023-12-04T03:58:15.1232817+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT 1"
2023-12-04T03:58:15.1326390+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');"
2023-12-04T03:58:15.1768903+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("16"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];"
2023-12-04T03:58:15.2099886+07:00 [INF] (Microsoft.EntityFrameworkCore.Migrations) No migrations were applied. The database is already up to date.
2023-12-04T03:58:15.6672656+07:00 [INF] (Microsoft.Hosting.Lifetime) Now listening on: "https://localhost:7267"
2023-12-04T03:58:15.6697209+07:00 [INF] (Microsoft.Hosting.Lifetime) Now listening on: "http://localhost:5140"
2023-12-04T03:58:15.6734103+07:00 [INF] (Microsoft.Hosting.Lifetime) Application started. Press Ctrl+C to shut down.
2023-12-04T03:58:15.6750449+07:00 [INF] (Microsoft.Hosting.Lifetime) Hosting environment: "Development"
2023-12-04T03:58:15.6765555+07:00 [INF] (Microsoft.Hosting.Lifetime) Content root path: "D:\NhaHangTiecCuoi\WeddingRestaurant\WeddingRestaurant.WebApi\"
2023-12-04T03:59:36.7448389+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("93"ms) [Parameters=["@__model_MaTiec_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='1200']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [DatTiec] AS [d]
        WHERE [d].[MaTiec] = @__model_MaTiec_0 AND ([d].[TrangThai] <> N'Đã hủy' OR ([d].[TrangThai] IS NULL))) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END"
2023-12-04T03:59:37.1253864+07:00 [INF] (Serilog.AspNetCore.RequestLoggingMiddleware) HTTP "POST" "/api/dat-tiec/add" responded 400 in 1573.2281 ms
2023-12-04T04:00:39.7550298+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=["@__model_MaTiec_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='1200']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [DatTiec] AS [d]
        WHERE [d].[MaTiec] = @__model_MaTiec_0 AND ([d].[TrangThai] <> N'Đã hủy' OR ([d].[TrangThai] IS NULL))) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END"
2023-12-04T04:00:39.7986806+07:00 [INF] (Serilog.AspNetCore.RequestLoggingMiddleware) HTTP "POST" "/api/dat-tiec/add" responded 400 in 123.6102 ms
2023-12-04T04:01:23.2767660+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("51"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT 1"
2023-12-04T04:01:23.5358205+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("164"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');"
2023-12-04T04:01:23.5455543+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT 1"
2023-12-04T04:01:23.5480775+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');"
2023-12-04T04:01:23.6189869+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("40"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];"
2023-12-04T04:01:23.6582671+07:00 [INF] (Microsoft.EntityFrameworkCore.Migrations) No migrations were applied. The database is already up to date.
2023-12-04T04:01:24.1282033+07:00 [INF] (Microsoft.Hosting.Lifetime) Now listening on: "https://localhost:7267"
2023-12-04T04:01:24.1297368+07:00 [INF] (Microsoft.Hosting.Lifetime) Now listening on: "http://localhost:5140"
2023-12-04T04:01:24.1333900+07:00 [INF] (Microsoft.Hosting.Lifetime) Application started. Press Ctrl+C to shut down.
2023-12-04T04:01:24.1345523+07:00 [INF] (Microsoft.Hosting.Lifetime) Hosting environment: "Development"
2023-12-04T04:01:24.1361184+07:00 [INF] (Microsoft.Hosting.Lifetime) Content root path: "D:\NhaHangTiecCuoi\WeddingRestaurant\WeddingRestaurant.WebApi\"
2023-12-04T04:01:57.2252902+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("322"ms) [Parameters=["@__model_MaTiec_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='1200']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [DatTiec] AS [d]
        WHERE [d].[MaTiec] = @__model_MaTiec_0 AND ([d].[TrangThai] <> N'Đã hủy' OR ([d].[TrangThai] IS NULL))) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END"
2023-12-04T04:01:57.9000923+07:00 [ERR] (Microsoft.EntityFrameworkCore.Database.Command) Failed executing DbCommand ("182"ms) [Parameters=["@p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 450), @p6='?' (DbType = DateTime2), @p7='?' (Size = 4000), @p8='?' (DbType = Double), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (Size = 4000), @p14='?' (DbType = Double), @p15='?' (DbType = Double), @p16='?' (DbType = Int32), @p17='?' (DbType = Double), @p18='?' (DbType = Double), @p19='?' (DbType = Double), @p20='?' (Size = 4000)"], CommandType='Text', CommandTimeout='1200']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [DatTiec] ([MaTiec], [GhiChu], [LoaiBan], [LoaiHinhTiec], [MaHoaDon], [MaKhachHang], [NgayDatTiec], [NgayToChuc], [PhiDichVu], [SoLuongBanChay], [SoLuongBanChinhThuc], [SoLuongBanDuPhong], [SoLuongBanTang], [ThoiGianToChuc], [TienCocLan1], [TienCocLan2], [TongBanSetup], [TongTienDuKien], [TongTienGiam], [TongTienPhaiTra], [TrangThai])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20);"
2023-12-04T04:01:58.0765649+07:00 [ERR] (Microsoft.EntityFrameworkCore.Update) An exception occurred in the database while saving changes for context type '"WeddingRestaurant.Repository.Infrastructure.AppDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint \"FK_DatTiec_HoaDon_MaTiec\". The conflict occurred in database \"DB_WeddingRestaurant\", table \"dbo.HoaDon\", column 'MaHoaDon'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:16dfe2ea-60db-43d2-855e-25d0265d36c7
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_DatTiec_HoaDon_MaTiec". The conflict occurred in database "DB_WeddingRestaurant", table "dbo.HoaDon", column 'MaHoaDon'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:16dfe2ea-60db-43d2-855e-25d0265d36c7
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-12-04T04:01:58.5375020+07:00 [INF] (Serilog.AspNetCore.RequestLoggingMiddleware) HTTP "POST" "/api/dat-tiec/add" responded 400 in 3048.7503 ms
2023-12-04T04:02:54.9433710+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("2"ms) [Parameters=["@__model_MaTiec_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='1200']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [DatTiec] AS [d]
        WHERE [d].[MaTiec] = @__model_MaTiec_0 AND ([d].[TrangThai] <> N'Đã hủy' OR ([d].[TrangThai] IS NULL))) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END"
2023-12-04T04:02:54.9528957+07:00 [ERR] (Microsoft.EntityFrameworkCore.Database.Command) Failed executing DbCommand ("5"ms) [Parameters=["@p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 450), @p6='?' (DbType = DateTime2), @p7='?' (Size = 4000), @p8='?' (DbType = Double), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (Size = 4000), @p14='?' (DbType = Double), @p15='?' (DbType = Double), @p16='?' (DbType = Int32), @p17='?' (DbType = Double), @p18='?' (DbType = Double), @p19='?' (DbType = Double), @p20='?' (Size = 4000)"], CommandType='Text', CommandTimeout='1200']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [DatTiec] ([MaTiec], [GhiChu], [LoaiBan], [LoaiHinhTiec], [MaHoaDon], [MaKhachHang], [NgayDatTiec], [NgayToChuc], [PhiDichVu], [SoLuongBanChay], [SoLuongBanChinhThuc], [SoLuongBanDuPhong], [SoLuongBanTang], [ThoiGianToChuc], [TienCocLan1], [TienCocLan2], [TongBanSetup], [TongTienDuKien], [TongTienGiam], [TongTienPhaiTra], [TrangThai])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20);"
2023-12-04T04:02:54.9595695+07:00 [ERR] (Microsoft.EntityFrameworkCore.Update) An exception occurred in the database while saving changes for context type '"WeddingRestaurant.Repository.Infrastructure.AppDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint \"FK_DatTiec_HoaDon_MaTiec\". The conflict occurred in database \"DB_WeddingRestaurant\", table \"dbo.HoaDon\", column 'MaHoaDon'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:16dfe2ea-60db-43d2-855e-25d0265d36c7
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_DatTiec_HoaDon_MaTiec". The conflict occurred in database "DB_WeddingRestaurant", table "dbo.HoaDon", column 'MaHoaDon'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:16dfe2ea-60db-43d2-855e-25d0265d36c7
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-12-04T04:02:55.0210102+07:00 [INF] (Serilog.AspNetCore.RequestLoggingMiddleware) HTTP "POST" "/api/dat-tiec/add" responded 400 in 177.8464 ms
2023-12-04T04:03:26.1876556+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("8"ms) [Parameters=["@__model_MaTiec_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='1200']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [DatTiec] AS [d]
        WHERE [d].[MaTiec] = @__model_MaTiec_0 AND ([d].[TrangThai] <> N'Đã hủy' OR ([d].[TrangThai] IS NULL))) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END"
2023-12-04T04:03:26.2185202+07:00 [ERR] (Microsoft.EntityFrameworkCore.Database.Command) Failed executing DbCommand ("11"ms) [Parameters=["@p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 450), @p6='?' (DbType = DateTime2), @p7='?' (Size = 4000), @p8='?' (DbType = Double), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (Size = 4000), @p14='?' (DbType = Double), @p15='?' (DbType = Double), @p16='?' (DbType = Int32), @p17='?' (DbType = Double), @p18='?' (DbType = Double), @p19='?' (DbType = Double), @p20='?' (Size = 4000)"], CommandType='Text', CommandTimeout='1200']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [DatTiec] ([MaTiec], [GhiChu], [LoaiBan], [LoaiHinhTiec], [MaHoaDon], [MaKhachHang], [NgayDatTiec], [NgayToChuc], [PhiDichVu], [SoLuongBanChay], [SoLuongBanChinhThuc], [SoLuongBanDuPhong], [SoLuongBanTang], [ThoiGianToChuc], [TienCocLan1], [TienCocLan2], [TongBanSetup], [TongTienDuKien], [TongTienGiam], [TongTienPhaiTra], [TrangThai])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20);"
2023-12-04T04:03:26.2224872+07:00 [ERR] (Microsoft.EntityFrameworkCore.Update) An exception occurred in the database while saving changes for context type '"WeddingRestaurant.Repository.Infrastructure.AppDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'MaHoaDon', table 'DB_WeddingRestaurant.dbo.DatTiec'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:16dfe2ea-60db-43d2-855e-25d0265d36c7
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'MaHoaDon', table 'DB_WeddingRestaurant.dbo.DatTiec'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:16dfe2ea-60db-43d2-855e-25d0265d36c7
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-12-04T04:03:26.2701156+07:00 [INF] (Serilog.AspNetCore.RequestLoggingMiddleware) HTTP "POST" "/api/dat-tiec/add" responded 400 in 92.8538 ms
2023-12-04T04:05:31.6004738+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("5"ms) [Parameters=["@__model_MaTiec_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='1200']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [DatTiec] AS [d]
        WHERE [d].[MaTiec] = @__model_MaTiec_0 AND ([d].[TrangThai] <> N'Đã hủy' OR ([d].[TrangThai] IS NULL))) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END"
2023-12-04T04:05:32.2915401+07:00 [ERR] (Microsoft.EntityFrameworkCore.Database.Command) Failed executing DbCommand ("685"ms) [Parameters=["@p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 450), @p6='?' (DbType = DateTime2), @p7='?' (Size = 4000), @p8='?' (DbType = Double), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (Size = 4000), @p14='?' (DbType = Double), @p15='?' (DbType = Double), @p16='?' (DbType = Int32), @p17='?' (DbType = Double), @p18='?' (DbType = Double), @p19='?' (DbType = Double), @p20='?' (Size = 4000)"], CommandType='Text', CommandTimeout='1200']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [DatTiec] ([MaTiec], [GhiChu], [LoaiBan], [LoaiHinhTiec], [MaHoaDon], [MaKhachHang], [NgayDatTiec], [NgayToChuc], [PhiDichVu], [SoLuongBanChay], [SoLuongBanChinhThuc], [SoLuongBanDuPhong], [SoLuongBanTang], [ThoiGianToChuc], [TienCocLan1], [TienCocLan2], [TongBanSetup], [TongTienDuKien], [TongTienGiam], [TongTienPhaiTra], [TrangThai])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20);"
2023-12-04T04:05:32.2977693+07:00 [ERR] (Microsoft.EntityFrameworkCore.Update) An exception occurred in the database while saving changes for context type '"WeddingRestaurant.Repository.Infrastructure.AppDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint \"FK_DatTiec_HoaDon_MaTiec\". The conflict occurred in database \"DB_WeddingRestaurant\", table \"dbo.HoaDon\", column 'MaHoaDon'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:16dfe2ea-60db-43d2-855e-25d0265d36c7
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_DatTiec_HoaDon_MaTiec". The conflict occurred in database "DB_WeddingRestaurant", table "dbo.HoaDon", column 'MaHoaDon'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:16dfe2ea-60db-43d2-855e-25d0265d36c7
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-12-04T04:05:32.3563026+07:00 [INF] (Serilog.AspNetCore.RequestLoggingMiddleware) HTTP "POST" "/api/dat-tiec/add" responded 400 in 768.1142 ms
2023-12-04T04:05:37.8836576+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("2"ms) [Parameters=["@__model_MaTiec_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='1200']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [DatTiec] AS [d]
        WHERE [d].[MaTiec] = @__model_MaTiec_0 AND ([d].[TrangThai] <> N'Đã hủy' OR ([d].[TrangThai] IS NULL))) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END"
2023-12-04T04:05:38.0845141+07:00 [ERR] (Microsoft.EntityFrameworkCore.Database.Command) Failed executing DbCommand ("198"ms) [Parameters=["@p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 450), @p6='?' (DbType = DateTime2), @p7='?' (Size = 4000), @p8='?' (DbType = Double), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (Size = 4000), @p14='?' (DbType = Double), @p15='?' (DbType = Double), @p16='?' (DbType = Int32), @p17='?' (DbType = Double), @p18='?' (DbType = Double), @p19='?' (DbType = Double), @p20='?' (Size = 4000)"], CommandType='Text', CommandTimeout='1200']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [DatTiec] ([MaTiec], [GhiChu], [LoaiBan], [LoaiHinhTiec], [MaHoaDon], [MaKhachHang], [NgayDatTiec], [NgayToChuc], [PhiDichVu], [SoLuongBanChay], [SoLuongBanChinhThuc], [SoLuongBanDuPhong], [SoLuongBanTang], [ThoiGianToChuc], [TienCocLan1], [TienCocLan2], [TongBanSetup], [TongTienDuKien], [TongTienGiam], [TongTienPhaiTra], [TrangThai])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20);"
2023-12-04T04:05:38.0923945+07:00 [ERR] (Microsoft.EntityFrameworkCore.Update) An exception occurred in the database while saving changes for context type '"WeddingRestaurant.Repository.Infrastructure.AppDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint \"FK_DatTiec_HoaDon_MaTiec\". The conflict occurred in database \"DB_WeddingRestaurant\", table \"dbo.HoaDon\", column 'MaHoaDon'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:16dfe2ea-60db-43d2-855e-25d0265d36c7
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_DatTiec_HoaDon_MaTiec". The conflict occurred in database "DB_WeddingRestaurant", table "dbo.HoaDon", column 'MaHoaDon'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:16dfe2ea-60db-43d2-855e-25d0265d36c7
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-12-04T04:05:38.1560218+07:00 [INF] (Serilog.AspNetCore.RequestLoggingMiddleware) HTTP "POST" "/api/dat-tiec/add" responded 400 in 275.5493 ms
2023-12-04T04:09:54.1894199+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("54"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT 1"
2023-12-04T04:09:54.3246684+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("49"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');"
2023-12-04T04:09:54.3340464+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT 1"
2023-12-04T04:09:54.3436759+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');"
2023-12-04T04:09:54.3796118+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];"
2023-12-04T04:09:54.4169588+07:00 [INF] (Microsoft.EntityFrameworkCore.Migrations) No migrations were applied. The database is already up to date.
2023-12-04T04:09:54.8803815+07:00 [INF] (Microsoft.Hosting.Lifetime) Now listening on: "https://localhost:7267"
2023-12-04T04:09:54.8831590+07:00 [INF] (Microsoft.Hosting.Lifetime) Now listening on: "http://localhost:5140"
2023-12-04T04:09:54.8864554+07:00 [INF] (Microsoft.Hosting.Lifetime) Application started. Press Ctrl+C to shut down.
2023-12-04T04:09:54.8872852+07:00 [INF] (Microsoft.Hosting.Lifetime) Hosting environment: "Development"
2023-12-04T04:09:54.8889816+07:00 [INF] (Microsoft.Hosting.Lifetime) Content root path: "D:\NhaHangTiecCuoi\WeddingRestaurant\WeddingRestaurant.WebApi\"
2023-12-04T04:12:32.5503687+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("75"ms) [Parameters=["@__model_MaTiec_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='1200']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [DatTiec] AS [d]
        WHERE [d].[MaTiec] = @__model_MaTiec_0 AND ([d].[TrangThai] <> N'Đã hủy' OR ([d].[TrangThai] IS NULL))) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END"
2023-12-04T04:12:33.0158883+07:00 [ERR] (Microsoft.EntityFrameworkCore.Database.Command) Failed executing DbCommand ("14"ms) [Parameters=["@p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 450), @p6='?' (DbType = DateTime2), @p7='?' (Size = 4000), @p8='?' (DbType = Double), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (Size = 4000), @p14='?' (DbType = Double), @p15='?' (DbType = Double), @p16='?' (DbType = Int32), @p17='?' (DbType = Double), @p18='?' (DbType = Double), @p19='?' (DbType = Double), @p20='?' (Size = 4000)"], CommandType='Text', CommandTimeout='1200']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [DatTiec] ([MaTiec], [GhiChu], [LoaiBan], [LoaiHinhTiec], [MaHoaDon], [MaKhachHang], [NgayDatTiec], [NgayToChuc], [PhiDichVu], [SoLuongBanChay], [SoLuongBanChinhThuc], [SoLuongBanDuPhong], [SoLuongBanTang], [ThoiGianToChuc], [TienCocLan1], [TienCocLan2], [TongBanSetup], [TongTienDuKien], [TongTienGiam], [TongTienPhaiTra], [TrangThai])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20);"
2023-12-04T04:12:33.1076366+07:00 [ERR] (Microsoft.EntityFrameworkCore.Update) An exception occurred in the database while saving changes for context type '"WeddingRestaurant.Repository.Infrastructure.AppDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint \"FK_DatTiec_HoaDon_MaTiec\". The conflict occurred in database \"DB_WeddingRestaurant\", table \"dbo.HoaDon\", column 'MaHoaDon'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:cdc081f2-ae72-4ac3-90fe-4c48cc6afc94
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_DatTiec_HoaDon_MaTiec". The conflict occurred in database "DB_WeddingRestaurant", table "dbo.HoaDon", column 'MaHoaDon'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:cdc081f2-ae72-4ac3-90fe-4c48cc6afc94
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-12-04T04:12:33.3598828+07:00 [INF] (Serilog.AspNetCore.RequestLoggingMiddleware) HTTP "POST" "/api/dat-tiec/add" responded 400 in 2351.8127 ms
2023-12-04T04:13:00.4423593+07:00 [INF] (Serilog.AspNetCore.RequestLoggingMiddleware) HTTP "POST" "/api/dat-tiec/add" responded 400 in 134.2686 ms
2023-12-04T04:15:31.4351502+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("152"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE DATABASE [DB_WeddingRestaurant];"
2023-12-04T04:15:31.5039889+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("37"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [DB_WeddingRestaurant] SET READ_COMMITTED_SNAPSHOT ON;
END;"
2023-12-04T04:15:31.5220235+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("7"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT 1"
2023-12-04T04:15:31.6075899+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("18"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);"
2023-12-04T04:15:31.6089355+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT 1"
2023-12-04T04:15:31.6277200+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("15"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');"
2023-12-04T04:15:31.6317134+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];"
2023-12-04T04:15:31.6450060+07:00 [INF] (Microsoft.EntityFrameworkCore.Migrations) Applying migration '"20231203211519_UpdateKDL"'.
2023-12-04T04:15:31.7336384+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [HoaDon] (
    [MaHoaDon] nvarchar(450) NOT NULL,
    [NgayLap] nvarchar(max) NOT NULL,
    [TongTienPhuThu] decimal(18,2) NOT NULL,
    [TongTienThanhToan] decimal(18,2) NOT NULL,
    [MaTiec] nvarchar(max) NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_HoaDon] PRIMARY KEY ([MaHoaDon])
);"
2023-12-04T04:15:31.7351152+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [KhachHang] (
    [MaKhachHang] nvarchar(450) NOT NULL,
    [TenKhachHang] nvarchar(max) NOT NULL,
    [SoDienThoai] nvarchar(max) NOT NULL,
    [NgaySinh] nvarchar(max) NOT NULL,
    [CCCD] nvarchar(max) NOT NULL,
    [Gmail] nvarchar(max) NOT NULL,
    [MatKhau] nvarchar(max) NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_KhachHang] PRIMARY KEY ([MaKhachHang])
);"
2023-12-04T04:15:31.7368922+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [LoaiDichVu] (
    [MaLoaiDichVu] nvarchar(450) NOT NULL,
    [TenLoaiDichVu] nvarchar(max) NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_LoaiDichVu] PRIMARY KEY ([MaLoaiDichVu])
);"
2023-12-04T04:15:31.7383662+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [LoaiMonAn] (
    [MaLoaiMonAn] nvarchar(450) NOT NULL,
    [TenLoaiMon] nvarchar(max) NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_LoaiMonAn] PRIMARY KEY ([MaLoaiMonAn])
);"
2023-12-04T04:15:31.7407522+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [LoaiNuoc] (
    [MaLoaiNuoc] nvarchar(450) NOT NULL,
    [TenLoaiNuoc] nvarchar(max) NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_LoaiNuoc] PRIMARY KEY ([MaLoaiNuoc])
);"
2023-12-04T04:15:31.7470599+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [Menu] (
    [MaMenu] nvarchar(450) NOT NULL,
    [TenMenu] nvarchar(max) NOT NULL,
    [DonGiaMenu] float NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_Menu] PRIMARY KEY ([MaMenu])
);"
2023-12-04T04:15:31.7481631+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [NguoiDung] (
    [userName] nvarchar(450) NOT NULL,
    [password] nvarchar(max) NOT NULL,
    [quyen] nvarchar(max) NOT NULL,
    [hoTen] nvarchar(max) NOT NULL,
    [sdt] nvarchar(max) NOT NULL,
    [email] nvarchar(max) NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_NguoiDung] PRIMARY KEY ([userName])
);"
2023-12-04T04:15:31.7496340+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [NhanVien] (
    [MaNhanVien] nvarchar(450) NOT NULL,
    [TenNhanVien] nvarchar(max) NOT NULL,
    [SoDienThoai] nvarchar(max) NOT NULL,
    [NgaySinh] nvarchar(max) NOT NULL,
    [CCCD] nvarchar(max) NOT NULL,
    [Gmail] nvarchar(max) NOT NULL,
    [NgayVaoLam] nvarchar(max) NOT NULL,
    [NgayNghiViec] nvarchar(max) NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_NhanVien] PRIMARY KEY ([MaNhanVien])
);"
2023-12-04T04:15:31.7510989+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [Sanh] (
    [MaSanh] nvarchar(450) NOT NULL,
    [TenSanh] nvarchar(max) NOT NULL,
    [HinhAnh] nvarchar(max) NOT NULL,
    [SucChuaToiThieu] int NOT NULL,
    [SucChuaToiDa] int NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_Sanh] PRIMARY KEY ([MaSanh])
);"
2023-12-04T04:15:31.9814220+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [Token] (
    [IDToken] nvarchar(450) NOT NULL,
    [AccessToken] nvarchar(max) NOT NULL,
    [RefreshToken] nvarchar(max) NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_Token] PRIMARY KEY ([IDToken])
);"
2023-12-04T04:15:31.9850905+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [PhuThu] (
    [MaPhuThu] nvarchar(450) NOT NULL,
    [LoaiPhuThu] nvarchar(max) NOT NULL,
    [MoTaPhuThu] nvarchar(max) NOT NULL,
    [TongTien] float NOT NULL,
    [MaHoaDon] nvarchar(450) NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_PhuThu] PRIMARY KEY ([MaPhuThu]),
    CONSTRAINT [FK_PhuThu_HoaDon_MaHoaDon] FOREIGN KEY ([MaHoaDon]) REFERENCES [HoaDon] ([MaHoaDon]) ON DELETE CASCADE
);"
2023-12-04T04:15:31.9891846+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [DanhGia] (
    [MaDanhGia] nvarchar(450) NOT NULL,
    [NoiDungDanhGia] nvarchar(max) NOT NULL,
    [MaKhachHang] nvarchar(450) NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_DanhGia] PRIMARY KEY ([MaDanhGia]),
    CONSTRAINT [FK_DanhGia_KhachHang_MaKhachHang] FOREIGN KEY ([MaKhachHang]) REFERENCES [KhachHang] ([MaKhachHang]) ON DELETE CASCADE
);"
2023-12-04T04:15:31.9989777+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [DatTiec] (
    [MaTiec] nvarchar(450) NOT NULL,
    [LoaiHinhTiec] nvarchar(max) NOT NULL,
    [NgayDatTiec] datetime2 NOT NULL,
    [NgayToChuc] nvarchar(max) NOT NULL,
    [ThoiGianToChuc] nvarchar(max) NOT NULL,
    [SoLuongBanChinhThuc] int NOT NULL,
    [SoLuongBanTang] int NOT NULL,
    [SoLuongBanChay] int NOT NULL,
    [SoLuongBanDuPhong] int NOT NULL,
    [TongBanSetup] int NOT NULL,
    [LoaiBan] nvarchar(max) NOT NULL,
    [PhiDichVu] float NOT NULL,
    [TongTienDuKien] float NULL,
    [TongTienGiam] float NULL,
    [TongTienPhaiTra] float NULL,
    [TienCocLan1] float NULL,
    [TienCocLan2] float NULL,
    [GhiChu] nvarchar(max) NULL,
    [MaKhachHang] nvarchar(450) NULL,
    [MaHoaDon] nvarchar(max) NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_DatTiec] PRIMARY KEY ([MaTiec]),
    CONSTRAINT [FK_DatTiec_HoaDon_MaTiec] FOREIGN KEY ([MaTiec]) REFERENCES [HoaDon] ([MaHoaDon]) ON DELETE CASCADE,
    CONSTRAINT [FK_DatTiec_KhachHang_MaKhachHang] FOREIGN KEY ([MaKhachHang]) REFERENCES [KhachHang] ([MaKhachHang]) ON DELETE CASCADE
);"
2023-12-04T04:15:32.0011251+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [DichVu] (
    [MaDichVu] nvarchar(450) NOT NULL,
    [TenDichVu] nvarchar(max) NOT NULL,
    [HinhAnh] nvarchar(max) NOT NULL,
    [MaLoaiDichVu] nvarchar(450) NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_DichVu] PRIMARY KEY ([MaDichVu]),
    CONSTRAINT [FK_DichVu_LoaiDichVu_MaLoaiDichVu] FOREIGN KEY ([MaLoaiDichVu]) REFERENCES [LoaiDichVu] ([MaLoaiDichVu]) ON DELETE CASCADE
);"
2023-12-04T04:15:32.0026876+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [MonAn] (
    [MaMonAn] nvarchar(450) NOT NULL,
    [TenMonAn] nvarchar(max) NOT NULL,
    [DonGia] float NOT NULL,
    [HinhAnh] nvarchar(max) NOT NULL,
    [DVT] nvarchar(max) NOT NULL,
    [MaLoaiMonAn] nvarchar(450) NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_MonAn] PRIMARY KEY ([MaMonAn]),
    CONSTRAINT [FK_MonAn_LoaiMonAn_MaLoaiMonAn] FOREIGN KEY ([MaLoaiMonAn]) REFERENCES [LoaiMonAn] ([MaLoaiMonAn]) ON DELETE CASCADE
);"
2023-12-04T04:15:32.0058687+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [Nuoc] (
    [MaNuoc] nvarchar(450) NOT NULL,
    [TenNuoc] nvarchar(max) NOT NULL,
    [DVT] nvarchar(max) NOT NULL,
    [HinhAnh] nvarchar(max) NOT NULL,
    [DonGia] float NOT NULL,
    [MaLoaiNuoc] nvarchar(450) NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_Nuoc] PRIMARY KEY ([MaNuoc]),
    CONSTRAINT [FK_Nuoc_LoaiNuoc_MaLoaiNuoc] FOREIGN KEY ([MaLoaiNuoc]) REFERENCES [LoaiNuoc] ([MaLoaiNuoc]) ON DELETE CASCADE
);"
2023-12-04T04:15:35.8940985+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("13"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [AccessToken] (
    [Token] nvarchar(max) NOT NULL,
    [StrTokenIDToken] nvarchar(450) NULL,
    [userName] nvarchar(450) NOT NULL,
    [IsUsed] bit NOT NULL,
    [IsRevoked] bit NOT NULL,
    [ExpireAt] datetime2 NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [FK_AccessToken_NguoiDung_userName] FOREIGN KEY ([userName]) REFERENCES [NguoiDung] ([userName]) ON DELETE CASCADE,
    CONSTRAINT [FK_AccessToken_Token_StrTokenIDToken] FOREIGN KEY ([StrTokenIDToken]) REFERENCES [Token] ([IDToken])
);"
2023-12-04T04:15:35.8987402+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [RefreshToken] (
    [Token] nvarchar(450) NOT NULL,
    [userName] nvarchar(450) NOT NULL,
    [StrTokenIDToken] nvarchar(450) NULL,
    [JwtID] nvarchar(max) NOT NULL,
    [IsUsed] bit NOT NULL,
    [IsRevoked] bit NOT NULL,
    [ExpireAt] datetime2 NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_RefreshToken] PRIMARY KEY ([Token], [userName]),
    CONSTRAINT [FK_RefreshToken_NguoiDung_userName] FOREIGN KEY ([userName]) REFERENCES [NguoiDung] ([userName]) ON DELETE CASCADE,
    CONSTRAINT [FK_RefreshToken_Token_StrTokenIDToken] FOREIGN KEY ([StrTokenIDToken]) REFERENCES [Token] ([IDToken])
);"
2023-12-04T04:15:35.9016556+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [ChiTietMenu] (
    [MaTiec] nvarchar(450) NOT NULL,
    [MaMenu] nvarchar(450) NOT NULL,
    [SoLuongMenuCuaTiec] int NOT NULL,
    [TongTien] float NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_ChiTietMenu] PRIMARY KEY ([MaTiec], [MaMenu]),
    CONSTRAINT [FK_ChiTietMenu_DatTiec_MaTiec] FOREIGN KEY ([MaTiec]) REFERENCES [DatTiec] ([MaTiec]) ON DELETE CASCADE,
    CONSTRAINT [FK_ChiTietMenu_Menu_MaMenu] FOREIGN KEY ([MaMenu]) REFERENCES [Menu] ([MaMenu]) ON DELETE CASCADE
);"
2023-12-04T04:15:35.9051741+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [LichSanhTiec] (
    [MaTiec] nvarchar(450) NOT NULL,
    [MaSanh] nvarchar(450) NOT NULL,
    [NgayDienRa] datetime2 NOT NULL,
    [Ca] nvarchar(max) NOT NULL,
    [TienPhuThu] float NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_LichSanhTiec] PRIMARY KEY ([MaTiec], [MaSanh]),
    CONSTRAINT [FK_LichSanhTiec_DatTiec_MaTiec] FOREIGN KEY ([MaTiec]) REFERENCES [DatTiec] ([MaTiec]) ON DELETE CASCADE,
    CONSTRAINT [FK_LichSanhTiec_Sanh_MaSanh] FOREIGN KEY ([MaSanh]) REFERENCES [Sanh] ([MaSanh]) ON DELETE CASCADE
);"
2023-12-04T04:15:35.9079107+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [NhanVienTrongTiec] (
    [MaTiec] nvarchar(450) NOT NULL,
    [MaNhanVien] nvarchar(450) NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_NhanVienTrongTiec] PRIMARY KEY ([MaTiec], [MaNhanVien]),
    CONSTRAINT [FK_NhanVienTrongTiec_DatTiec_MaTiec] FOREIGN KEY ([MaTiec]) REFERENCES [DatTiec] ([MaTiec]) ON DELETE CASCADE,
    CONSTRAINT [FK_NhanVienTrongTiec_NhanVien_MaNhanVien] FOREIGN KEY ([MaNhanVien]) REFERENCES [NhanVien] ([MaNhanVien]) ON DELETE CASCADE
);"
2023-12-04T04:15:35.9127967+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [DichVuTinhPhi] (
    [MaDichVuTinhPhi] nvarchar(450) NOT NULL,
    [TenDichVu] nvarchar(max) NOT NULL,
    [MoTa] nvarchar(max) NOT NULL,
    [HinhAnh] nvarchar(max) NOT NULL,
    [DonGiaDichVu] float NOT NULL,
    [MaDichVu] nvarchar(450) NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_DichVuTinhPhi] PRIMARY KEY ([MaDichVuTinhPhi]),
    CONSTRAINT [FK_DichVuTinhPhi_DichVu_MaDichVu] FOREIGN KEY ([MaDichVu]) REFERENCES [DichVu] ([MaDichVu]) ON DELETE CASCADE
);"
2023-12-04T04:15:39.3861926+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [DichVuUuDai] (
    [MaDichVuUuDai] nvarchar(450) NOT NULL,
    [TenDichVu] nvarchar(max) NOT NULL,
    [DieuKienApDung] nvarchar(max) NOT NULL,
    [MoTa] nvarchar(max) NOT NULL,
    [HinhAnh] nvarchar(max) NOT NULL,
    [MaDichVu] nvarchar(450) NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_DichVuUuDai] PRIMARY KEY ([MaDichVuUuDai]),
    CONSTRAINT [FK_DichVuUuDai_DichVu_MaDichVu] FOREIGN KEY ([MaDichVu]) REFERENCES [DichVu] ([MaDichVu]) ON DELETE CASCADE
);"
2023-12-04T04:15:39.3899708+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [ChiTietPhuThuMonAn] (
    [MaPhuThu] nvarchar(450) NOT NULL,
    [MaMonAn] nvarchar(450) NOT NULL,
    [SoLuong] int NOT NULL,
    [DonGia] float NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_ChiTietPhuThuMonAn] PRIMARY KEY ([MaPhuThu], [MaMonAn]),
    CONSTRAINT [FK_ChiTietPhuThuMonAn_MonAn_MaMonAn] FOREIGN KEY ([MaMonAn]) REFERENCES [MonAn] ([MaMonAn]) ON DELETE CASCADE,
    CONSTRAINT [FK_ChiTietPhuThuMonAn_PhuThu_MaPhuThu] FOREIGN KEY ([MaPhuThu]) REFERENCES [PhuThu] ([MaPhuThu]) ON DELETE CASCADE
);"
2023-12-04T04:15:39.3928154+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [MonAnTrongMenu] (
    [MaMenu] nvarchar(450) NOT NULL,
    [MaMonAn] nvarchar(450) NOT NULL,
    [SoLuongMon] int NOT NULL,
    [DonGia] float NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_MonAnTrongMenu] PRIMARY KEY ([MaMenu], [MaMonAn]),
    CONSTRAINT [FK_MonAnTrongMenu_Menu_MaMenu] FOREIGN KEY ([MaMenu]) REFERENCES [Menu] ([MaMenu]) ON DELETE CASCADE,
    CONSTRAINT [FK_MonAnTrongMenu_MonAn_MaMonAn] FOREIGN KEY ([MaMonAn]) REFERENCES [MonAn] ([MaMonAn]) ON DELETE CASCADE
);"
2023-12-04T04:15:39.3959369+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [ChiTietNuocUong] (
    [MaTiec] nvarchar(450) NOT NULL,
    [MaNuoc] nvarchar(450) NOT NULL,
    [SoLuong] int NOT NULL,
    [TongTien] float NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_ChiTietNuocUong] PRIMARY KEY ([MaTiec], [MaNuoc]),
    CONSTRAINT [FK_ChiTietNuocUong_DatTiec_MaTiec] FOREIGN KEY ([MaTiec]) REFERENCES [DatTiec] ([MaTiec]) ON DELETE CASCADE,
    CONSTRAINT [FK_ChiTietNuocUong_Nuoc_MaNuoc] FOREIGN KEY ([MaNuoc]) REFERENCES [Nuoc] ([MaNuoc]) ON DELETE CASCADE
);"
2023-12-04T04:15:39.4044956+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("8"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [ChiTietPhuThuNuoc] (
    [MaPhuThu] nvarchar(450) NOT NULL,
    [MaNuoc] nvarchar(450) NOT NULL,
    [SoLuong] int NOT NULL,
    [DonGia] float NOT NULL,
    [ThanhTien] float NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_ChiTietPhuThuNuoc] PRIMARY KEY ([MaPhuThu], [MaNuoc]),
    CONSTRAINT [FK_ChiTietPhuThuNuoc_Nuoc_MaNuoc] FOREIGN KEY ([MaNuoc]) REFERENCES [Nuoc] ([MaNuoc]) ON DELETE CASCADE,
    CONSTRAINT [FK_ChiTietPhuThuNuoc_PhuThu_MaPhuThu] FOREIGN KEY ([MaPhuThu]) REFERENCES [PhuThu] ([MaPhuThu]) ON DELETE CASCADE
);"
2023-12-04T04:15:39.4085065+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [ChiTietDichVuTinhPhi] (
    [MaTiec] nvarchar(450) NOT NULL,
    [MaDichVuTinhPhi] nvarchar(450) NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_ChiTietDichVuTinhPhi] PRIMARY KEY ([MaTiec], [MaDichVuTinhPhi]),
    CONSTRAINT [FK_ChiTietDichVuTinhPhi_DatTiec_MaTiec] FOREIGN KEY ([MaTiec]) REFERENCES [DatTiec] ([MaTiec]) ON DELETE CASCADE,
    CONSTRAINT [FK_ChiTietDichVuTinhPhi_DichVuTinhPhi_MaDichVuTinhPhi] FOREIGN KEY ([MaDichVuTinhPhi]) REFERENCES [DichVuTinhPhi] ([MaDichVuTinhPhi]) ON DELETE CASCADE
);"
2023-12-04T04:15:42.4229508+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [ChiTietPhuThuDichVu] (
    [MaPhuThu] nvarchar(450) NOT NULL,
    [MaDichVuTinhPhi] nvarchar(450) NOT NULL,
    [SoLuong] int NOT NULL,
    [DonGia] float NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_ChiTietPhuThuDichVu] PRIMARY KEY ([MaPhuThu], [MaDichVuTinhPhi]),
    CONSTRAINT [FK_ChiTietPhuThuDichVu_DichVuTinhPhi_MaDichVuTinhPhi] FOREIGN KEY ([MaDichVuTinhPhi]) REFERENCES [DichVuTinhPhi] ([MaDichVuTinhPhi]) ON DELETE CASCADE,
    CONSTRAINT [FK_ChiTietPhuThuDichVu_PhuThu_MaPhuThu] FOREIGN KEY ([MaPhuThu]) REFERENCES [PhuThu] ([MaPhuThu]) ON DELETE CASCADE
);"
2023-12-04T04:15:42.4263350+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [ChiTietDichVuUuDai] (
    [MaTiec] nvarchar(450) NOT NULL,
    [MaDichVuUuDai] nvarchar(450) NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_ChiTietDichVuUuDai] PRIMARY KEY ([MaTiec], [MaDichVuUuDai]),
    CONSTRAINT [FK_ChiTietDichVuUuDai_DatTiec_MaTiec] FOREIGN KEY ([MaTiec]) REFERENCES [DatTiec] ([MaTiec]) ON DELETE CASCADE,
    CONSTRAINT [FK_ChiTietDichVuUuDai_DichVuUuDai_MaDichVuUuDai] FOREIGN KEY ([MaDichVuUuDai]) REFERENCES [DichVuUuDai] ([MaDichVuUuDai]) ON DELETE CASCADE
);"
2023-12-04T04:15:42.4324270+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE INDEX [IX_AccessToken_StrTokenIDToken] ON [AccessToken] ([StrTokenIDToken]);"
2023-12-04T04:15:42.4334081+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE INDEX [IX_AccessToken_userName] ON [AccessToken] ([userName]);"
2023-12-04T04:15:42.4342938+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE INDEX [IX_ChiTietDichVuTinhPhi_MaDichVuTinhPhi] ON [ChiTietDichVuTinhPhi] ([MaDichVuTinhPhi]);"
2023-12-04T04:15:42.4352531+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE INDEX [IX_ChiTietDichVuUuDai_MaDichVuUuDai] ON [ChiTietDichVuUuDai] ([MaDichVuUuDai]);"
2023-12-04T04:15:42.4364742+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE INDEX [IX_ChiTietMenu_MaMenu] ON [ChiTietMenu] ([MaMenu]);"
2023-12-04T04:15:42.4372807+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE INDEX [IX_ChiTietNuocUong_MaNuoc] ON [ChiTietNuocUong] ([MaNuoc]);"
2023-12-04T04:15:42.4380243+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE INDEX [IX_ChiTietPhuThuDichVu_MaDichVuTinhPhi] ON [ChiTietPhuThuDichVu] ([MaDichVuTinhPhi]);"
2023-12-04T04:15:42.4387823+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE INDEX [IX_ChiTietPhuThuMonAn_MaMonAn] ON [ChiTietPhuThuMonAn] ([MaMonAn]);"
2023-12-04T04:15:42.4396329+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE INDEX [IX_ChiTietPhuThuNuoc_MaNuoc] ON [ChiTietPhuThuNuoc] ([MaNuoc]);"
2023-12-04T04:15:42.4411022+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE INDEX [IX_DanhGia_MaKhachHang] ON [DanhGia] ([MaKhachHang]);"
2023-12-04T04:15:42.4418521+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE INDEX [IX_DatTiec_MaKhachHang] ON [DatTiec] ([MaKhachHang]);"
2023-12-04T04:15:42.4425832+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE INDEX [IX_DichVu_MaLoaiDichVu] ON [DichVu] ([MaLoaiDichVu]);"
2023-12-04T04:15:42.4433227+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE INDEX [IX_DichVuTinhPhi_MaDichVu] ON [DichVuTinhPhi] ([MaDichVu]);"
2023-12-04T04:15:42.4440878+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE INDEX [IX_DichVuUuDai_MaDichVu] ON [DichVuUuDai] ([MaDichVu]);"
2023-12-04T04:15:42.4448205+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE INDEX [IX_LichSanhTiec_MaSanh] ON [LichSanhTiec] ([MaSanh]);"
2023-12-04T04:15:42.4455422+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE INDEX [IX_MonAn_MaLoaiMonAn] ON [MonAn] ([MaLoaiMonAn]);"
2023-12-04T04:15:45.0059779+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE INDEX [IX_MonAnTrongMenu_MaMonAn] ON [MonAnTrongMenu] ([MaMonAn]);"
2023-12-04T04:15:45.0072047+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE INDEX [IX_NhanVienTrongTiec_MaNhanVien] ON [NhanVienTrongTiec] ([MaNhanVien]);"
2023-12-04T04:15:45.0082705+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE INDEX [IX_Nuoc_MaLoaiNuoc] ON [Nuoc] ([MaLoaiNuoc]);"
2023-12-04T04:15:45.0094822+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE INDEX [IX_PhuThu_MaHoaDon] ON [PhuThu] ([MaHoaDon]);"
2023-12-04T04:15:45.0112677+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE INDEX [IX_RefreshToken_StrTokenIDToken] ON [RefreshToken] ([StrTokenIDToken]);"
2023-12-04T04:15:45.0123640+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE INDEX [IX_RefreshToken_userName] ON [RefreshToken] ([userName]);"
2023-12-04T04:15:45.0157170+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20231203211519_UpdateKDL', N'7.0.9');"
2023-12-04T04:15:59.4019810+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("53"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT 1"
2023-12-04T04:15:59.5285737+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("45"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');"
2023-12-04T04:15:59.5366730+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT 1"
2023-12-04T04:15:59.5494282+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');"
2023-12-04T04:15:59.5873896+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];"
2023-12-04T04:15:59.6206864+07:00 [INF] (Microsoft.EntityFrameworkCore.Migrations) No migrations were applied. The database is already up to date.
2023-12-04T04:15:59.9634590+07:00 [INF] (Microsoft.Hosting.Lifetime) Now listening on: "https://localhost:7267"
2023-12-04T04:15:59.9658851+07:00 [INF] (Microsoft.Hosting.Lifetime) Now listening on: "http://localhost:5140"
2023-12-04T04:15:59.9695396+07:00 [INF] (Microsoft.Hosting.Lifetime) Application started. Press Ctrl+C to shut down.
2023-12-04T04:15:59.9714764+07:00 [INF] (Microsoft.Hosting.Lifetime) Hosting environment: "Development"
2023-12-04T04:15:59.9723698+07:00 [INF] (Microsoft.Hosting.Lifetime) Content root path: "D:\NhaHangTiecCuoi\WeddingRestaurant\WeddingRestaurant.WebApi\"
2023-12-04T04:16:49.5538276+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("48"ms) [Parameters=["@__model_MaTiec_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='1200']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [DatTiec] AS [d]
        WHERE [d].[MaTiec] = @__model_MaTiec_0 AND ([d].[TrangThai] <> N'Đã hủy' OR ([d].[TrangThai] IS NULL))) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END"
2023-12-04T04:16:49.9038267+07:00 [ERR] (Microsoft.EntityFrameworkCore.Database.Command) Failed executing DbCommand ("11"ms) [Parameters=["@p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 450), @p6='?' (DbType = DateTime2), @p7='?' (Size = 4000), @p8='?' (DbType = Double), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (Size = 4000), @p14='?' (DbType = Double), @p15='?' (DbType = Double), @p16='?' (DbType = Int32), @p17='?' (DbType = Double), @p18='?' (DbType = Double), @p19='?' (DbType = Double), @p20='?' (Size = 4000)"], CommandType='Text', CommandTimeout='1200']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [DatTiec] ([MaTiec], [GhiChu], [LoaiBan], [LoaiHinhTiec], [MaHoaDon], [MaKhachHang], [NgayDatTiec], [NgayToChuc], [PhiDichVu], [SoLuongBanChay], [SoLuongBanChinhThuc], [SoLuongBanDuPhong], [SoLuongBanTang], [ThoiGianToChuc], [TienCocLan1], [TienCocLan2], [TongBanSetup], [TongTienDuKien], [TongTienGiam], [TongTienPhaiTra], [TrangThai])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20);"
2023-12-04T04:16:49.9606760+07:00 [ERR] (Microsoft.EntityFrameworkCore.Update) An exception occurred in the database while saving changes for context type '"WeddingRestaurant.Repository.Infrastructure.AppDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint \"FK_DatTiec_HoaDon_MaTiec\". The conflict occurred in database \"DB_WeddingRestaurant\", table \"dbo.HoaDon\", column 'MaHoaDon'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:b523773d-5470-40dd-9b71-9828048d9974
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_DatTiec_HoaDon_MaTiec". The conflict occurred in database "DB_WeddingRestaurant", table "dbo.HoaDon", column 'MaHoaDon'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:b523773d-5470-40dd-9b71-9828048d9974
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-12-04T04:16:50.1637216+07:00 [INF] (Serilog.AspNetCore.RequestLoggingMiddleware) HTTP "POST" "/api/dat-tiec/add" responded 400 in 1588.4417 ms
2023-12-04T04:23:29.7293390+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("51"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT 1"
2023-12-04T04:23:29.8630550+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("48"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');"
2023-12-04T04:23:29.8724338+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT 1"
2023-12-04T04:23:29.8756169+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');"
2023-12-04T04:23:29.9163884+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];"
2023-12-04T04:23:29.9540316+07:00 [INF] (Microsoft.EntityFrameworkCore.Migrations) No migrations were applied. The database is already up to date.
2023-12-04T04:23:30.3394687+07:00 [INF] (Microsoft.Hosting.Lifetime) Now listening on: "https://localhost:7267"
2023-12-04T04:23:30.3405997+07:00 [INF] (Microsoft.Hosting.Lifetime) Now listening on: "http://localhost:5140"
2023-12-04T04:23:30.3454102+07:00 [INF] (Microsoft.Hosting.Lifetime) Application started. Press Ctrl+C to shut down.
2023-12-04T04:23:30.3468041+07:00 [INF] (Microsoft.Hosting.Lifetime) Hosting environment: "Development"
2023-12-04T04:23:30.3476902+07:00 [INF] (Microsoft.Hosting.Lifetime) Content root path: "D:\NhaHangTiecCuoi\WeddingRestaurant\WeddingRestaurant.WebApi\"
2023-12-04T04:24:19.4437748+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("78"ms) [Parameters=["@__model_MaTiec_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='1200']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [DatTiec] AS [d]
        WHERE [d].[MaTiec] = @__model_MaTiec_0 AND ([d].[TrangThai] IS NULL)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END"
2023-12-04T04:24:19.9376935+07:00 [ERR] (Microsoft.EntityFrameworkCore.Database.Command) Failed executing DbCommand ("17"ms) [Parameters=["@p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 450), @p6='?' (DbType = DateTime2), @p7='?' (Size = 4000), @p8='?' (DbType = Double), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (Size = 4000), @p14='?' (DbType = Double), @p15='?' (DbType = Double), @p16='?' (DbType = Int32), @p17='?' (DbType = Double), @p18='?' (DbType = Double), @p19='?' (DbType = Double), @p20='?' (Size = 4000)"], CommandType='Text', CommandTimeout='1200']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [DatTiec] ([MaTiec], [GhiChu], [LoaiBan], [LoaiHinhTiec], [MaHoaDon], [MaKhachHang], [NgayDatTiec], [NgayToChuc], [PhiDichVu], [SoLuongBanChay], [SoLuongBanChinhThuc], [SoLuongBanDuPhong], [SoLuongBanTang], [ThoiGianToChuc], [TienCocLan1], [TienCocLan2], [TongBanSetup], [TongTienDuKien], [TongTienGiam], [TongTienPhaiTra], [TrangThai])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20);"
2023-12-04T04:24:20.0152383+07:00 [ERR] (Microsoft.EntityFrameworkCore.Update) An exception occurred in the database while saving changes for context type '"WeddingRestaurant.Repository.Infrastructure.AppDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint \"FK_DatTiec_HoaDon_MaTiec\". The conflict occurred in database \"DB_WeddingRestaurant\", table \"dbo.HoaDon\", column 'MaHoaDon'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:0d79c511-8d18-4f66-9041-11099796766a
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_DatTiec_HoaDon_MaTiec". The conflict occurred in database "DB_WeddingRestaurant", table "dbo.HoaDon", column 'MaHoaDon'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:0d79c511-8d18-4f66-9041-11099796766a
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-12-04T04:24:20.2517202+07:00 [INF] (Serilog.AspNetCore.RequestLoggingMiddleware) HTTP "POST" "/api/dat-tiec/add" responded 400 in 2251.7177 ms
2023-12-04T04:38:53.7893664+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("11,764"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE DATABASE [DB_WeddingRestaurant];"
2023-12-04T04:38:53.8718291+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("39"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [DB_WeddingRestaurant] SET READ_COMMITTED_SNAPSHOT ON;
END;"
2023-12-04T04:38:53.8904858+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("8"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT 1"
2023-12-04T04:38:53.9820437+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("7"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);"
2023-12-04T04:38:53.9837002+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT 1"
2023-12-04T04:38:54.0034797+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("15"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');"
2023-12-04T04:38:54.0091471+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];"
2023-12-04T04:38:54.0269801+07:00 [INF] (Microsoft.EntityFrameworkCore.Migrations) Applying migration '"20231203213822_UpdateKDL"'.
2023-12-04T04:38:54.1288916+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [HoaDon] (
    [MaHoaDon] nvarchar(450) NOT NULL,
    [NgayLap] nvarchar(max) NOT NULL,
    [TongTienPhuThu] decimal(18,2) NOT NULL,
    [TongTienThanhToan] decimal(18,2) NOT NULL,
    [MaTiec] nvarchar(max) NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_HoaDon] PRIMARY KEY ([MaHoaDon])
);"
2023-12-04T04:38:54.1302659+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [KhachHang] (
    [MaKhachHang] nvarchar(450) NOT NULL,
    [TenKhachHang] nvarchar(max) NOT NULL,
    [SoDienThoai] nvarchar(max) NOT NULL,
    [NgaySinh] nvarchar(max) NOT NULL,
    [CCCD] nvarchar(max) NOT NULL,
    [Gmail] nvarchar(max) NOT NULL,
    [MatKhau] nvarchar(max) NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_KhachHang] PRIMARY KEY ([MaKhachHang])
);"
2023-12-04T04:38:54.1317496+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [LoaiDichVu] (
    [MaLoaiDichVu] nvarchar(450) NOT NULL,
    [TenLoaiDichVu] nvarchar(max) NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_LoaiDichVu] PRIMARY KEY ([MaLoaiDichVu])
);"
2023-12-04T04:38:54.1333412+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [LoaiMonAn] (
    [MaLoaiMonAn] nvarchar(450) NOT NULL,
    [TenLoaiMon] nvarchar(max) NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_LoaiMonAn] PRIMARY KEY ([MaLoaiMonAn])
);"
2023-12-04T04:38:54.1345250+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [LoaiNuoc] (
    [MaLoaiNuoc] nvarchar(450) NOT NULL,
    [TenLoaiNuoc] nvarchar(max) NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_LoaiNuoc] PRIMARY KEY ([MaLoaiNuoc])
);"
2023-12-04T04:38:54.1395516+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [Menu] (
    [MaMenu] nvarchar(450) NOT NULL,
    [TenMenu] nvarchar(max) NOT NULL,
    [DonGiaMenu] float NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_Menu] PRIMARY KEY ([MaMenu])
);"
2023-12-04T04:38:54.1410853+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [NguoiDung] (
    [userName] nvarchar(450) NOT NULL,
    [password] nvarchar(max) NOT NULL,
    [quyen] nvarchar(max) NOT NULL,
    [hoTen] nvarchar(max) NOT NULL,
    [sdt] nvarchar(max) NOT NULL,
    [email] nvarchar(max) NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_NguoiDung] PRIMARY KEY ([userName])
);"
2023-12-04T04:38:54.1422241+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [NhanVien] (
    [MaNhanVien] nvarchar(450) NOT NULL,
    [TenNhanVien] nvarchar(max) NOT NULL,
    [SoDienThoai] nvarchar(max) NOT NULL,
    [NgaySinh] nvarchar(max) NOT NULL,
    [CCCD] nvarchar(max) NOT NULL,
    [Gmail] nvarchar(max) NOT NULL,
    [NgayVaoLam] nvarchar(max) NOT NULL,
    [NgayNghiViec] nvarchar(max) NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_NhanVien] PRIMARY KEY ([MaNhanVien])
);"
2023-12-04T04:38:54.1435341+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [Sanh] (
    [MaSanh] nvarchar(450) NOT NULL,
    [TenSanh] nvarchar(max) NOT NULL,
    [HinhAnh] nvarchar(max) NOT NULL,
    [SucChuaToiThieu] int NOT NULL,
    [SucChuaToiDa] int NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_Sanh] PRIMARY KEY ([MaSanh])
);"
2023-12-04T04:38:54.1454413+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [Token] (
    [IDToken] nvarchar(450) NOT NULL,
    [AccessToken] nvarchar(max) NOT NULL,
    [RefreshToken] nvarchar(max) NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_Token] PRIMARY KEY ([IDToken])
);"
2023-12-04T04:38:54.1840151+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("38"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [PhuThu] (
    [MaPhuThu] nvarchar(450) NOT NULL,
    [LoaiPhuThu] nvarchar(max) NOT NULL,
    [MoTaPhuThu] nvarchar(max) NOT NULL,
    [TongTien] float NOT NULL,
    [MaHoaDon] nvarchar(450) NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_PhuThu] PRIMARY KEY ([MaPhuThu]),
    CONSTRAINT [FK_PhuThu_HoaDon_MaHoaDon] FOREIGN KEY ([MaHoaDon]) REFERENCES [HoaDon] ([MaHoaDon]) ON DELETE CASCADE
);"
2023-12-04T04:38:54.2304956+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("46"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [DanhGia] (
    [MaDanhGia] nvarchar(450) NOT NULL,
    [NoiDungDanhGia] nvarchar(max) NOT NULL,
    [MaKhachHang] nvarchar(450) NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_DanhGia] PRIMARY KEY ([MaDanhGia]),
    CONSTRAINT [FK_DanhGia_KhachHang_MaKhachHang] FOREIGN KEY ([MaKhachHang]) REFERENCES [KhachHang] ([MaKhachHang]) ON DELETE CASCADE
);"
2023-12-04T04:38:54.3394016+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("109"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [DatTiec] (
    [MaTiec] nvarchar(450) NOT NULL,
    [LoaiHinhTiec] nvarchar(max) NOT NULL,
    [NgayDatTiec] datetime2 NOT NULL,
    [NgayToChuc] nvarchar(max) NOT NULL,
    [ThoiGianToChuc] nvarchar(max) NOT NULL,
    [SoLuongBanChinhThuc] int NOT NULL,
    [SoLuongBanTang] int NOT NULL,
    [SoLuongBanChay] int NOT NULL,
    [SoLuongBanDuPhong] int NOT NULL,
    [TongBanSetup] int NOT NULL,
    [LoaiBan] nvarchar(max) NOT NULL,
    [PhiDichVu] float NOT NULL,
    [TongTienDuKien] float NULL,
    [TongTienGiam] float NULL,
    [TongTienPhaiTra] float NULL,
    [TienCocLan1] float NULL,
    [TienCocLan2] float NULL,
    [GhiChu] nvarchar(max) NULL,
    [MaKhachHang] nvarchar(450) NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_DatTiec] PRIMARY KEY ([MaTiec]),
    CONSTRAINT [FK_DatTiec_HoaDon_MaTiec] FOREIGN KEY ([MaTiec]) REFERENCES [HoaDon] ([MaHoaDon]) ON DELETE CASCADE,
    CONSTRAINT [FK_DatTiec_KhachHang_MaKhachHang] FOREIGN KEY ([MaKhachHang]) REFERENCES [KhachHang] ([MaKhachHang]) ON DELETE CASCADE
);"
2023-12-04T04:38:56.8385234+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [DichVu] (
    [MaDichVu] nvarchar(450) NOT NULL,
    [TenDichVu] nvarchar(max) NOT NULL,
    [HinhAnh] nvarchar(max) NOT NULL,
    [MaLoaiDichVu] nvarchar(450) NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_DichVu] PRIMARY KEY ([MaDichVu]),
    CONSTRAINT [FK_DichVu_LoaiDichVu_MaLoaiDichVu] FOREIGN KEY ([MaLoaiDichVu]) REFERENCES [LoaiDichVu] ([MaLoaiDichVu]) ON DELETE CASCADE
);"
2023-12-04T04:38:56.8404646+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [MonAn] (
    [MaMonAn] nvarchar(450) NOT NULL,
    [TenMonAn] nvarchar(max) NOT NULL,
    [DonGia] float NOT NULL,
    [HinhAnh] nvarchar(max) NOT NULL,
    [DVT] nvarchar(max) NOT NULL,
    [MaLoaiMonAn] nvarchar(450) NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_MonAn] PRIMARY KEY ([MaMonAn]),
    CONSTRAINT [FK_MonAn_LoaiMonAn_MaLoaiMonAn] FOREIGN KEY ([MaLoaiMonAn]) REFERENCES [LoaiMonAn] ([MaLoaiMonAn]) ON DELETE CASCADE
);"
2023-12-04T04:38:56.8975094+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("57"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [Nuoc] (
    [MaNuoc] nvarchar(450) NOT NULL,
    [TenNuoc] nvarchar(max) NOT NULL,
    [DVT] nvarchar(max) NOT NULL,
    [HinhAnh] nvarchar(max) NOT NULL,
    [DonGia] float NOT NULL,
    [MaLoaiNuoc] nvarchar(450) NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_Nuoc] PRIMARY KEY ([MaNuoc]),
    CONSTRAINT [FK_Nuoc_LoaiNuoc_MaLoaiNuoc] FOREIGN KEY ([MaLoaiNuoc]) REFERENCES [LoaiNuoc] ([MaLoaiNuoc]) ON DELETE CASCADE
);"
2023-12-04T04:38:56.9450408+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("47"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [AccessToken] (
    [Token] nvarchar(max) NOT NULL,
    [StrTokenIDToken] nvarchar(450) NULL,
    [userName] nvarchar(450) NOT NULL,
    [IsUsed] bit NOT NULL,
    [IsRevoked] bit NOT NULL,
    [ExpireAt] datetime2 NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [FK_AccessToken_NguoiDung_userName] FOREIGN KEY ([userName]) REFERENCES [NguoiDung] ([userName]) ON DELETE CASCADE,
    CONSTRAINT [FK_AccessToken_Token_StrTokenIDToken] FOREIGN KEY ([StrTokenIDToken]) REFERENCES [Token] ([IDToken])
);"
2023-12-04T04:38:57.2093342+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("264"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [RefreshToken] (
    [Token] nvarchar(450) NOT NULL,
    [userName] nvarchar(450) NOT NULL,
    [StrTokenIDToken] nvarchar(450) NULL,
    [JwtID] nvarchar(max) NOT NULL,
    [IsUsed] bit NOT NULL,
    [IsRevoked] bit NOT NULL,
    [ExpireAt] datetime2 NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_RefreshToken] PRIMARY KEY ([Token], [userName]),
    CONSTRAINT [FK_RefreshToken_NguoiDung_userName] FOREIGN KEY ([userName]) REFERENCES [NguoiDung] ([userName]) ON DELETE CASCADE,
    CONSTRAINT [FK_RefreshToken_Token_StrTokenIDToken] FOREIGN KEY ([StrTokenIDToken]) REFERENCES [Token] ([IDToken])
);"
2023-12-04T04:38:57.2117830+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [ChiTietMenu] (
    [MaTiec] nvarchar(450) NOT NULL,
    [MaMenu] nvarchar(450) NOT NULL,
    [SoLuongMenuCuaTiec] int NOT NULL,
    [TongTien] float NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_ChiTietMenu] PRIMARY KEY ([MaTiec], [MaMenu]),
    CONSTRAINT [FK_ChiTietMenu_DatTiec_MaTiec] FOREIGN KEY ([MaTiec]) REFERENCES [DatTiec] ([MaTiec]) ON DELETE CASCADE,
    CONSTRAINT [FK_ChiTietMenu_Menu_MaMenu] FOREIGN KEY ([MaMenu]) REFERENCES [Menu] ([MaMenu]) ON DELETE CASCADE
);"
2023-12-04T04:38:57.4108326+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("199"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [LichSanhTiec] (
    [MaTiec] nvarchar(450) NOT NULL,
    [MaSanh] nvarchar(450) NOT NULL,
    [NgayDienRa] datetime2 NOT NULL,
    [Ca] nvarchar(max) NOT NULL,
    [TienPhuThu] float NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_LichSanhTiec] PRIMARY KEY ([MaTiec], [MaSanh]),
    CONSTRAINT [FK_LichSanhTiec_DatTiec_MaTiec] FOREIGN KEY ([MaTiec]) REFERENCES [DatTiec] ([MaTiec]) ON DELETE CASCADE,
    CONSTRAINT [FK_LichSanhTiec_Sanh_MaSanh] FOREIGN KEY ([MaSanh]) REFERENCES [Sanh] ([MaSanh]) ON DELETE CASCADE
);"
2023-12-04T04:39:00.8203381+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("235"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [NhanVienTrongTiec] (
    [MaTiec] nvarchar(450) NOT NULL,
    [MaNhanVien] nvarchar(450) NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_NhanVienTrongTiec] PRIMARY KEY ([MaTiec], [MaNhanVien]),
    CONSTRAINT [FK_NhanVienTrongTiec_DatTiec_MaTiec] FOREIGN KEY ([MaTiec]) REFERENCES [DatTiec] ([MaTiec]) ON DELETE CASCADE,
    CONSTRAINT [FK_NhanVienTrongTiec_NhanVien_MaNhanVien] FOREIGN KEY ([MaNhanVien]) REFERENCES [NhanVien] ([MaNhanVien]) ON DELETE CASCADE
);"
2023-12-04T04:39:00.8817505+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("61"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [DichVuTinhPhi] (
    [MaDichVuTinhPhi] nvarchar(450) NOT NULL,
    [TenDichVu] nvarchar(max) NOT NULL,
    [MoTa] nvarchar(max) NOT NULL,
    [HinhAnh] nvarchar(max) NOT NULL,
    [DonGiaDichVu] float NOT NULL,
    [MaDichVu] nvarchar(450) NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_DichVuTinhPhi] PRIMARY KEY ([MaDichVuTinhPhi]),
    CONSTRAINT [FK_DichVuTinhPhi_DichVu_MaDichVu] FOREIGN KEY ([MaDichVu]) REFERENCES [DichVu] ([MaDichVu]) ON DELETE CASCADE
);"
2023-12-04T04:39:00.9294892+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("47"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [DichVuUuDai] (
    [MaDichVuUuDai] nvarchar(450) NOT NULL,
    [TenDichVu] nvarchar(max) NOT NULL,
    [DieuKienApDung] nvarchar(max) NOT NULL,
    [MoTa] nvarchar(max) NOT NULL,
    [HinhAnh] nvarchar(max) NOT NULL,
    [MaDichVu] nvarchar(450) NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_DichVuUuDai] PRIMARY KEY ([MaDichVuUuDai]),
    CONSTRAINT [FK_DichVuUuDai_DichVu_MaDichVu] FOREIGN KEY ([MaDichVu]) REFERENCES [DichVu] ([MaDichVu]) ON DELETE CASCADE
);"
2023-12-04T04:39:00.9328269+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [ChiTietPhuThuMonAn] (
    [MaPhuThu] nvarchar(450) NOT NULL,
    [MaMonAn] nvarchar(450) NOT NULL,
    [SoLuong] int NOT NULL,
    [DonGia] float NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_ChiTietPhuThuMonAn] PRIMARY KEY ([MaPhuThu], [MaMonAn]),
    CONSTRAINT [FK_ChiTietPhuThuMonAn_MonAn_MaMonAn] FOREIGN KEY ([MaMonAn]) REFERENCES [MonAn] ([MaMonAn]) ON DELETE CASCADE,
    CONSTRAINT [FK_ChiTietPhuThuMonAn_PhuThu_MaPhuThu] FOREIGN KEY ([MaPhuThu]) REFERENCES [PhuThu] ([MaPhuThu]) ON DELETE CASCADE
);"
2023-12-04T04:39:01.0241989+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("91"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [MonAnTrongMenu] (
    [MaMenu] nvarchar(450) NOT NULL,
    [MaMonAn] nvarchar(450) NOT NULL,
    [SoLuongMon] int NOT NULL,
    [DonGia] float NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_MonAnTrongMenu] PRIMARY KEY ([MaMenu], [MaMonAn]),
    CONSTRAINT [FK_MonAnTrongMenu_Menu_MaMenu] FOREIGN KEY ([MaMenu]) REFERENCES [Menu] ([MaMenu]) ON DELETE CASCADE,
    CONSTRAINT [FK_MonAnTrongMenu_MonAn_MaMonAn] FOREIGN KEY ([MaMonAn]) REFERENCES [MonAn] ([MaMonAn]) ON DELETE CASCADE
);"
2023-12-04T04:39:01.0334890+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("9"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [ChiTietNuocUong] (
    [MaTiec] nvarchar(450) NOT NULL,
    [MaNuoc] nvarchar(450) NOT NULL,
    [SoLuong] int NOT NULL,
    [TongTien] float NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_ChiTietNuocUong] PRIMARY KEY ([MaTiec], [MaNuoc]),
    CONSTRAINT [FK_ChiTietNuocUong_DatTiec_MaTiec] FOREIGN KEY ([MaTiec]) REFERENCES [DatTiec] ([MaTiec]) ON DELETE CASCADE,
    CONSTRAINT [FK_ChiTietNuocUong_Nuoc_MaNuoc] FOREIGN KEY ([MaNuoc]) REFERENCES [Nuoc] ([MaNuoc]) ON DELETE CASCADE
);"
2023-12-04T04:39:03.0840015+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("31"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [ChiTietPhuThuNuoc] (
    [MaPhuThu] nvarchar(450) NOT NULL,
    [MaNuoc] nvarchar(450) NOT NULL,
    [SoLuong] int NOT NULL,
    [DonGia] float NOT NULL,
    [ThanhTien] float NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_ChiTietPhuThuNuoc] PRIMARY KEY ([MaPhuThu], [MaNuoc]),
    CONSTRAINT [FK_ChiTietPhuThuNuoc_Nuoc_MaNuoc] FOREIGN KEY ([MaNuoc]) REFERENCES [Nuoc] ([MaNuoc]) ON DELETE CASCADE,
    CONSTRAINT [FK_ChiTietPhuThuNuoc_PhuThu_MaPhuThu] FOREIGN KEY ([MaPhuThu]) REFERENCES [PhuThu] ([MaPhuThu]) ON DELETE CASCADE
);"
2023-12-04T04:39:03.1127177+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("28"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [ChiTietDichVuTinhPhi] (
    [MaTiec] nvarchar(450) NOT NULL,
    [MaDichVuTinhPhi] nvarchar(450) NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_ChiTietDichVuTinhPhi] PRIMARY KEY ([MaTiec], [MaDichVuTinhPhi]),
    CONSTRAINT [FK_ChiTietDichVuTinhPhi_DatTiec_MaTiec] FOREIGN KEY ([MaTiec]) REFERENCES [DatTiec] ([MaTiec]) ON DELETE CASCADE,
    CONSTRAINT [FK_ChiTietDichVuTinhPhi_DichVuTinhPhi_MaDichVuTinhPhi] FOREIGN KEY ([MaDichVuTinhPhi]) REFERENCES [DichVuTinhPhi] ([MaDichVuTinhPhi]) ON DELETE CASCADE
);"
2023-12-04T04:39:03.1151861+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [ChiTietPhuThuDichVu] (
    [MaPhuThu] nvarchar(450) NOT NULL,
    [MaDichVuTinhPhi] nvarchar(450) NOT NULL,
    [SoLuong] int NOT NULL,
    [DonGia] float NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_ChiTietPhuThuDichVu] PRIMARY KEY ([MaPhuThu], [MaDichVuTinhPhi]),
    CONSTRAINT [FK_ChiTietPhuThuDichVu_DichVuTinhPhi_MaDichVuTinhPhi] FOREIGN KEY ([MaDichVuTinhPhi]) REFERENCES [DichVuTinhPhi] ([MaDichVuTinhPhi]) ON DELETE CASCADE,
    CONSTRAINT [FK_ChiTietPhuThuDichVu_PhuThu_MaPhuThu] FOREIGN KEY ([MaPhuThu]) REFERENCES [PhuThu] ([MaPhuThu]) ON DELETE CASCADE
);"
2023-12-04T04:39:03.1436812+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("28"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [ChiTietDichVuUuDai] (
    [MaTiec] nvarchar(450) NOT NULL,
    [MaDichVuUuDai] nvarchar(450) NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_ChiTietDichVuUuDai] PRIMARY KEY ([MaTiec], [MaDichVuUuDai]),
    CONSTRAINT [FK_ChiTietDichVuUuDai_DatTiec_MaTiec] FOREIGN KEY ([MaTiec]) REFERENCES [DatTiec] ([MaTiec]) ON DELETE CASCADE,
    CONSTRAINT [FK_ChiTietDichVuUuDai_DichVuUuDai_MaDichVuUuDai] FOREIGN KEY ([MaDichVuUuDai]) REFERENCES [DichVuUuDai] ([MaDichVuUuDai]) ON DELETE CASCADE
);"
2023-12-04T04:39:03.1901422+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("46"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE INDEX [IX_AccessToken_StrTokenIDToken] ON [AccessToken] ([StrTokenIDToken]);"
2023-12-04T04:39:03.1914806+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE INDEX [IX_AccessToken_userName] ON [AccessToken] ([userName]);"
2023-12-04T04:39:03.1925979+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE INDEX [IX_ChiTietDichVuTinhPhi_MaDichVuTinhPhi] ON [ChiTietDichVuTinhPhi] ([MaDichVuTinhPhi]);"
2023-12-04T04:39:03.2053472+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("13"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE INDEX [IX_ChiTietDichVuUuDai_MaDichVuUuDai] ON [ChiTietDichVuUuDai] ([MaDichVuUuDai]);"
2023-12-04T04:39:03.2065342+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE INDEX [IX_ChiTietMenu_MaMenu] ON [ChiTietMenu] ([MaMenu]);"
2023-12-04T04:39:03.2076096+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE INDEX [IX_ChiTietNuocUong_MaNuoc] ON [ChiTietNuocUong] ([MaNuoc]);"
2023-12-04T04:39:03.2086107+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE INDEX [IX_ChiTietPhuThuDichVu_MaDichVuTinhPhi] ON [ChiTietPhuThuDichVu] ([MaDichVuTinhPhi]);"
2023-12-04T04:39:03.2099529+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE INDEX [IX_ChiTietPhuThuMonAn_MaMonAn] ON [ChiTietPhuThuMonAn] ([MaMonAn]);"
2023-12-04T04:39:05.2695812+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE INDEX [IX_ChiTietPhuThuNuoc_MaNuoc] ON [ChiTietPhuThuNuoc] ([MaNuoc]);"
2023-12-04T04:39:06.2650742+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("995"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE INDEX [IX_DanhGia_MaKhachHang] ON [DanhGia] ([MaKhachHang]);"
2023-12-04T04:39:06.2662028+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE INDEX [IX_DatTiec_MaKhachHang] ON [DatTiec] ([MaKhachHang]);"
2023-12-04T04:39:06.2673694+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE INDEX [IX_DichVu_MaLoaiDichVu] ON [DichVu] ([MaLoaiDichVu]);"
2023-12-04T04:39:06.2685463+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE INDEX [IX_DichVuTinhPhi_MaDichVu] ON [DichVuTinhPhi] ([MaDichVu]);"
2023-12-04T04:39:06.2696350+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE INDEX [IX_DichVuUuDai_MaDichVu] ON [DichVuUuDai] ([MaDichVu]);"
2023-12-04T04:39:06.2707375+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE INDEX [IX_LichSanhTiec_MaSanh] ON [LichSanhTiec] ([MaSanh]);"
2023-12-04T04:39:06.2793040+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("8"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE INDEX [IX_MonAn_MaLoaiMonAn] ON [MonAn] ([MaLoaiMonAn]);"
2023-12-04T04:39:06.2946711+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("15"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE INDEX [IX_MonAnTrongMenu_MaMonAn] ON [MonAnTrongMenu] ([MaMonAn]);"
2023-12-04T04:39:06.2957746+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE INDEX [IX_NhanVienTrongTiec_MaNhanVien] ON [NhanVienTrongTiec] ([MaNhanVien]);"
2023-12-04T04:39:06.3096074+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("14"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE INDEX [IX_Nuoc_MaLoaiNuoc] ON [Nuoc] ([MaLoaiNuoc]);"
2023-12-04T04:39:06.3105204+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE INDEX [IX_PhuThu_MaHoaDon] ON [PhuThu] ([MaHoaDon]);"
2023-12-04T04:39:06.3114368+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE INDEX [IX_RefreshToken_StrTokenIDToken] ON [RefreshToken] ([StrTokenIDToken]);"
2023-12-04T04:39:06.3247406+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("13"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE INDEX [IX_RefreshToken_userName] ON [RefreshToken] ([userName]);"
2023-12-04T04:39:06.3716443+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("47"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20231203213822_UpdateKDL', N'7.0.9');"
2023-12-04T04:49:01.2125343+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("70"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT 1"
2023-12-04T04:49:01.3781547+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("69"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');"
2023-12-04T04:49:01.3862493+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT 1"
2023-12-04T04:49:01.3917393+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');"
2023-12-04T04:49:01.4514197+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("19"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];"
2023-12-04T04:49:01.4888285+07:00 [INF] (Microsoft.EntityFrameworkCore.Migrations) No migrations were applied. The database is already up to date.
2023-12-04T04:49:01.9570469+07:00 [INF] (Microsoft.Hosting.Lifetime) Now listening on: "https://localhost:7267"
2023-12-04T04:49:01.9582042+07:00 [INF] (Microsoft.Hosting.Lifetime) Now listening on: "http://localhost:5140"
2023-12-04T04:49:01.9620697+07:00 [INF] (Microsoft.Hosting.Lifetime) Application started. Press Ctrl+C to shut down.
2023-12-04T04:49:01.9635987+07:00 [INF] (Microsoft.Hosting.Lifetime) Hosting environment: "Development"
2023-12-04T04:49:01.9646384+07:00 [INF] (Microsoft.Hosting.Lifetime) Content root path: "D:\NhaHangTiecCuoi\WeddingRestaurant\WeddingRestaurant.WebApi\"
2023-12-04T04:50:03.3831994+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("88"ms) [Parameters=["@__model_MaTiec_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='1200']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [DatTiec] AS [d]
        WHERE [d].[MaTiec] = @__model_MaTiec_0 AND ([d].[TrangThai] IS NULL)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END"
2023-12-04T04:50:04.1439464+07:00 [ERR] (Microsoft.EntityFrameworkCore.Database.Command) Failed executing DbCommand ("215"ms) [Parameters=["@p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 450), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (DbType = Double), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32), @p12='?' (Size = 4000), @p13='?' (DbType = Double), @p14='?' (DbType = Double), @p15='?' (DbType = Int32), @p16='?' (DbType = Double), @p17='?' (DbType = Double), @p18='?' (DbType = Double), @p19='?' (Size = 4000)"], CommandType='Text', CommandTimeout='1200']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [DatTiec] ([MaTiec], [GhiChu], [LoaiBan], [LoaiHinhTiec], [MaKhachHang], [NgayDatTiec], [NgayToChuc], [PhiDichVu], [SoLuongBanChay], [SoLuongBanChinhThuc], [SoLuongBanDuPhong], [SoLuongBanTang], [ThoiGianToChuc], [TienCocLan1], [TienCocLan2], [TongBanSetup], [TongTienDuKien], [TongTienGiam], [TongTienPhaiTra], [TrangThai])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19);"
2023-12-04T04:50:04.2509851+07:00 [ERR] (Microsoft.EntityFrameworkCore.Update) An exception occurred in the database while saving changes for context type '"WeddingRestaurant.Repository.Infrastructure.AppDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint \"FK_DatTiec_HoaDon_MaTiec\". The conflict occurred in database \"DB_WeddingRestaurant\", table \"dbo.HoaDon\", column 'MaHoaDon'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:3cbac33c-4bef-4a87-a78a-3098903323ab
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_DatTiec_HoaDon_MaTiec". The conflict occurred in database "DB_WeddingRestaurant", table "dbo.HoaDon", column 'MaHoaDon'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:3cbac33c-4bef-4a87-a78a-3098903323ab
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-12-04T04:50:04.5297848+07:00 [INF] (Serilog.AspNetCore.RequestLoggingMiddleware) HTTP "POST" "/api/dat-tiec/add" responded 400 in 2712.1027 ms
2023-12-04T04:50:46.9076725+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("10"ms) [Parameters=["@__model_MaTiec_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='1200']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [DatTiec] AS [d]
        WHERE [d].[MaTiec] = @__model_MaTiec_0 AND ([d].[TrangThai] IS NULL)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END"
2023-12-04T04:50:46.9238338+07:00 [ERR] (Microsoft.EntityFrameworkCore.Database.Command) Failed executing DbCommand ("13"ms) [Parameters=["@p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 450), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (DbType = Double), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32), @p12='?' (Size = 4000), @p13='?' (DbType = Double), @p14='?' (DbType = Double), @p15='?' (DbType = Int32), @p16='?' (DbType = Double), @p17='?' (DbType = Double), @p18='?' (DbType = Double), @p19='?' (Size = 4000)"], CommandType='Text', CommandTimeout='1200']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [DatTiec] ([MaTiec], [GhiChu], [LoaiBan], [LoaiHinhTiec], [MaKhachHang], [NgayDatTiec], [NgayToChuc], [PhiDichVu], [SoLuongBanChay], [SoLuongBanChinhThuc], [SoLuongBanDuPhong], [SoLuongBanTang], [ThoiGianToChuc], [TienCocLan1], [TienCocLan2], [TongBanSetup], [TongTienDuKien], [TongTienGiam], [TongTienPhaiTra], [TrangThai])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19);"
2023-12-04T04:50:46.9279819+07:00 [ERR] (Microsoft.EntityFrameworkCore.Update) An exception occurred in the database while saving changes for context type '"WeddingRestaurant.Repository.Infrastructure.AppDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint \"FK_DatTiec_HoaDon_MaTiec\". The conflict occurred in database \"DB_WeddingRestaurant\", table \"dbo.HoaDon\", column 'MaHoaDon'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:3cbac33c-4bef-4a87-a78a-3098903323ab
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_DatTiec_HoaDon_MaTiec". The conflict occurred in database "DB_WeddingRestaurant", table "dbo.HoaDon", column 'MaHoaDon'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:3cbac33c-4bef-4a87-a78a-3098903323ab
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-12-04T04:50:47.0053226+07:00 [INF] (Serilog.AspNetCore.RequestLoggingMiddleware) HTTP "POST" "/api/dat-tiec/add" responded 400 in 238.6990 ms
2023-12-04T04:50:58.6279770+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("2"ms) [Parameters=["@__model_MaTiec_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='1200']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [DatTiec] AS [d]
        WHERE [d].[MaTiec] = @__model_MaTiec_0 AND ([d].[TrangThai] IS NULL)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END"
2023-12-04T04:50:58.6510153+07:00 [ERR] (Microsoft.EntityFrameworkCore.Database.Command) Failed executing DbCommand ("8"ms) [Parameters=["@p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 450), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (DbType = Double), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32), @p12='?' (Size = 4000), @p13='?' (DbType = Double), @p14='?' (DbType = Double), @p15='?' (DbType = Int32), @p16='?' (DbType = Double), @p17='?' (DbType = Double), @p18='?' (DbType = Double), @p19='?' (Size = 4000)"], CommandType='Text', CommandTimeout='1200']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [DatTiec] ([MaTiec], [GhiChu], [LoaiBan], [LoaiHinhTiec], [MaKhachHang], [NgayDatTiec], [NgayToChuc], [PhiDichVu], [SoLuongBanChay], [SoLuongBanChinhThuc], [SoLuongBanDuPhong], [SoLuongBanTang], [ThoiGianToChuc], [TienCocLan1], [TienCocLan2], [TongBanSetup], [TongTienDuKien], [TongTienGiam], [TongTienPhaiTra], [TrangThai])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19);"
2023-12-04T04:50:58.6548691+07:00 [ERR] (Microsoft.EntityFrameworkCore.Update) An exception occurred in the database while saving changes for context type '"WeddingRestaurant.Repository.Infrastructure.AppDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint \"FK_DatTiec_HoaDon_MaTiec\". The conflict occurred in database \"DB_WeddingRestaurant\", table \"dbo.HoaDon\", column 'MaHoaDon'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:3cbac33c-4bef-4a87-a78a-3098903323ab
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_DatTiec_HoaDon_MaTiec". The conflict occurred in database "DB_WeddingRestaurant", table "dbo.HoaDon", column 'MaHoaDon'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:3cbac33c-4bef-4a87-a78a-3098903323ab
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-12-04T04:50:58.7248705+07:00 [INF] (Serilog.AspNetCore.RequestLoggingMiddleware) HTTP "POST" "/api/dat-tiec/add" responded 400 in 102.0277 ms
2023-12-04T04:51:07.3255238+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("2"ms) [Parameters=["@__model_MaTiec_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='1200']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [DatTiec] AS [d]
        WHERE [d].[MaTiec] = @__model_MaTiec_0 AND ([d].[TrangThai] IS NULL)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END"
2023-12-04T04:51:07.3327288+07:00 [ERR] (Microsoft.EntityFrameworkCore.Database.Command) Failed executing DbCommand ("4"ms) [Parameters=["@p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 450), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (DbType = Double), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32), @p12='?' (Size = 4000), @p13='?' (DbType = Double), @p14='?' (DbType = Double), @p15='?' (DbType = Int32), @p16='?' (DbType = Double), @p17='?' (DbType = Double), @p18='?' (DbType = Double), @p19='?' (Size = 4000)"], CommandType='Text', CommandTimeout='1200']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [DatTiec] ([MaTiec], [GhiChu], [LoaiBan], [LoaiHinhTiec], [MaKhachHang], [NgayDatTiec], [NgayToChuc], [PhiDichVu], [SoLuongBanChay], [SoLuongBanChinhThuc], [SoLuongBanDuPhong], [SoLuongBanTang], [ThoiGianToChuc], [TienCocLan1], [TienCocLan2], [TongBanSetup], [TongTienDuKien], [TongTienGiam], [TongTienPhaiTra], [TrangThai])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19);"
2023-12-04T04:51:07.3372712+07:00 [ERR] (Microsoft.EntityFrameworkCore.Update) An exception occurred in the database while saving changes for context type '"WeddingRestaurant.Repository.Infrastructure.AppDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint \"FK_DatTiec_HoaDon_MaTiec\". The conflict occurred in database \"DB_WeddingRestaurant\", table \"dbo.HoaDon\", column 'MaHoaDon'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:3cbac33c-4bef-4a87-a78a-3098903323ab
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_DatTiec_HoaDon_MaTiec". The conflict occurred in database "DB_WeddingRestaurant", table "dbo.HoaDon", column 'MaHoaDon'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:3cbac33c-4bef-4a87-a78a-3098903323ab
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-12-04T04:51:07.3994128+07:00 [INF] (Serilog.AspNetCore.RequestLoggingMiddleware) HTTP "POST" "/api/dat-tiec/add" responded 400 in 77.5048 ms
2023-12-04T04:51:24.5641355+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("2"ms) [Parameters=["@__model_MaTiec_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='1200']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [DatTiec] AS [d]
        WHERE [d].[MaTiec] = @__model_MaTiec_0 AND ([d].[TrangThai] IS NULL)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END"
2023-12-04T04:51:25.0817472+07:00 [ERR] (Microsoft.EntityFrameworkCore.Database.Command) Failed executing DbCommand ("515"ms) [Parameters=["@p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 450), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (DbType = Double), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32), @p12='?' (Size = 4000), @p13='?' (DbType = Double), @p14='?' (DbType = Double), @p15='?' (DbType = Int32), @p16='?' (DbType = Double), @p17='?' (DbType = Double), @p18='?' (DbType = Double), @p19='?' (Size = 4000)"], CommandType='Text', CommandTimeout='1200']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [DatTiec] ([MaTiec], [GhiChu], [LoaiBan], [LoaiHinhTiec], [MaKhachHang], [NgayDatTiec], [NgayToChuc], [PhiDichVu], [SoLuongBanChay], [SoLuongBanChinhThuc], [SoLuongBanDuPhong], [SoLuongBanTang], [ThoiGianToChuc], [TienCocLan1], [TienCocLan2], [TongBanSetup], [TongTienDuKien], [TongTienGiam], [TongTienPhaiTra], [TrangThai])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19);"
2023-12-04T04:51:25.0882788+07:00 [ERR] (Microsoft.EntityFrameworkCore.Update) An exception occurred in the database while saving changes for context type '"WeddingRestaurant.Repository.Infrastructure.AppDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint \"FK_DatTiec_HoaDon_MaTiec\". The conflict occurred in database \"DB_WeddingRestaurant\", table \"dbo.HoaDon\", column 'MaHoaDon'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:3cbac33c-4bef-4a87-a78a-3098903323ab
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_DatTiec_HoaDon_MaTiec". The conflict occurred in database "DB_WeddingRestaurant", table "dbo.HoaDon", column 'MaHoaDon'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:3cbac33c-4bef-4a87-a78a-3098903323ab
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-12-04T04:51:25.1486890+07:00 [INF] (Serilog.AspNetCore.RequestLoggingMiddleware) HTTP "POST" "/api/dat-tiec/add" responded 400 in 587.8321 ms
2023-12-04T05:11:11.4257779+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("61"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT 1"
2023-12-04T05:11:11.5849925+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("57"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');"
2023-12-04T05:11:11.5938188+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT 1"
2023-12-04T05:11:11.5967055+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');"
2023-12-04T05:11:11.6343849+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];"
2023-12-04T05:11:11.6736290+07:00 [INF] (Microsoft.EntityFrameworkCore.Migrations) No migrations were applied. The database is already up to date.
2023-12-04T05:11:12.1600795+07:00 [INF] (Microsoft.Hosting.Lifetime) Now listening on: "https://localhost:7267"
2023-12-04T05:11:12.1612039+07:00 [INF] (Microsoft.Hosting.Lifetime) Now listening on: "http://localhost:5140"
2023-12-04T05:11:12.1653099+07:00 [INF] (Microsoft.Hosting.Lifetime) Application started. Press Ctrl+C to shut down.
2023-12-04T05:11:12.1667817+07:00 [INF] (Microsoft.Hosting.Lifetime) Hosting environment: "Development"
2023-12-04T05:11:12.1676622+07:00 [INF] (Microsoft.Hosting.Lifetime) Content root path: "D:\NhaHangTiecCuoi\WeddingRestaurant\WeddingRestaurant.WebApi\"
2023-12-04T05:11:41.7857498+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("63"ms) [Parameters=["@__model_MaLoaiDichVu_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='1200']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [LoaiDichVu] AS [l]
        WHERE [l].[MaLoaiDichVu] = @__model_MaLoaiDichVu_0 AND ([l].[TrangThai] IS NULL)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END"
2023-12-04T05:11:42.1523940+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("47"ms) [Parameters=["@p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (Size = 4000)"], CommandType='Text', CommandTimeout='1200']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [LoaiDichVu] ([MaLoaiDichVu], [TenLoaiDichVu], [TrangThai])
VALUES (@p0, @p1, @p2);"
2023-12-04T05:11:42.2024764+07:00 [INF] (Serilog.AspNetCore.RequestLoggingMiddleware) HTTP "POST" "/api/loai-dich-vu/add" responded 200 in 1609.9293 ms
2023-12-04T05:11:51.3704904+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("38"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT [l].[MaLoaiDichVu], [l].[TenLoaiDichVu], [l].[TrangThai]
FROM [LoaiDichVu] AS [l]
WHERE [l].[TrangThai] IS NULL"
2023-12-04T05:11:51.3847890+07:00 [INF] (Serilog.AspNetCore.RequestLoggingMiddleware) HTTP "GET" "/api/loai-dich-vu/get-all" responded 200 in 181.3803 ms
2023-12-04T05:18:38.8945724+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("105"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT 1"
2023-12-04T05:18:39.1405334+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("83"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');"
2023-12-04T05:18:39.1537012+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT 1"
2023-12-04T05:18:39.1687297+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');"
2023-12-04T05:18:39.3630985+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("147"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];"
2023-12-04T05:18:39.4177351+07:00 [INF] (Microsoft.EntityFrameworkCore.Migrations) No migrations were applied. The database is already up to date.
2023-12-04T05:18:40.0337308+07:00 [INF] (Microsoft.Hosting.Lifetime) Now listening on: "https://localhost:7267"
2023-12-04T05:18:40.0352715+07:00 [INF] (Microsoft.Hosting.Lifetime) Now listening on: "http://localhost:5140"
2023-12-04T05:18:40.0404610+07:00 [INF] (Microsoft.Hosting.Lifetime) Application started. Press Ctrl+C to shut down.
2023-12-04T05:18:40.0418528+07:00 [INF] (Microsoft.Hosting.Lifetime) Hosting environment: "Development"
2023-12-04T05:18:40.0433713+07:00 [INF] (Microsoft.Hosting.Lifetime) Content root path: "D:\NhaHangTiecCuoi\WeddingRestaurant\WeddingRestaurant.WebApi\"
2023-12-04T05:19:49.1405278+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("83"ms) [Parameters=["@__model_MaTiec_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='1200']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [DatTiec] AS [d]
        WHERE [d].[MaTiec] = @__model_MaTiec_0 AND ([d].[TrangThai] IS NULL)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END"
2023-12-04T05:19:49.6704619+07:00 [ERR] (Microsoft.EntityFrameworkCore.Database.Command) Failed executing DbCommand ("18"ms) [Parameters=["@p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 450), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (DbType = Double), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32), @p12='?' (Size = 4000), @p13='?' (DbType = Double), @p14='?' (DbType = Double), @p15='?' (DbType = Int32), @p16='?' (DbType = Double), @p17='?' (DbType = Double), @p18='?' (DbType = Double), @p19='?' (Size = 4000)"], CommandType='Text', CommandTimeout='1200']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [DatTiec] ([MaTiec], [GhiChu], [LoaiBan], [LoaiHinhTiec], [MaKhachHang], [NgayDatTiec], [NgayToChuc], [PhiDichVu], [SoLuongBanChay], [SoLuongBanChinhThuc], [SoLuongBanDuPhong], [SoLuongBanTang], [ThoiGianToChuc], [TienCocLan1], [TienCocLan2], [TongBanSetup], [TongTienDuKien], [TongTienGiam], [TongTienPhaiTra], [TrangThai])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19);"
2023-12-04T05:19:49.7631359+07:00 [ERR] (Microsoft.EntityFrameworkCore.Update) An exception occurred in the database while saving changes for context type '"WeddingRestaurant.Repository.Infrastructure.AppDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint \"FK_DatTiec_HoaDon_MaTiec\". The conflict occurred in database \"DB_WeddingRestaurant\", table \"dbo.HoaDon\", column 'MaHoaDon'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:da8eec37-faad-45ad-9f67-38d9cf8d9686
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_DatTiec_HoaDon_MaTiec". The conflict occurred in database "DB_WeddingRestaurant", table "dbo.HoaDon", column 'MaHoaDon'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:da8eec37-faad-45ad-9f67-38d9cf8d9686
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-12-04T05:19:50.0570076+07:00 [INF] (Serilog.AspNetCore.RequestLoggingMiddleware) HTTP "POST" "/api/dat-tiec/add" responded 400 in 2570.8016 ms
2023-12-04T05:48:15.6239201+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("165"ms) [Parameters=["@__model_MaTiec_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='1200']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [DatTiec] AS [d]
        WHERE [d].[MaTiec] = @__model_MaTiec_0 AND ([d].[TrangThai] IS NULL)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END"
2023-12-04T05:48:15.9450363+07:00 [ERR] (Microsoft.EntityFrameworkCore.Database.Command) Failed executing DbCommand ("270"ms) [Parameters=["@p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 450), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (DbType = Double), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32), @p12='?' (Size = 4000), @p13='?' (DbType = Double), @p14='?' (DbType = Double), @p15='?' (DbType = Int32), @p16='?' (DbType = Double), @p17='?' (DbType = Double), @p18='?' (DbType = Double), @p19='?' (Size = 4000)"], CommandType='Text', CommandTimeout='1200']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [DatTiec] ([MaTiec], [GhiChu], [LoaiBan], [LoaiHinhTiec], [MaKhachHang], [NgayDatTiec], [NgayToChuc], [PhiDichVu], [SoLuongBanChay], [SoLuongBanChinhThuc], [SoLuongBanDuPhong], [SoLuongBanTang], [ThoiGianToChuc], [TienCocLan1], [TienCocLan2], [TongBanSetup], [TongTienDuKien], [TongTienGiam], [TongTienPhaiTra], [TrangThai])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19);"
2023-12-04T05:48:15.9606649+07:00 [ERR] (Microsoft.EntityFrameworkCore.Update) An exception occurred in the database while saving changes for context type '"WeddingRestaurant.Repository.Infrastructure.AppDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint \"FK_DatTiec_HoaDon_MaTiec\". The conflict occurred in database \"DB_WeddingRestaurant\", table \"dbo.HoaDon\", column 'MaHoaDon'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:42eed92f-4de4-4551-8ad0-78c9b9f1a459
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_DatTiec_HoaDon_MaTiec". The conflict occurred in database "DB_WeddingRestaurant", table "dbo.HoaDon", column 'MaHoaDon'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:42eed92f-4de4-4551-8ad0-78c9b9f1a459
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-12-04T05:48:16.1022675+07:00 [INF] (Serilog.AspNetCore.RequestLoggingMiddleware) HTTP "POST" "/api/dat-tiec/add" responded 400 in 1275.6542 ms
2023-12-04T05:49:42.3830787+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("2"ms) [Parameters=["@__model_MaTiec_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='1200']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [DatTiec] AS [d]
        WHERE [d].[MaTiec] = @__model_MaTiec_0 AND ([d].[TrangThai] IS NULL)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END"
2023-12-04T05:49:42.3923419+07:00 [ERR] (Microsoft.EntityFrameworkCore.Database.Command) Failed executing DbCommand ("5"ms) [Parameters=["@p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 450), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (DbType = Double), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32), @p12='?' (Size = 4000), @p13='?' (DbType = Double), @p14='?' (DbType = Double), @p15='?' (DbType = Int32), @p16='?' (DbType = Double), @p17='?' (DbType = Double), @p18='?' (DbType = Double), @p19='?' (Size = 4000)"], CommandType='Text', CommandTimeout='1200']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [DatTiec] ([MaTiec], [GhiChu], [LoaiBan], [LoaiHinhTiec], [MaKhachHang], [NgayDatTiec], [NgayToChuc], [PhiDichVu], [SoLuongBanChay], [SoLuongBanChinhThuc], [SoLuongBanDuPhong], [SoLuongBanTang], [ThoiGianToChuc], [TienCocLan1], [TienCocLan2], [TongBanSetup], [TongTienDuKien], [TongTienGiam], [TongTienPhaiTra], [TrangThai])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19);"
2023-12-04T05:49:42.3976056+07:00 [ERR] (Microsoft.EntityFrameworkCore.Update) An exception occurred in the database while saving changes for context type '"WeddingRestaurant.Repository.Infrastructure.AppDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint \"FK_DatTiec_HoaDon_MaTiec\". The conflict occurred in database \"DB_WeddingRestaurant\", table \"dbo.HoaDon\", column 'MaHoaDon'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:42eed92f-4de4-4551-8ad0-78c9b9f1a459
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_DatTiec_HoaDon_MaTiec". The conflict occurred in database "DB_WeddingRestaurant", table "dbo.HoaDon", column 'MaHoaDon'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:42eed92f-4de4-4551-8ad0-78c9b9f1a459
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-12-04T05:49:42.4592427+07:00 [INF] (Serilog.AspNetCore.RequestLoggingMiddleware) HTTP "POST" "/api/dat-tiec/add" responded 400 in 85.9536 ms
2023-12-04T05:49:53.2165840+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("2"ms) [Parameters=["@__model_MaTiec_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='1200']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [DatTiec] AS [d]
        WHERE [d].[MaTiec] = @__model_MaTiec_0 AND ([d].[TrangThai] IS NULL)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END"
2023-12-04T05:49:53.2255097+07:00 [ERR] (Microsoft.EntityFrameworkCore.Database.Command) Failed executing DbCommand ("5"ms) [Parameters=["@p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 450), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (DbType = Double), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32), @p12='?' (Size = 4000), @p13='?' (DbType = Double), @p14='?' (DbType = Double), @p15='?' (DbType = Int32), @p16='?' (DbType = Double), @p17='?' (DbType = Double), @p18='?' (DbType = Double), @p19='?' (Size = 4000)"], CommandType='Text', CommandTimeout='1200']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [DatTiec] ([MaTiec], [GhiChu], [LoaiBan], [LoaiHinhTiec], [MaKhachHang], [NgayDatTiec], [NgayToChuc], [PhiDichVu], [SoLuongBanChay], [SoLuongBanChinhThuc], [SoLuongBanDuPhong], [SoLuongBanTang], [ThoiGianToChuc], [TienCocLan1], [TienCocLan2], [TongBanSetup], [TongTienDuKien], [TongTienGiam], [TongTienPhaiTra], [TrangThai])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19);"
2023-12-04T05:49:53.2295260+07:00 [ERR] (Microsoft.EntityFrameworkCore.Update) An exception occurred in the database while saving changes for context type '"WeddingRestaurant.Repository.Infrastructure.AppDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint \"FK_DatTiec_HoaDon_MaTiec\". The conflict occurred in database \"DB_WeddingRestaurant\", table \"dbo.HoaDon\", column 'MaHoaDon'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:42eed92f-4de4-4551-8ad0-78c9b9f1a459
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_DatTiec_HoaDon_MaTiec". The conflict occurred in database "DB_WeddingRestaurant", table "dbo.HoaDon", column 'MaHoaDon'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:42eed92f-4de4-4551-8ad0-78c9b9f1a459
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-12-04T05:49:53.2905576+07:00 [INF] (Serilog.AspNetCore.RequestLoggingMiddleware) HTTP "POST" "/api/dat-tiec/add" responded 400 in 77.0362 ms
2023-12-04T05:50:25.1641343+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("2"ms) [Parameters=["@__model_MaTiec_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='1200']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [DatTiec] AS [d]
        WHERE [d].[MaTiec] = @__model_MaTiec_0 AND ([d].[TrangThai] IS NULL)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END"
2023-12-04T05:50:25.1719415+07:00 [ERR] (Microsoft.EntityFrameworkCore.Database.Command) Failed executing DbCommand ("4"ms) [Parameters=["@p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 450), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (DbType = Double), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32), @p12='?' (Size = 4000), @p13='?' (DbType = Double), @p14='?' (DbType = Double), @p15='?' (DbType = Int32), @p16='?' (DbType = Double), @p17='?' (DbType = Double), @p18='?' (DbType = Double), @p19='?' (Size = 4000)"], CommandType='Text', CommandTimeout='1200']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [DatTiec] ([MaTiec], [GhiChu], [LoaiBan], [LoaiHinhTiec], [MaKhachHang], [NgayDatTiec], [NgayToChuc], [PhiDichVu], [SoLuongBanChay], [SoLuongBanChinhThuc], [SoLuongBanDuPhong], [SoLuongBanTang], [ThoiGianToChuc], [TienCocLan1], [TienCocLan2], [TongBanSetup], [TongTienDuKien], [TongTienGiam], [TongTienPhaiTra], [TrangThai])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19);"
2023-12-04T05:50:25.1774426+07:00 [ERR] (Microsoft.EntityFrameworkCore.Update) An exception occurred in the database while saving changes for context type '"WeddingRestaurant.Repository.Infrastructure.AppDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint \"FK_DatTiec_HoaDon_MaTiec\". The conflict occurred in database \"DB_WeddingRestaurant\", table \"dbo.HoaDon\", column 'MaHoaDon'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:42eed92f-4de4-4551-8ad0-78c9b9f1a459
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_DatTiec_HoaDon_MaTiec". The conflict occurred in database "DB_WeddingRestaurant", table "dbo.HoaDon", column 'MaHoaDon'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:42eed92f-4de4-4551-8ad0-78c9b9f1a459
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-12-04T05:50:25.2452153+07:00 [INF] (Serilog.AspNetCore.RequestLoggingMiddleware) HTTP "POST" "/api/dat-tiec/add" responded 400 in 84.8646 ms
2023-12-04T05:50:45.8243815+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("13"ms) [Parameters=["@__model_MaTiec_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='1200']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [DatTiec] AS [d]
        WHERE [d].[MaTiec] = @__model_MaTiec_0 AND ([d].[TrangThai] IS NULL)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END"
2023-12-04T05:50:45.8331090+07:00 [ERR] (Microsoft.EntityFrameworkCore.Database.Command) Failed executing DbCommand ("5"ms) [Parameters=["@p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 450), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (DbType = Double), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32), @p12='?' (Size = 4000), @p13='?' (DbType = Double), @p14='?' (DbType = Double), @p15='?' (DbType = Int32), @p16='?' (DbType = Double), @p17='?' (DbType = Double), @p18='?' (DbType = Double), @p19='?' (Size = 4000)"], CommandType='Text', CommandTimeout='1200']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [DatTiec] ([MaTiec], [GhiChu], [LoaiBan], [LoaiHinhTiec], [MaKhachHang], [NgayDatTiec], [NgayToChuc], [PhiDichVu], [SoLuongBanChay], [SoLuongBanChinhThuc], [SoLuongBanDuPhong], [SoLuongBanTang], [ThoiGianToChuc], [TienCocLan1], [TienCocLan2], [TongBanSetup], [TongTienDuKien], [TongTienGiam], [TongTienPhaiTra], [TrangThai])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19);"
2023-12-04T05:50:45.8359400+07:00 [ERR] (Microsoft.EntityFrameworkCore.Update) An exception occurred in the database while saving changes for context type '"WeddingRestaurant.Repository.Infrastructure.AppDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint \"FK_DatTiec_HoaDon_MaTiec\". The conflict occurred in database \"DB_WeddingRestaurant\", table \"dbo.HoaDon\", column 'MaHoaDon'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:42eed92f-4de4-4551-8ad0-78c9b9f1a459
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_DatTiec_HoaDon_MaTiec". The conflict occurred in database "DB_WeddingRestaurant", table "dbo.HoaDon", column 'MaHoaDon'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:42eed92f-4de4-4551-8ad0-78c9b9f1a459
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-12-04T05:50:45.8897679+07:00 [INF] (Serilog.AspNetCore.RequestLoggingMiddleware) HTTP "POST" "/api/dat-tiec/add" responded 400 in 81.4216 ms
2023-12-04T05:51:02.4069883+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("2"ms) [Parameters=["@__model_MaTiec_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='1200']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [DatTiec] AS [d]
        WHERE [d].[MaTiec] = @__model_MaTiec_0 AND ([d].[TrangThai] IS NULL)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END"
2023-12-04T05:51:02.4304249+07:00 [ERR] (Microsoft.EntityFrameworkCore.Database.Command) Failed executing DbCommand ("8"ms) [Parameters=["@p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 450), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (DbType = Double), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32), @p12='?' (Size = 4000), @p13='?' (DbType = Double), @p14='?' (DbType = Double), @p15='?' (DbType = Int32), @p16='?' (DbType = Double), @p17='?' (DbType = Double), @p18='?' (DbType = Double), @p19='?' (Size = 4000)"], CommandType='Text', CommandTimeout='1200']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [DatTiec] ([MaTiec], [GhiChu], [LoaiBan], [LoaiHinhTiec], [MaKhachHang], [NgayDatTiec], [NgayToChuc], [PhiDichVu], [SoLuongBanChay], [SoLuongBanChinhThuc], [SoLuongBanDuPhong], [SoLuongBanTang], [ThoiGianToChuc], [TienCocLan1], [TienCocLan2], [TongBanSetup], [TongTienDuKien], [TongTienGiam], [TongTienPhaiTra], [TrangThai])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19);"
2023-12-04T05:51:02.4343064+07:00 [ERR] (Microsoft.EntityFrameworkCore.Update) An exception occurred in the database while saving changes for context type '"WeddingRestaurant.Repository.Infrastructure.AppDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint \"FK_DatTiec_HoaDon_MaTiec\". The conflict occurred in database \"DB_WeddingRestaurant\", table \"dbo.HoaDon\", column 'MaHoaDon'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:42eed92f-4de4-4551-8ad0-78c9b9f1a459
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_DatTiec_HoaDon_MaTiec". The conflict occurred in database "DB_WeddingRestaurant", table "dbo.HoaDon", column 'MaHoaDon'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:42eed92f-4de4-4551-8ad0-78c9b9f1a459
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-12-04T05:51:02.4960694+07:00 [INF] (Serilog.AspNetCore.RequestLoggingMiddleware) HTTP "POST" "/api/dat-tiec/add" responded 400 in 95.7253 ms
2023-12-04T05:51:19.0272088+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("7"ms) [Parameters=["@__model_MaTiec_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='1200']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [DatTiec] AS [d]
        WHERE [d].[MaTiec] = @__model_MaTiec_0 AND ([d].[TrangThai] IS NULL)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END"
2023-12-04T05:51:19.0343630+07:00 [ERR] (Microsoft.EntityFrameworkCore.Database.Command) Failed executing DbCommand ("3"ms) [Parameters=["@p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 450), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (DbType = Double), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32), @p12='?' (Size = 4000), @p13='?' (DbType = Double), @p14='?' (DbType = Double), @p15='?' (DbType = Int32), @p16='?' (DbType = Double), @p17='?' (DbType = Double), @p18='?' (DbType = Double), @p19='?' (Size = 4000)"], CommandType='Text', CommandTimeout='1200']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [DatTiec] ([MaTiec], [GhiChu], [LoaiBan], [LoaiHinhTiec], [MaKhachHang], [NgayDatTiec], [NgayToChuc], [PhiDichVu], [SoLuongBanChay], [SoLuongBanChinhThuc], [SoLuongBanDuPhong], [SoLuongBanTang], [ThoiGianToChuc], [TienCocLan1], [TienCocLan2], [TongBanSetup], [TongTienDuKien], [TongTienGiam], [TongTienPhaiTra], [TrangThai])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19);"
2023-12-04T05:51:19.0381774+07:00 [ERR] (Microsoft.EntityFrameworkCore.Update) An exception occurred in the database while saving changes for context type '"WeddingRestaurant.Repository.Infrastructure.AppDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint \"FK_DatTiec_HoaDon_MaTiec\". The conflict occurred in database \"DB_WeddingRestaurant\", table \"dbo.HoaDon\", column 'MaHoaDon'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:42eed92f-4de4-4551-8ad0-78c9b9f1a459
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_DatTiec_HoaDon_MaTiec". The conflict occurred in database "DB_WeddingRestaurant", table "dbo.HoaDon", column 'MaHoaDon'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:42eed92f-4de4-4551-8ad0-78c9b9f1a459
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-12-04T05:51:19.1099538+07:00 [INF] (Serilog.AspNetCore.RequestLoggingMiddleware) HTTP "POST" "/api/dat-tiec/add" responded 400 in 108.2711 ms
2023-12-04T05:52:27.5025729+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("92"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT 1"
2023-12-04T05:52:27.7003720+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("76"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');"
2023-12-04T05:52:27.7112794+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT 1"
2023-12-04T05:52:27.7284737+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');"
2023-12-04T05:52:27.7748235+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("7"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];"
2023-12-04T05:52:27.8312283+07:00 [INF] (Microsoft.EntityFrameworkCore.Migrations) No migrations were applied. The database is already up to date.
2023-12-04T05:52:28.4838470+07:00 [INF] (Microsoft.Hosting.Lifetime) Now listening on: "https://localhost:7267"
2023-12-04T05:52:28.4855486+07:00 [INF] (Microsoft.Hosting.Lifetime) Now listening on: "http://localhost:5140"
2023-12-04T05:52:28.4914684+07:00 [INF] (Microsoft.Hosting.Lifetime) Application started. Press Ctrl+C to shut down.
2023-12-04T05:52:28.4929835+07:00 [INF] (Microsoft.Hosting.Lifetime) Hosting environment: "Development"
2023-12-04T05:52:28.4941346+07:00 [INF] (Microsoft.Hosting.Lifetime) Content root path: "D:\NhaHangTiecCuoi\WeddingRestaurant\WeddingRestaurant.WebApi\"
2023-12-04T05:53:38.3425212+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("89"ms) [Parameters=["@__model_MaTiec_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='1200']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [DatTiec] AS [d]
        WHERE [d].[MaTiec] = @__model_MaTiec_0 AND ([d].[TrangThai] IS NULL)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END"
2023-12-04T05:55:38.4155160+07:00 [ERR] (Microsoft.EntityFrameworkCore.Database.Command) Failed executing DbCommand ("18"ms) [Parameters=["@p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 450), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (DbType = Double), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32), @p12='?' (Size = 4000), @p13='?' (DbType = Double), @p14='?' (DbType = Double), @p15='?' (DbType = Int32), @p16='?' (DbType = Double), @p17='?' (DbType = Double), @p18='?' (DbType = Double), @p19='?' (Size = 4000)"], CommandType='Text', CommandTimeout='1200']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [DatTiec] ([MaTiec], [GhiChu], [LoaiBan], [LoaiHinhTiec], [MaKhachHang], [NgayDatTiec], [NgayToChuc], [PhiDichVu], [SoLuongBanChay], [SoLuongBanChinhThuc], [SoLuongBanDuPhong], [SoLuongBanTang], [ThoiGianToChuc], [TienCocLan1], [TienCocLan2], [TongBanSetup], [TongTienDuKien], [TongTienGiam], [TongTienPhaiTra], [TrangThai])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19);"
2023-12-04T05:55:38.4984694+07:00 [ERR] (Microsoft.EntityFrameworkCore.Update) An exception occurred in the database while saving changes for context type '"WeddingRestaurant.Repository.Infrastructure.AppDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint \"FK_DatTiec_HoaDon_MaTiec\". The conflict occurred in database \"DB_WeddingRestaurant\", table \"dbo.HoaDon\", column 'MaHoaDon'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:2d3aa4fc-ea0c-4383-a5ad-5a9ee2b38526
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_DatTiec_HoaDon_MaTiec". The conflict occurred in database "DB_WeddingRestaurant", table "dbo.HoaDon", column 'MaHoaDon'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:2d3aa4fc-ea0c-4383-a5ad-5a9ee2b38526
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-12-04T06:02:48.4738699+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("541"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE DATABASE [DB_WeddingRestaurant];"
2023-12-04T06:02:48.5574396+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("40"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [DB_WeddingRestaurant] SET READ_COMMITTED_SNAPSHOT ON;
END;"
2023-12-04T06:02:48.6548977+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("9"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT 1"
2023-12-04T06:02:48.7703696+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("9"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);"
2023-12-04T06:02:48.7720420+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT 1"
2023-12-04T06:02:48.7971508+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("20"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');"
2023-12-04T06:02:48.8037586+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];"
2023-12-04T06:02:48.8240000+07:00 [INF] (Microsoft.EntityFrameworkCore.Migrations) Applying migration '"20231203230236_UpdateKDL"'.
2023-12-04T06:02:48.9522035+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [KhachHang] (
    [MaKhachHang] nvarchar(450) NOT NULL,
    [TenKhachHang] nvarchar(max) NOT NULL,
    [SoDienThoai] nvarchar(max) NOT NULL,
    [NgaySinh] nvarchar(max) NOT NULL,
    [CCCD] nvarchar(max) NOT NULL,
    [Gmail] nvarchar(max) NOT NULL,
    [MatKhau] nvarchar(max) NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_KhachHang] PRIMARY KEY ([MaKhachHang])
);"
2023-12-04T06:02:48.9540271+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [LoaiDichVu] (
    [MaLoaiDichVu] nvarchar(450) NOT NULL,
    [TenLoaiDichVu] nvarchar(max) NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_LoaiDichVu] PRIMARY KEY ([MaLoaiDichVu])
);"
2023-12-04T06:02:48.9560558+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [LoaiMonAn] (
    [MaLoaiMonAn] nvarchar(450) NOT NULL,
    [TenLoaiMon] nvarchar(max) NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_LoaiMonAn] PRIMARY KEY ([MaLoaiMonAn])
);"
2023-12-04T06:02:48.9575293+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [LoaiNuoc] (
    [MaLoaiNuoc] nvarchar(450) NOT NULL,
    [TenLoaiNuoc] nvarchar(max) NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_LoaiNuoc] PRIMARY KEY ([MaLoaiNuoc])
);"
2023-12-04T06:02:48.9600127+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [Menu] (
    [MaMenu] nvarchar(450) NOT NULL,
    [TenMenu] nvarchar(max) NOT NULL,
    [DonGiaMenu] float NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_Menu] PRIMARY KEY ([MaMenu])
);"
2023-12-04T06:02:48.9677657+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("7"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [NguoiDung] (
    [userName] nvarchar(450) NOT NULL,
    [password] nvarchar(max) NOT NULL,
    [quyen] nvarchar(max) NOT NULL,
    [hoTen] nvarchar(max) NOT NULL,
    [sdt] nvarchar(max) NOT NULL,
    [email] nvarchar(max) NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_NguoiDung] PRIMARY KEY ([userName])
);"
2023-12-04T06:02:48.9704740+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [NhanVien] (
    [MaNhanVien] nvarchar(450) NOT NULL,
    [TenNhanVien] nvarchar(max) NOT NULL,
    [SoDienThoai] nvarchar(max) NOT NULL,
    [NgaySinh] nvarchar(max) NOT NULL,
    [CCCD] nvarchar(max) NOT NULL,
    [Gmail] nvarchar(max) NOT NULL,
    [NgayVaoLam] nvarchar(max) NOT NULL,
    [NgayNghiViec] nvarchar(max) NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_NhanVien] PRIMARY KEY ([MaNhanVien])
);"
2023-12-04T06:02:48.9725043+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [Sanh] (
    [MaSanh] nvarchar(450) NOT NULL,
    [TenSanh] nvarchar(max) NOT NULL,
    [HinhAnh] nvarchar(max) NOT NULL,
    [SucChuaToiThieu] int NOT NULL,
    [SucChuaToiDa] int NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_Sanh] PRIMARY KEY ([MaSanh])
);"
2023-12-04T06:02:48.9742736+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [Token] (
    [IDToken] nvarchar(450) NOT NULL,
    [AccessToken] nvarchar(max) NOT NULL,
    [RefreshToken] nvarchar(max) NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_Token] PRIMARY KEY ([IDToken])
);"
2023-12-04T06:02:48.9789449+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [DanhGia] (
    [MaDanhGia] nvarchar(450) NOT NULL,
    [NoiDungDanhGia] nvarchar(max) NOT NULL,
    [MaKhachHang] nvarchar(450) NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_DanhGia] PRIMARY KEY ([MaDanhGia]),
    CONSTRAINT [FK_DanhGia_KhachHang_MaKhachHang] FOREIGN KEY ([MaKhachHang]) REFERENCES [KhachHang] ([MaKhachHang]) ON DELETE CASCADE
);"
2023-12-04T06:02:49.1206554+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [DatTiec] (
    [MaTiec] nvarchar(450) NOT NULL,
    [LoaiHinhTiec] nvarchar(max) NOT NULL,
    [NgayDatTiec] datetime2 NOT NULL,
    [NgayToChuc] nvarchar(max) NOT NULL,
    [ThoiGianToChuc] nvarchar(max) NOT NULL,
    [SoLuongBanChinhThuc] int NOT NULL,
    [SoLuongBanTang] int NOT NULL,
    [SoLuongBanChay] int NOT NULL,
    [SoLuongBanDuPhong] int NOT NULL,
    [TongBanSetup] int NOT NULL,
    [LoaiBan] nvarchar(max) NOT NULL,
    [PhiDichVu] float NOT NULL,
    [TongTienDuKien] float NULL,
    [TongTienGiam] float NULL,
    [TongTienPhaiTra] float NULL,
    [TienCocLan1] float NULL,
    [TienCocLan2] float NULL,
    [GhiChu] nvarchar(max) NULL,
    [MaKhachHang] nvarchar(450) NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_DatTiec] PRIMARY KEY ([MaTiec]),
    CONSTRAINT [FK_DatTiec_KhachHang_MaKhachHang] FOREIGN KEY ([MaKhachHang]) REFERENCES [KhachHang] ([MaKhachHang]) ON DELETE CASCADE
);"
2023-12-04T06:02:49.3970822+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("276"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [DichVu] (
    [MaDichVu] nvarchar(450) NOT NULL,
    [TenDichVu] nvarchar(max) NOT NULL,
    [HinhAnh] nvarchar(max) NOT NULL,
    [MaLoaiDichVu] nvarchar(450) NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_DichVu] PRIMARY KEY ([MaDichVu]),
    CONSTRAINT [FK_DichVu_LoaiDichVu_MaLoaiDichVu] FOREIGN KEY ([MaLoaiDichVu]) REFERENCES [LoaiDichVu] ([MaLoaiDichVu]) ON DELETE CASCADE
);"
2023-12-04T06:02:49.4590748+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("62"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [MonAn] (
    [MaMonAn] nvarchar(450) NOT NULL,
    [TenMonAn] nvarchar(max) NOT NULL,
    [DonGia] float NOT NULL,
    [HinhAnh] nvarchar(max) NOT NULL,
    [DVT] nvarchar(max) NOT NULL,
    [MaLoaiMonAn] nvarchar(450) NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_MonAn] PRIMARY KEY ([MaMonAn]),
    CONSTRAINT [FK_MonAn_LoaiMonAn_MaLoaiMonAn] FOREIGN KEY ([MaLoaiMonAn]) REFERENCES [LoaiMonAn] ([MaLoaiMonAn]) ON DELETE CASCADE
);"
2023-12-04T06:02:49.4624080+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [Nuoc] (
    [MaNuoc] nvarchar(450) NOT NULL,
    [TenNuoc] nvarchar(max) NOT NULL,
    [DVT] nvarchar(max) NOT NULL,
    [HinhAnh] nvarchar(max) NOT NULL,
    [DonGia] float NOT NULL,
    [MaLoaiNuoc] nvarchar(450) NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_Nuoc] PRIMARY KEY ([MaNuoc]),
    CONSTRAINT [FK_Nuoc_LoaiNuoc_MaLoaiNuoc] FOREIGN KEY ([MaLoaiNuoc]) REFERENCES [LoaiNuoc] ([MaLoaiNuoc]) ON DELETE CASCADE
);"
2023-12-04T06:02:49.4666103+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [AccessToken] (
    [Token] nvarchar(max) NOT NULL,
    [StrTokenIDToken] nvarchar(450) NULL,
    [userName] nvarchar(450) NOT NULL,
    [IsUsed] bit NOT NULL,
    [IsRevoked] bit NOT NULL,
    [ExpireAt] datetime2 NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [FK_AccessToken_NguoiDung_userName] FOREIGN KEY ([userName]) REFERENCES [NguoiDung] ([userName]) ON DELETE CASCADE,
    CONSTRAINT [FK_AccessToken_Token_StrTokenIDToken] FOREIGN KEY ([StrTokenIDToken]) REFERENCES [Token] ([IDToken])
);"
2023-12-04T06:02:49.5528314+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("86"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [RefreshToken] (
    [Token] nvarchar(450) NOT NULL,
    [userName] nvarchar(450) NOT NULL,
    [StrTokenIDToken] nvarchar(450) NULL,
    [JwtID] nvarchar(max) NOT NULL,
    [IsUsed] bit NOT NULL,
    [IsRevoked] bit NOT NULL,
    [ExpireAt] datetime2 NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_RefreshToken] PRIMARY KEY ([Token], [userName]),
    CONSTRAINT [FK_RefreshToken_NguoiDung_userName] FOREIGN KEY ([userName]) REFERENCES [NguoiDung] ([userName]) ON DELETE CASCADE,
    CONSTRAINT [FK_RefreshToken_Token_StrTokenIDToken] FOREIGN KEY ([StrTokenIDToken]) REFERENCES [Token] ([IDToken])
);"
2023-12-04T06:02:52.2779491+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("61"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [ChiTietMenu] (
    [MaTiec] nvarchar(450) NOT NULL,
    [MaMenu] nvarchar(450) NOT NULL,
    [SoLuongMenuCuaTiec] int NOT NULL,
    [TongTien] float NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_ChiTietMenu] PRIMARY KEY ([MaTiec], [MaMenu]),
    CONSTRAINT [FK_ChiTietMenu_DatTiec_MaTiec] FOREIGN KEY ([MaTiec]) REFERENCES [DatTiec] ([MaTiec]) ON DELETE CASCADE,
    CONSTRAINT [FK_ChiTietMenu_Menu_MaMenu] FOREIGN KEY ([MaMenu]) REFERENCES [Menu] ([MaMenu]) ON DELETE CASCADE
);"
2023-12-04T06:02:52.2800565+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [HoaDon] (
    [MaHoaDon] nvarchar(450) NOT NULL,
    [NgayLap] nvarchar(max) NOT NULL,
    [TongTienPhuThu] decimal(18,2) NOT NULL,
    [TongTienThanhToan] decimal(18,2) NOT NULL,
    [MaTiec] nvarchar(450) NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_HoaDon] PRIMARY KEY ([MaHoaDon]),
    CONSTRAINT [FK_HoaDon_DatTiec_MaTiec] FOREIGN KEY ([MaTiec]) REFERENCES [DatTiec] ([MaTiec]) ON DELETE CASCADE
);"
2023-12-04T06:02:52.2823034+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [LichSanhTiec] (
    [MaTiec] nvarchar(450) NOT NULL,
    [MaSanh] nvarchar(450) NOT NULL,
    [NgayDienRa] datetime2 NOT NULL,
    [Ca] nvarchar(max) NOT NULL,
    [TienPhuThu] float NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_LichSanhTiec] PRIMARY KEY ([MaTiec], [MaSanh]),
    CONSTRAINT [FK_LichSanhTiec_DatTiec_MaTiec] FOREIGN KEY ([MaTiec]) REFERENCES [DatTiec] ([MaTiec]) ON DELETE CASCADE,
    CONSTRAINT [FK_LichSanhTiec_Sanh_MaSanh] FOREIGN KEY ([MaSanh]) REFERENCES [Sanh] ([MaSanh]) ON DELETE CASCADE
);"
2023-12-04T06:02:52.2847486+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [NhanVienTrongTiec] (
    [MaTiec] nvarchar(450) NOT NULL,
    [MaNhanVien] nvarchar(450) NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_NhanVienTrongTiec] PRIMARY KEY ([MaTiec], [MaNhanVien]),
    CONSTRAINT [FK_NhanVienTrongTiec_DatTiec_MaTiec] FOREIGN KEY ([MaTiec]) REFERENCES [DatTiec] ([MaTiec]) ON DELETE CASCADE,
    CONSTRAINT [FK_NhanVienTrongTiec_NhanVien_MaNhanVien] FOREIGN KEY ([MaNhanVien]) REFERENCES [NhanVien] ([MaNhanVien]) ON DELETE CASCADE
);"
2023-12-04T06:02:52.2865261+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [DichVuTinhPhi] (
    [MaDichVuTinhPhi] nvarchar(450) NOT NULL,
    [TenDichVu] nvarchar(max) NOT NULL,
    [MoTa] nvarchar(max) NOT NULL,
    [HinhAnh] nvarchar(max) NOT NULL,
    [DonGiaDichVu] float NOT NULL,
    [MaDichVu] nvarchar(450) NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_DichVuTinhPhi] PRIMARY KEY ([MaDichVuTinhPhi]),
    CONSTRAINT [FK_DichVuTinhPhi_DichVu_MaDichVu] FOREIGN KEY ([MaDichVu]) REFERENCES [DichVu] ([MaDichVu]) ON DELETE CASCADE
);"
2023-12-04T06:02:52.3390010+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("52"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [DichVuUuDai] (
    [MaDichVuUuDai] nvarchar(450) NOT NULL,
    [TenDichVu] nvarchar(max) NOT NULL,
    [DieuKienApDung] nvarchar(max) NOT NULL,
    [MoTa] nvarchar(max) NOT NULL,
    [HinhAnh] nvarchar(max) NOT NULL,
    [MaDichVu] nvarchar(450) NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_DichVuUuDai] PRIMARY KEY ([MaDichVuUuDai]),
    CONSTRAINT [FK_DichVuUuDai_DichVu_MaDichVu] FOREIGN KEY ([MaDichVu]) REFERENCES [DichVu] ([MaDichVu]) ON DELETE CASCADE
);"
2023-12-04T06:02:52.3547572+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("16"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [MonAnTrongMenu] (
    [MaMenu] nvarchar(450) NOT NULL,
    [MaMonAn] nvarchar(450) NOT NULL,
    [SoLuongMon] int NOT NULL,
    [DonGia] float NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_MonAnTrongMenu] PRIMARY KEY ([MaMenu], [MaMonAn]),
    CONSTRAINT [FK_MonAnTrongMenu_Menu_MaMenu] FOREIGN KEY ([MaMenu]) REFERENCES [Menu] ([MaMenu]) ON DELETE CASCADE,
    CONSTRAINT [FK_MonAnTrongMenu_MonAn_MaMonAn] FOREIGN KEY ([MaMonAn]) REFERENCES [MonAn] ([MaMonAn]) ON DELETE CASCADE
);"
2023-12-04T06:02:56.1776442+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [ChiTietNuocUong] (
    [MaTiec] nvarchar(450) NOT NULL,
    [MaNuoc] nvarchar(450) NOT NULL,
    [SoLuong] int NOT NULL,
    [TongTien] float NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_ChiTietNuocUong] PRIMARY KEY ([MaTiec], [MaNuoc]),
    CONSTRAINT [FK_ChiTietNuocUong_DatTiec_MaTiec] FOREIGN KEY ([MaTiec]) REFERENCES [DatTiec] ([MaTiec]) ON DELETE CASCADE,
    CONSTRAINT [FK_ChiTietNuocUong_Nuoc_MaNuoc] FOREIGN KEY ([MaNuoc]) REFERENCES [Nuoc] ([MaNuoc]) ON DELETE CASCADE
);"
2023-12-04T06:02:56.1802927+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [PhuThu] (
    [MaPhuThu] nvarchar(450) NOT NULL,
    [LoaiPhuThu] nvarchar(max) NOT NULL,
    [MoTaPhuThu] nvarchar(max) NOT NULL,
    [TongTien] float NOT NULL,
    [MaHoaDon] nvarchar(450) NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_PhuThu] PRIMARY KEY ([MaPhuThu]),
    CONSTRAINT [FK_PhuThu_HoaDon_MaHoaDon] FOREIGN KEY ([MaHoaDon]) REFERENCES [HoaDon] ([MaHoaDon]) ON DELETE CASCADE
);"
2023-12-04T06:02:56.1833917+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [ChiTietDichVuTinhPhi] (
    [MaTiec] nvarchar(450) NOT NULL,
    [MaDichVuTinhPhi] nvarchar(450) NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_ChiTietDichVuTinhPhi] PRIMARY KEY ([MaTiec], [MaDichVuTinhPhi]),
    CONSTRAINT [FK_ChiTietDichVuTinhPhi_DatTiec_MaTiec] FOREIGN KEY ([MaTiec]) REFERENCES [DatTiec] ([MaTiec]) ON DELETE CASCADE,
    CONSTRAINT [FK_ChiTietDichVuTinhPhi_DichVuTinhPhi_MaDichVuTinhPhi] FOREIGN KEY ([MaDichVuTinhPhi]) REFERENCES [DichVuTinhPhi] ([MaDichVuTinhPhi]) ON DELETE CASCADE
);"
2023-12-04T06:02:56.1904494+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("7"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [ChiTietDichVuUuDai] (
    [MaTiec] nvarchar(450) NOT NULL,
    [MaDichVuUuDai] nvarchar(450) NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_ChiTietDichVuUuDai] PRIMARY KEY ([MaTiec], [MaDichVuUuDai]),
    CONSTRAINT [FK_ChiTietDichVuUuDai_DatTiec_MaTiec] FOREIGN KEY ([MaTiec]) REFERENCES [DatTiec] ([MaTiec]) ON DELETE CASCADE,
    CONSTRAINT [FK_ChiTietDichVuUuDai_DichVuUuDai_MaDichVuUuDai] FOREIGN KEY ([MaDichVuUuDai]) REFERENCES [DichVuUuDai] ([MaDichVuUuDai]) ON DELETE CASCADE
);"
2023-12-04T06:02:56.1939390+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [ChiTietPhuThuDichVu] (
    [MaPhuThu] nvarchar(450) NOT NULL,
    [MaDichVuTinhPhi] nvarchar(450) NOT NULL,
    [SoLuong] int NOT NULL,
    [DonGia] float NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_ChiTietPhuThuDichVu] PRIMARY KEY ([MaPhuThu], [MaDichVuTinhPhi]),
    CONSTRAINT [FK_ChiTietPhuThuDichVu_DichVuTinhPhi_MaDichVuTinhPhi] FOREIGN KEY ([MaDichVuTinhPhi]) REFERENCES [DichVuTinhPhi] ([MaDichVuTinhPhi]) ON DELETE CASCADE,
    CONSTRAINT [FK_ChiTietPhuThuDichVu_PhuThu_MaPhuThu] FOREIGN KEY ([MaPhuThu]) REFERENCES [PhuThu] ([MaPhuThu]) ON DELETE CASCADE
);"
2023-12-04T06:02:56.1967554+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [ChiTietPhuThuMonAn] (
    [MaPhuThu] nvarchar(450) NOT NULL,
    [MaMonAn] nvarchar(450) NOT NULL,
    [SoLuong] int NOT NULL,
    [DonGia] float NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_ChiTietPhuThuMonAn] PRIMARY KEY ([MaPhuThu], [MaMonAn]),
    CONSTRAINT [FK_ChiTietPhuThuMonAn_MonAn_MaMonAn] FOREIGN KEY ([MaMonAn]) REFERENCES [MonAn] ([MaMonAn]) ON DELETE CASCADE,
    CONSTRAINT [FK_ChiTietPhuThuMonAn_PhuThu_MaPhuThu] FOREIGN KEY ([MaPhuThu]) REFERENCES [PhuThu] ([MaPhuThu]) ON DELETE CASCADE
);"
2023-12-04T06:02:59.9827449+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("11"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [ChiTietPhuThuNuoc] (
    [MaPhuThu] nvarchar(450) NOT NULL,
    [MaNuoc] nvarchar(450) NOT NULL,
    [SoLuong] int NOT NULL,
    [DonGia] float NOT NULL,
    [ThanhTien] float NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_ChiTietPhuThuNuoc] PRIMARY KEY ([MaPhuThu], [MaNuoc]),
    CONSTRAINT [FK_ChiTietPhuThuNuoc_Nuoc_MaNuoc] FOREIGN KEY ([MaNuoc]) REFERENCES [Nuoc] ([MaNuoc]) ON DELETE CASCADE,
    CONSTRAINT [FK_ChiTietPhuThuNuoc_PhuThu_MaPhuThu] FOREIGN KEY ([MaPhuThu]) REFERENCES [PhuThu] ([MaPhuThu]) ON DELETE CASCADE
);"
2023-12-04T06:02:59.9877987+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE INDEX [IX_AccessToken_StrTokenIDToken] ON [AccessToken] ([StrTokenIDToken]);"
2023-12-04T06:02:59.9892746+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE INDEX [IX_AccessToken_userName] ON [AccessToken] ([userName]);"
2023-12-04T06:02:59.9901731+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE INDEX [IX_ChiTietDichVuTinhPhi_MaDichVuTinhPhi] ON [ChiTietDichVuTinhPhi] ([MaDichVuTinhPhi]);"
2023-12-04T06:02:59.9908729+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE INDEX [IX_ChiTietDichVuUuDai_MaDichVuUuDai] ON [ChiTietDichVuUuDai] ([MaDichVuUuDai]);"
2023-12-04T06:02:59.9915442+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE INDEX [IX_ChiTietMenu_MaMenu] ON [ChiTietMenu] ([MaMenu]);"
2023-12-04T06:02:59.9922626+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE INDEX [IX_ChiTietNuocUong_MaNuoc] ON [ChiTietNuocUong] ([MaNuoc]);"
2023-12-04T06:02:59.9930451+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE INDEX [IX_ChiTietPhuThuDichVu_MaDichVuTinhPhi] ON [ChiTietPhuThuDichVu] ([MaDichVuTinhPhi]);"
2023-12-04T06:02:59.9938842+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE INDEX [IX_ChiTietPhuThuMonAn_MaMonAn] ON [ChiTietPhuThuMonAn] ([MaMonAn]);"
2023-12-04T06:02:59.9947895+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE INDEX [IX_ChiTietPhuThuNuoc_MaNuoc] ON [ChiTietPhuThuNuoc] ([MaNuoc]);"
2023-12-04T06:02:59.9964602+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE INDEX [IX_DanhGia_MaKhachHang] ON [DanhGia] ([MaKhachHang]);"
2023-12-04T06:02:59.9974627+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE INDEX [IX_DatTiec_MaKhachHang] ON [DatTiec] ([MaKhachHang]);"
2023-12-04T06:02:59.9988591+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE INDEX [IX_DichVu_MaLoaiDichVu] ON [DichVu] ([MaLoaiDichVu]);"
2023-12-04T06:03:00.0000941+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE INDEX [IX_DichVuTinhPhi_MaDichVu] ON [DichVuTinhPhi] ([MaDichVu]);"
2023-12-04T06:03:00.0010226+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE INDEX [IX_DichVuUuDai_MaDichVu] ON [DichVuUuDai] ([MaDichVu]);"
2023-12-04T06:03:00.0029010+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE INDEX [IX_HoaDon_MaTiec] ON [HoaDon] ([MaTiec]);"
2023-12-04T06:03:00.0040247+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE INDEX [IX_LichSanhTiec_MaSanh] ON [LichSanhTiec] ([MaSanh]);"
2023-12-04T06:03:00.0061640+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE INDEX [IX_MonAn_MaLoaiMonAn] ON [MonAn] ([MaLoaiMonAn]);"
2023-12-04T06:03:00.0073100+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE INDEX [IX_MonAnTrongMenu_MaMonAn] ON [MonAnTrongMenu] ([MaMonAn]);"
2023-12-04T06:03:00.0082881+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE INDEX [IX_NhanVienTrongTiec_MaNhanVien] ON [NhanVienTrongTiec] ([MaNhanVien]);"
2023-12-04T06:03:02.9392571+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE INDEX [IX_Nuoc_MaLoaiNuoc] ON [Nuoc] ([MaLoaiNuoc]);"
2023-12-04T06:03:02.9402846+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE INDEX [IX_PhuThu_MaHoaDon] ON [PhuThu] ([MaHoaDon]);"
2023-12-04T06:03:02.9414264+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE INDEX [IX_RefreshToken_StrTokenIDToken] ON [RefreshToken] ([StrTokenIDToken]);"
2023-12-04T06:03:02.9424393+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE INDEX [IX_RefreshToken_userName] ON [RefreshToken] ([userName]);"
2023-12-04T06:03:02.9483041+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20231203230236_UpdateKDL', N'7.0.9');"
2023-12-04T06:07:45.2411549+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("417"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE DATABASE [DB_WeddingRestaurant];"
2023-12-04T06:07:46.0020528+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("654"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [DB_WeddingRestaurant] SET READ_COMMITTED_SNAPSHOT ON;
END;"
2023-12-04T06:07:46.0818657+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("20"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT 1"
2023-12-04T06:07:46.3889690+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("27"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);"
2023-12-04T06:07:46.3966596+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT 1"
2023-12-04T06:07:46.4597658+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("50"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');"
2023-12-04T06:07:46.4727649+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("7"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];"
2023-12-04T06:07:46.5143252+07:00 [INF] (Microsoft.EntityFrameworkCore.Migrations) Applying migration '"20231203230732_UpdateDB"'.
2023-12-04T06:07:46.7817727+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [KhachHang] (
    [MaKhachHang] nvarchar(450) NOT NULL,
    [TenKhachHang] nvarchar(max) NOT NULL,
    [SoDienThoai] nvarchar(max) NOT NULL,
    [NgaySinh] nvarchar(max) NOT NULL,
    [CCCD] nvarchar(max) NOT NULL,
    [Gmail] nvarchar(max) NOT NULL,
    [MatKhau] nvarchar(max) NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_KhachHang] PRIMARY KEY ([MaKhachHang])
);"
2023-12-04T06:07:46.7849874+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [LoaiDichVu] (
    [MaLoaiDichVu] nvarchar(450) NOT NULL,
    [TenLoaiDichVu] nvarchar(max) NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_LoaiDichVu] PRIMARY KEY ([MaLoaiDichVu])
);"
2023-12-04T06:07:46.7893112+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [LoaiMonAn] (
    [MaLoaiMonAn] nvarchar(450) NOT NULL,
    [TenLoaiMon] nvarchar(max) NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_LoaiMonAn] PRIMARY KEY ([MaLoaiMonAn])
);"
2023-12-04T06:07:46.7922651+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [LoaiNuoc] (
    [MaLoaiNuoc] nvarchar(450) NOT NULL,
    [TenLoaiNuoc] nvarchar(max) NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_LoaiNuoc] PRIMARY KEY ([MaLoaiNuoc])
);"
2023-12-04T06:07:46.7947922+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [Menu] (
    [MaMenu] nvarchar(450) NOT NULL,
    [TenMenu] nvarchar(max) NOT NULL,
    [DonGiaMenu] float NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_Menu] PRIMARY KEY ([MaMenu])
);"
2023-12-04T06:07:46.8048408+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [NguoiDung] (
    [userName] nvarchar(450) NOT NULL,
    [password] nvarchar(max) NOT NULL,
    [quyen] nvarchar(max) NOT NULL,
    [hoTen] nvarchar(max) NOT NULL,
    [sdt] nvarchar(max) NOT NULL,
    [email] nvarchar(max) NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_NguoiDung] PRIMARY KEY ([userName])
);"
2023-12-04T06:07:46.8079634+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [NhanVien] (
    [MaNhanVien] nvarchar(450) NOT NULL,
    [TenNhanVien] nvarchar(max) NOT NULL,
    [SoDienThoai] nvarchar(max) NOT NULL,
    [NgaySinh] nvarchar(max) NOT NULL,
    [CCCD] nvarchar(max) NOT NULL,
    [Gmail] nvarchar(max) NOT NULL,
    [NgayVaoLam] nvarchar(max) NOT NULL,
    [NgayNghiViec] nvarchar(max) NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_NhanVien] PRIMARY KEY ([MaNhanVien])
);"
2023-12-04T06:07:46.8107450+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [Sanh] (
    [MaSanh] nvarchar(450) NOT NULL,
    [TenSanh] nvarchar(max) NOT NULL,
    [HinhAnh] nvarchar(max) NOT NULL,
    [SucChuaToiThieu] int NOT NULL,
    [SucChuaToiDa] int NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_Sanh] PRIMARY KEY ([MaSanh])
);"
2023-12-04T06:07:46.8170392+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [Token] (
    [IDToken] nvarchar(450) NOT NULL,
    [AccessToken] nvarchar(max) NOT NULL,
    [RefreshToken] nvarchar(max) NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_Token] PRIMARY KEY ([IDToken])
);"
2023-12-04T06:07:46.8264169+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("9"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [DanhGia] (
    [MaDanhGia] nvarchar(450) NOT NULL,
    [NoiDungDanhGia] nvarchar(max) NOT NULL,
    [MaKhachHang] nvarchar(450) NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_DanhGia] PRIMARY KEY ([MaDanhGia]),
    CONSTRAINT [FK_DanhGia_KhachHang_MaKhachHang] FOREIGN KEY ([MaKhachHang]) REFERENCES [KhachHang] ([MaKhachHang]) ON DELETE CASCADE
);"
2023-12-04T06:07:46.8304574+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [DatTiec] (
    [MaTiec] nvarchar(450) NOT NULL,
    [LoaiHinhTiec] nvarchar(max) NOT NULL,
    [NgayDatTiec] datetime2 NOT NULL,
    [NgayToChuc] nvarchar(max) NOT NULL,
    [ThoiGianToChuc] nvarchar(max) NOT NULL,
    [SoLuongBanChinhThuc] int NOT NULL,
    [SoLuongBanTang] int NOT NULL,
    [SoLuongBanChay] int NOT NULL,
    [SoLuongBanDuPhong] int NOT NULL,
    [TongBanSetup] int NOT NULL,
    [LoaiBan] nvarchar(max) NOT NULL,
    [PhiDichVu] float NOT NULL,
    [TongTienDuKien] float NULL,
    [TongTienGiam] float NULL,
    [TongTienPhaiTra] float NULL,
    [TienCocLan1] float NULL,
    [TienCocLan2] float NULL,
    [GhiChu] nvarchar(max) NULL,
    [MaKhachHang] nvarchar(450) NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_DatTiec] PRIMARY KEY ([MaTiec]),
    CONSTRAINT [FK_DatTiec_KhachHang_MaKhachHang] FOREIGN KEY ([MaKhachHang]) REFERENCES [KhachHang] ([MaKhachHang]) ON DELETE CASCADE
);"
2023-12-04T06:07:46.8361009+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [DichVu] (
    [MaDichVu] nvarchar(450) NOT NULL,
    [TenDichVu] nvarchar(max) NOT NULL,
    [HinhAnh] nvarchar(max) NOT NULL,
    [MaLoaiDichVu] nvarchar(450) NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_DichVu] PRIMARY KEY ([MaDichVu]),
    CONSTRAINT [FK_DichVu_LoaiDichVu_MaLoaiDichVu] FOREIGN KEY ([MaLoaiDichVu]) REFERENCES [LoaiDichVu] ([MaLoaiDichVu]) ON DELETE CASCADE
);"
2023-12-04T06:07:46.8412507+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [MonAn] (
    [MaMonAn] nvarchar(450) NOT NULL,
    [TenMonAn] nvarchar(max) NOT NULL,
    [DonGia] float NOT NULL,
    [HinhAnh] nvarchar(max) NOT NULL,
    [DVT] nvarchar(max) NOT NULL,
    [MaLoaiMonAn] nvarchar(450) NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_MonAn] PRIMARY KEY ([MaMonAn]),
    CONSTRAINT [FK_MonAn_LoaiMonAn_MaLoaiMonAn] FOREIGN KEY ([MaLoaiMonAn]) REFERENCES [LoaiMonAn] ([MaLoaiMonAn]) ON DELETE CASCADE
);"
2023-12-04T06:07:46.8482430+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("7"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [Nuoc] (
    [MaNuoc] nvarchar(450) NOT NULL,
    [TenNuoc] nvarchar(max) NOT NULL,
    [DVT] nvarchar(max) NOT NULL,
    [HinhAnh] nvarchar(max) NOT NULL,
    [DonGia] float NOT NULL,
    [MaLoaiNuoc] nvarchar(450) NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_Nuoc] PRIMARY KEY ([MaNuoc]),
    CONSTRAINT [FK_Nuoc_LoaiNuoc_MaLoaiNuoc] FOREIGN KEY ([MaLoaiNuoc]) REFERENCES [LoaiNuoc] ([MaLoaiNuoc]) ON DELETE CASCADE
);"
2023-12-04T06:07:46.8514900+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [AccessToken] (
    [Token] nvarchar(max) NOT NULL,
    [StrTokenIDToken] nvarchar(450) NULL,
    [userName] nvarchar(450) NOT NULL,
    [IsUsed] bit NOT NULL,
    [IsRevoked] bit NOT NULL,
    [ExpireAt] datetime2 NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [FK_AccessToken_NguoiDung_userName] FOREIGN KEY ([userName]) REFERENCES [NguoiDung] ([userName]) ON DELETE CASCADE,
    CONSTRAINT [FK_AccessToken_Token_StrTokenIDToken] FOREIGN KEY ([StrTokenIDToken]) REFERENCES [Token] ([IDToken])
);"
2023-12-04T06:07:50.4434787+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("24"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [RefreshToken] (
    [Token] nvarchar(450) NOT NULL,
    [userName] nvarchar(450) NOT NULL,
    [StrTokenIDToken] nvarchar(450) NULL,
    [JwtID] nvarchar(max) NOT NULL,
    [IsUsed] bit NOT NULL,
    [IsRevoked] bit NOT NULL,
    [ExpireAt] datetime2 NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_RefreshToken] PRIMARY KEY ([Token], [userName]),
    CONSTRAINT [FK_RefreshToken_NguoiDung_userName] FOREIGN KEY ([userName]) REFERENCES [NguoiDung] ([userName]) ON DELETE CASCADE,
    CONSTRAINT [FK_RefreshToken_Token_StrTokenIDToken] FOREIGN KEY ([StrTokenIDToken]) REFERENCES [Token] ([IDToken])
);"
2023-12-04T06:07:50.4551431+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("11"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [ChiTietMenu] (
    [MaTiec] nvarchar(450) NOT NULL,
    [MaMenu] nvarchar(450) NOT NULL,
    [SoLuongMenuCuaTiec] int NOT NULL,
    [TongTien] float NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_ChiTietMenu] PRIMARY KEY ([MaTiec], [MaMenu]),
    CONSTRAINT [FK_ChiTietMenu_DatTiec_MaTiec] FOREIGN KEY ([MaTiec]) REFERENCES [DatTiec] ([MaTiec]) ON DELETE CASCADE,
    CONSTRAINT [FK_ChiTietMenu_Menu_MaMenu] FOREIGN KEY ([MaMenu]) REFERENCES [Menu] ([MaMenu]) ON DELETE CASCADE
);"
2023-12-04T06:07:50.4626610+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("7"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [HoaDon] (
    [MaHoaDon] nvarchar(450) NOT NULL,
    [NgayLap] nvarchar(max) NOT NULL,
    [TongTienPhuThu] decimal(18,2) NOT NULL,
    [TongTienThanhToan] decimal(18,2) NOT NULL,
    [MaTiec] nvarchar(max) NOT NULL,
    [DatTiecsMaTiec] nvarchar(450) NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_HoaDon] PRIMARY KEY ([MaHoaDon]),
    CONSTRAINT [FK_HoaDon_DatTiec_DatTiecsMaTiec] FOREIGN KEY ([DatTiecsMaTiec]) REFERENCES [DatTiec] ([MaTiec]) ON DELETE CASCADE
);"
2023-12-04T06:07:50.4691380+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [LichSanhTiec] (
    [MaTiec] nvarchar(450) NOT NULL,
    [MaSanh] nvarchar(450) NOT NULL,
    [NgayDienRa] datetime2 NOT NULL,
    [Ca] nvarchar(max) NOT NULL,
    [TienPhuThu] float NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_LichSanhTiec] PRIMARY KEY ([MaTiec], [MaSanh]),
    CONSTRAINT [FK_LichSanhTiec_DatTiec_MaTiec] FOREIGN KEY ([MaTiec]) REFERENCES [DatTiec] ([MaTiec]) ON DELETE CASCADE,
    CONSTRAINT [FK_LichSanhTiec_Sanh_MaSanh] FOREIGN KEY ([MaSanh]) REFERENCES [Sanh] ([MaSanh]) ON DELETE CASCADE
);"
2023-12-04T06:07:50.4731674+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [NhanVienTrongTiec] (
    [MaTiec] nvarchar(450) NOT NULL,
    [MaNhanVien] nvarchar(450) NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_NhanVienTrongTiec] PRIMARY KEY ([MaTiec], [MaNhanVien]),
    CONSTRAINT [FK_NhanVienTrongTiec_DatTiec_MaTiec] FOREIGN KEY ([MaTiec]) REFERENCES [DatTiec] ([MaTiec]) ON DELETE CASCADE,
    CONSTRAINT [FK_NhanVienTrongTiec_NhanVien_MaNhanVien] FOREIGN KEY ([MaNhanVien]) REFERENCES [NhanVien] ([MaNhanVien]) ON DELETE CASCADE
);"
2023-12-04T06:07:50.4762646+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [DichVuTinhPhi] (
    [MaDichVuTinhPhi] nvarchar(450) NOT NULL,
    [TenDichVu] nvarchar(max) NOT NULL,
    [MoTa] nvarchar(max) NOT NULL,
    [HinhAnh] nvarchar(max) NOT NULL,
    [DonGiaDichVu] float NOT NULL,
    [MaDichVu] nvarchar(450) NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_DichVuTinhPhi] PRIMARY KEY ([MaDichVuTinhPhi]),
    CONSTRAINT [FK_DichVuTinhPhi_DichVu_MaDichVu] FOREIGN KEY ([MaDichVu]) REFERENCES [DichVu] ([MaDichVu]) ON DELETE CASCADE
);"
2023-12-04T06:07:50.4848778+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("8"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [DichVuUuDai] (
    [MaDichVuUuDai] nvarchar(450) NOT NULL,
    [TenDichVu] nvarchar(max) NOT NULL,
    [DieuKienApDung] nvarchar(max) NOT NULL,
    [MoTa] nvarchar(max) NOT NULL,
    [HinhAnh] nvarchar(max) NOT NULL,
    [MaDichVu] nvarchar(450) NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_DichVuUuDai] PRIMARY KEY ([MaDichVuUuDai]),
    CONSTRAINT [FK_DichVuUuDai_DichVu_MaDichVu] FOREIGN KEY ([MaDichVu]) REFERENCES [DichVu] ([MaDichVu]) ON DELETE CASCADE
);"
2023-12-04T06:07:53.3496864+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [MonAnTrongMenu] (
    [MaMenu] nvarchar(450) NOT NULL,
    [MaMonAn] nvarchar(450) NOT NULL,
    [SoLuongMon] int NOT NULL,
    [DonGia] float NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_MonAnTrongMenu] PRIMARY KEY ([MaMenu], [MaMonAn]),
    CONSTRAINT [FK_MonAnTrongMenu_Menu_MaMenu] FOREIGN KEY ([MaMenu]) REFERENCES [Menu] ([MaMenu]) ON DELETE CASCADE,
    CONSTRAINT [FK_MonAnTrongMenu_MonAn_MaMonAn] FOREIGN KEY ([MaMonAn]) REFERENCES [MonAn] ([MaMonAn]) ON DELETE CASCADE
);"
2023-12-04T06:07:53.3530833+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [ChiTietNuocUong] (
    [MaTiec] nvarchar(450) NOT NULL,
    [MaNuoc] nvarchar(450) NOT NULL,
    [SoLuong] int NOT NULL,
    [TongTien] float NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_ChiTietNuocUong] PRIMARY KEY ([MaTiec], [MaNuoc]),
    CONSTRAINT [FK_ChiTietNuocUong_DatTiec_MaTiec] FOREIGN KEY ([MaTiec]) REFERENCES [DatTiec] ([MaTiec]) ON DELETE CASCADE,
    CONSTRAINT [FK_ChiTietNuocUong_Nuoc_MaNuoc] FOREIGN KEY ([MaNuoc]) REFERENCES [Nuoc] ([MaNuoc]) ON DELETE CASCADE
);"
2023-12-04T06:07:53.3548579+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [PhuThu] (
    [MaPhuThu] nvarchar(450) NOT NULL,
    [LoaiPhuThu] nvarchar(max) NOT NULL,
    [MoTaPhuThu] nvarchar(max) NOT NULL,
    [TongTien] float NOT NULL,
    [MaHoaDon] nvarchar(450) NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_PhuThu] PRIMARY KEY ([MaPhuThu]),
    CONSTRAINT [FK_PhuThu_HoaDon_MaHoaDon] FOREIGN KEY ([MaHoaDon]) REFERENCES [HoaDon] ([MaHoaDon]) ON DELETE CASCADE
);"
2023-12-04T06:07:53.3569766+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [ChiTietDichVuTinhPhi] (
    [MaTiec] nvarchar(450) NOT NULL,
    [MaDichVuTinhPhi] nvarchar(450) NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_ChiTietDichVuTinhPhi] PRIMARY KEY ([MaTiec], [MaDichVuTinhPhi]),
    CONSTRAINT [FK_ChiTietDichVuTinhPhi_DatTiec_MaTiec] FOREIGN KEY ([MaTiec]) REFERENCES [DatTiec] ([MaTiec]) ON DELETE CASCADE,
    CONSTRAINT [FK_ChiTietDichVuTinhPhi_DichVuTinhPhi_MaDichVuTinhPhi] FOREIGN KEY ([MaDichVuTinhPhi]) REFERENCES [DichVuTinhPhi] ([MaDichVuTinhPhi]) ON DELETE CASCADE
);"
2023-12-04T06:07:53.3644319+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("7"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [ChiTietDichVuUuDai] (
    [MaTiec] nvarchar(450) NOT NULL,
    [MaDichVuUuDai] nvarchar(450) NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_ChiTietDichVuUuDai] PRIMARY KEY ([MaTiec], [MaDichVuUuDai]),
    CONSTRAINT [FK_ChiTietDichVuUuDai_DatTiec_MaTiec] FOREIGN KEY ([MaTiec]) REFERENCES [DatTiec] ([MaTiec]) ON DELETE CASCADE,
    CONSTRAINT [FK_ChiTietDichVuUuDai_DichVuUuDai_MaDichVuUuDai] FOREIGN KEY ([MaDichVuUuDai]) REFERENCES [DichVuUuDai] ([MaDichVuUuDai]) ON DELETE CASCADE
);"
2023-12-04T06:07:53.3663242+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [ChiTietPhuThuDichVu] (
    [MaPhuThu] nvarchar(450) NOT NULL,
    [MaDichVuTinhPhi] nvarchar(450) NOT NULL,
    [SoLuong] int NOT NULL,
    [DonGia] float NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_ChiTietPhuThuDichVu] PRIMARY KEY ([MaPhuThu], [MaDichVuTinhPhi]),
    CONSTRAINT [FK_ChiTietPhuThuDichVu_DichVuTinhPhi_MaDichVuTinhPhi] FOREIGN KEY ([MaDichVuTinhPhi]) REFERENCES [DichVuTinhPhi] ([MaDichVuTinhPhi]) ON DELETE CASCADE,
    CONSTRAINT [FK_ChiTietPhuThuDichVu_PhuThu_MaPhuThu] FOREIGN KEY ([MaPhuThu]) REFERENCES [PhuThu] ([MaPhuThu]) ON DELETE CASCADE
);"
2023-12-04T06:07:56.6268952+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [ChiTietPhuThuMonAn] (
    [MaPhuThu] nvarchar(450) NOT NULL,
    [MaMonAn] nvarchar(450) NOT NULL,
    [SoLuong] int NOT NULL,
    [DonGia] float NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_ChiTietPhuThuMonAn] PRIMARY KEY ([MaPhuThu], [MaMonAn]),
    CONSTRAINT [FK_ChiTietPhuThuMonAn_MonAn_MaMonAn] FOREIGN KEY ([MaMonAn]) REFERENCES [MonAn] ([MaMonAn]) ON DELETE CASCADE,
    CONSTRAINT [FK_ChiTietPhuThuMonAn_PhuThu_MaPhuThu] FOREIGN KEY ([MaPhuThu]) REFERENCES [PhuThu] ([MaPhuThu]) ON DELETE CASCADE
);"
2023-12-04T06:07:56.6299451+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE TABLE [ChiTietPhuThuNuoc] (
    [MaPhuThu] nvarchar(450) NOT NULL,
    [MaNuoc] nvarchar(450) NOT NULL,
    [SoLuong] int NOT NULL,
    [DonGia] float NOT NULL,
    [ThanhTien] float NOT NULL,
    [TrangThai] nvarchar(max) NULL,
    CONSTRAINT [PK_ChiTietPhuThuNuoc] PRIMARY KEY ([MaPhuThu], [MaNuoc]),
    CONSTRAINT [FK_ChiTietPhuThuNuoc_Nuoc_MaNuoc] FOREIGN KEY ([MaNuoc]) REFERENCES [Nuoc] ([MaNuoc]) ON DELETE CASCADE,
    CONSTRAINT [FK_ChiTietPhuThuNuoc_PhuThu_MaPhuThu] FOREIGN KEY ([MaPhuThu]) REFERENCES [PhuThu] ([MaPhuThu]) ON DELETE CASCADE
);"
2023-12-04T06:07:56.6314478+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE INDEX [IX_AccessToken_StrTokenIDToken] ON [AccessToken] ([StrTokenIDToken]);"
2023-12-04T06:07:56.6321462+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE INDEX [IX_AccessToken_userName] ON [AccessToken] ([userName]);"
2023-12-04T06:07:56.6328034+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE INDEX [IX_ChiTietDichVuTinhPhi_MaDichVuTinhPhi] ON [ChiTietDichVuTinhPhi] ([MaDichVuTinhPhi]);"
2023-12-04T06:07:56.6334488+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE INDEX [IX_ChiTietDichVuUuDai_MaDichVuUuDai] ON [ChiTietDichVuUuDai] ([MaDichVuUuDai]);"
2023-12-04T06:07:56.6340536+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE INDEX [IX_ChiTietMenu_MaMenu] ON [ChiTietMenu] ([MaMenu]);"
2023-12-04T06:07:56.6346456+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE INDEX [IX_ChiTietNuocUong_MaNuoc] ON [ChiTietNuocUong] ([MaNuoc]);"
2023-12-04T06:07:56.6352524+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE INDEX [IX_ChiTietPhuThuDichVu_MaDichVuTinhPhi] ON [ChiTietPhuThuDichVu] ([MaDichVuTinhPhi]);"
2023-12-04T06:07:56.6358616+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE INDEX [IX_ChiTietPhuThuMonAn_MaMonAn] ON [ChiTietPhuThuMonAn] ([MaMonAn]);"
2023-12-04T06:07:56.6364769+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE INDEX [IX_ChiTietPhuThuNuoc_MaNuoc] ON [ChiTietPhuThuNuoc] ([MaNuoc]);"
2023-12-04T06:07:56.6378007+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE INDEX [IX_DanhGia_MaKhachHang] ON [DanhGia] ([MaKhachHang]);"
2023-12-04T06:07:56.6384436+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE INDEX [IX_DatTiec_MaKhachHang] ON [DatTiec] ([MaKhachHang]);"
2023-12-04T06:07:56.6390387+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE INDEX [IX_DichVu_MaLoaiDichVu] ON [DichVu] ([MaLoaiDichVu]);"
2023-12-04T06:07:56.6397549+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE INDEX [IX_DichVuTinhPhi_MaDichVu] ON [DichVuTinhPhi] ([MaDichVu]);"
2023-12-04T06:07:56.6403975+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE INDEX [IX_DichVuUuDai_MaDichVu] ON [DichVuUuDai] ([MaDichVu]);"
2023-12-04T06:07:56.6415856+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE INDEX [IX_HoaDon_DatTiecsMaTiec] ON [HoaDon] ([DatTiecsMaTiec]);"
2023-12-04T06:07:59.5631644+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE INDEX [IX_LichSanhTiec_MaSanh] ON [LichSanhTiec] ([MaSanh]);"
2023-12-04T06:07:59.5640214+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE INDEX [IX_MonAn_MaLoaiMonAn] ON [MonAn] ([MaLoaiMonAn]);"
2023-12-04T06:07:59.5651534+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE INDEX [IX_MonAnTrongMenu_MaMonAn] ON [MonAnTrongMenu] ([MaMonAn]);"
2023-12-04T06:07:59.5658054+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE INDEX [IX_NhanVienTrongTiec_MaNhanVien] ON [NhanVienTrongTiec] ([MaNhanVien]);"
2023-12-04T06:07:59.5707778+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE INDEX [IX_Nuoc_MaLoaiNuoc] ON [Nuoc] ([MaLoaiNuoc]);"
2023-12-04T06:07:59.5714469+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE INDEX [IX_PhuThu_MaHoaDon] ON [PhuThu] ([MaHoaDon]);"
2023-12-04T06:07:59.5720145+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE INDEX [IX_RefreshToken_StrTokenIDToken] ON [RefreshToken] ([StrTokenIDToken]);"
2023-12-04T06:07:59.5725912+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE INDEX [IX_RefreshToken_userName] ON [RefreshToken] ([userName]);"
2023-12-04T06:07:59.5747015+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20231203230732_UpdateDB', N'7.0.9');"
2023-12-04T06:08:52.9775118+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("99"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT 1"
2023-12-04T06:08:53.2257789+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("95"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');"
2023-12-04T06:08:53.2413220+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT 1"
2023-12-04T06:08:53.2957166+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');"
2023-12-04T06:08:53.3641397+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];"
2023-12-04T06:08:53.4152750+07:00 [INF] (Microsoft.EntityFrameworkCore.Migrations) No migrations were applied. The database is already up to date.
2023-12-04T06:08:54.1350809+07:00 [INF] (Microsoft.Hosting.Lifetime) Now listening on: "https://localhost:7267"
2023-12-04T06:08:54.1369907+07:00 [INF] (Microsoft.Hosting.Lifetime) Now listening on: "http://localhost:5140"
2023-12-04T06:08:54.1466506+07:00 [INF] (Microsoft.Hosting.Lifetime) Application started. Press Ctrl+C to shut down.
2023-12-04T06:08:54.1488790+07:00 [INF] (Microsoft.Hosting.Lifetime) Hosting environment: "Development"
2023-12-04T06:08:54.1503667+07:00 [INF] (Microsoft.Hosting.Lifetime) Content root path: "D:\NhaHangTiecCuoi\WeddingRestaurant\WeddingRestaurant.WebApi\"
2023-12-04T06:09:48.8929482+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("81"ms) [Parameters=["@__model_MaTiec_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='1200']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [DatTiec] AS [d]
        WHERE [d].[MaTiec] = @__model_MaTiec_0 AND ([d].[TrangThai] IS NULL)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END"
2023-12-04T06:10:05.9430276+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("82"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT 1"
2023-12-04T06:10:06.1492607+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("69"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');"
2023-12-04T06:10:06.1593904+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT 1"
2023-12-04T06:10:06.1640988+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');"
2023-12-04T06:10:06.2348091+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("23"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];"
2023-12-04T06:10:06.2912247+07:00 [INF] (Microsoft.EntityFrameworkCore.Migrations) No migrations were applied. The database is already up to date.
2023-12-04T06:10:06.7926640+07:00 [INF] (Microsoft.Hosting.Lifetime) Now listening on: "https://localhost:7267"
2023-12-04T06:10:06.7935889+07:00 [INF] (Microsoft.Hosting.Lifetime) Now listening on: "http://localhost:5140"
2023-12-04T06:10:06.7991118+07:00 [INF] (Microsoft.Hosting.Lifetime) Application started. Press Ctrl+C to shut down.
2023-12-04T06:10:06.8005364+07:00 [INF] (Microsoft.Hosting.Lifetime) Hosting environment: "Development"
2023-12-04T06:10:06.8014868+07:00 [INF] (Microsoft.Hosting.Lifetime) Content root path: "D:\NhaHangTiecCuoi\WeddingRestaurant\WeddingRestaurant.WebApi\"
2023-12-04T06:11:54.3066463+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("68"ms) [Parameters=["@__model_MaTiec_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='1200']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [DatTiec] AS [d]
        WHERE [d].[MaTiec] = @__model_MaTiec_0 AND ([d].[TrangThai] IS NULL)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END"
2023-12-04T06:11:54.7817303+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("9"ms) [Parameters=["@p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 450), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (DbType = Double), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32), @p12='?' (Size = 4000), @p13='?' (DbType = Double), @p14='?' (DbType = Double), @p15='?' (DbType = Int32), @p16='?' (DbType = Double), @p17='?' (DbType = Double), @p18='?' (DbType = Double), @p19='?' (Size = 4000)"], CommandType='Text', CommandTimeout='1200']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [DatTiec] ([MaTiec], [GhiChu], [LoaiBan], [LoaiHinhTiec], [MaKhachHang], [NgayDatTiec], [NgayToChuc], [PhiDichVu], [SoLuongBanChay], [SoLuongBanChinhThuc], [SoLuongBanDuPhong], [SoLuongBanTang], [ThoiGianToChuc], [TienCocLan1], [TienCocLan2], [TongBanSetup], [TongTienDuKien], [TongTienGiam], [TongTienPhaiTra], [TrangThai])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19);"
2023-12-04T06:11:54.8287751+07:00 [INF] (Serilog.AspNetCore.RequestLoggingMiddleware) HTTP "POST" "/api/dat-tiec/add" responded 200 in 2005.8895 ms
2023-12-04T06:15:58.3194593+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("25"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT 1"
2023-12-04T06:15:58.6318211+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("242"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');"
2023-12-04T06:15:58.6372815+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT 1"
2023-12-04T06:15:58.6381960+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');"
2023-12-04T06:15:58.6683058+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];"
2023-12-04T06:15:58.7002411+07:00 [INF] (Microsoft.EntityFrameworkCore.Migrations) Applying migration '"20231203231550_UpdateDB1"'.
2023-12-04T06:16:00.0845775+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1,237"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""ALTER TABLE [HoaDon] DROP CONSTRAINT [FK_HoaDon_DatTiec_DatTiecsMaTiec];"
2023-12-04T06:16:00.1629166+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("78"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""DROP INDEX [IX_HoaDon_DatTiecsMaTiec] ON [HoaDon];"
2023-12-04T06:16:00.2424496+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("79"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""DECLARE @var0 sysname;
SELECT @var0 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[HoaDon]') AND [c].[name] = N'DatTiecsMaTiec');
IF @var0 IS NOT NULL EXEC(N'ALTER TABLE [HoaDon] DROP CONSTRAINT [' + @var0 + '];');
ALTER TABLE [HoaDon] DROP COLUMN [DatTiecsMaTiec];"
2023-12-04T06:16:00.2619500+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("19"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""DECLARE @var1 sysname;
SELECT @var1 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[HoaDon]') AND [c].[name] = N'MaTiec');
IF @var1 IS NOT NULL EXEC(N'ALTER TABLE [HoaDon] DROP CONSTRAINT [' + @var1 + '];');
ALTER TABLE [HoaDon] ALTER COLUMN [MaTiec] nvarchar(450) NOT NULL;"
2023-12-04T06:16:00.2643574+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""CREATE INDEX [IX_HoaDon_MaTiec] ON [HoaDon] ([MaTiec]);"
2023-12-04T06:16:00.2777516+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("13"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""ALTER TABLE [HoaDon] ADD CONSTRAINT [FK_HoaDon_DatTiec_MaTiec] FOREIGN KEY ([MaTiec]) REFERENCES [DatTiec] ([MaTiec]) ON DELETE CASCADE;"
2023-12-04T06:16:00.2805263+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20231203231550_UpdateDB1', N'7.0.9');"
2023-12-04T06:17:17.4649736+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("101"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT 1"
2023-12-04T06:17:17.6961784+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("97"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');"
2023-12-04T06:17:17.7072114+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT 1"
2023-12-04T06:17:17.7102801+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');"
2023-12-04T06:17:17.7764901+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("19"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];"
2023-12-04T06:17:17.8309949+07:00 [INF] (Microsoft.EntityFrameworkCore.Migrations) No migrations were applied. The database is already up to date.
2023-12-04T06:17:18.4909769+07:00 [INF] (Microsoft.Hosting.Lifetime) Now listening on: "https://localhost:7267"
2023-12-04T06:17:18.4921891+07:00 [INF] (Microsoft.Hosting.Lifetime) Now listening on: "http://localhost:5140"
2023-12-04T06:17:18.4982721+07:00 [INF] (Microsoft.Hosting.Lifetime) Application started. Press Ctrl+C to shut down.
2023-12-04T06:17:18.4998814+07:00 [INF] (Microsoft.Hosting.Lifetime) Hosting environment: "Development"
2023-12-04T06:17:18.5020835+07:00 [INF] (Microsoft.Hosting.Lifetime) Content root path: "D:\NhaHangTiecCuoi\WeddingRestaurant\WeddingRestaurant.WebApi\"
2023-12-04T06:18:19.0227406+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("53"ms) [Parameters=["@__model_MaTiec_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='1200']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [DatTiec] AS [d]
        WHERE [d].[MaTiec] = @__model_MaTiec_0 AND ([d].[TrangThai] IS NULL)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END"
2023-12-04T06:18:19.3541350+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("6"ms) [Parameters=["@p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 450), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (DbType = Double), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32), @p12='?' (Size = 4000), @p13='?' (DbType = Double), @p14='?' (DbType = Double), @p15='?' (DbType = Int32), @p16='?' (DbType = Double), @p17='?' (DbType = Double), @p18='?' (DbType = Double), @p19='?' (Size = 4000)"], CommandType='Text', CommandTimeout='1200']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [DatTiec] ([MaTiec], [GhiChu], [LoaiBan], [LoaiHinhTiec], [MaKhachHang], [NgayDatTiec], [NgayToChuc], [PhiDichVu], [SoLuongBanChay], [SoLuongBanChinhThuc], [SoLuongBanDuPhong], [SoLuongBanTang], [ThoiGianToChuc], [TienCocLan1], [TienCocLan2], [TongBanSetup], [TongTienDuKien], [TongTienGiam], [TongTienPhaiTra], [TrangThai])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19);"
2023-12-04T06:18:19.3857330+07:00 [INF] (Serilog.AspNetCore.RequestLoggingMiddleware) HTTP "POST" "/api/dat-tiec/add" responded 200 in 1380.8313 ms
2023-12-04T06:22:42.4766240+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("9"ms) [Parameters=["@__model_MaKhachHang_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='1200']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [KhachHang] AS [k]
        WHERE [k].[MaKhachHang] = @__model_MaKhachHang_0 AND ([k].[TrangThai] IS NULL)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END"
2023-12-04T06:22:42.5319719+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("9"ms) [Parameters=["@p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (Size = 4000)"], CommandType='Text', CommandTimeout='1200']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [KhachHang] ([MaKhachHang], [CCCD], [Gmail], [MatKhau], [NgaySinh], [SoDienThoai], [TenKhachHang], [TrangThai])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);"
2023-12-04T06:22:42.5451728+07:00 [INF] (Serilog.AspNetCore.RequestLoggingMiddleware) HTTP "POST" "/api/khach-hang/add" responded 200 in 395.5119 ms
2023-12-04T06:28:37.3838927+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("2"ms) [Parameters=["@__model_MaKhachHang_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='1200']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [KhachHang] AS [k]
        WHERE [k].[MaKhachHang] = @__model_MaKhachHang_0 AND ([k].[TrangThai] IS NULL)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END"
2023-12-04T06:28:37.3967032+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("2"ms) [Parameters=["@p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (Size = 4000)"], CommandType='Text', CommandTimeout='1200']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [KhachHang] ([MaKhachHang], [CCCD], [Gmail], [MatKhau], [NgaySinh], [SoDienThoai], [TenKhachHang], [TrangThai])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);"
2023-12-04T06:28:37.4020310+07:00 [INF] (Serilog.AspNetCore.RequestLoggingMiddleware) HTTP "POST" "/api/khach-hang/add" responded 200 in 149.7239 ms
2023-12-04T06:28:37.4535377+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("3"ms) [Parameters=["@__model_MaTiec_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='1200']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [DatTiec] AS [d]
        WHERE [d].[MaTiec] = @__model_MaTiec_0 AND ([d].[TrangThai] IS NULL)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END"
2023-12-04T06:28:37.4714742+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("5"ms) [Parameters=["@p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 450), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (DbType = Double), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32), @p12='?' (Size = 4000), @p13='?' (DbType = Double), @p14='?' (DbType = Double), @p15='?' (DbType = Int32), @p16='?' (DbType = Double), @p17='?' (DbType = Double), @p18='?' (DbType = Double), @p19='?' (Size = 4000)"], CommandType='Text', CommandTimeout='1200']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [DatTiec] ([MaTiec], [GhiChu], [LoaiBan], [LoaiHinhTiec], [MaKhachHang], [NgayDatTiec], [NgayToChuc], [PhiDichVu], [SoLuongBanChay], [SoLuongBanChinhThuc], [SoLuongBanDuPhong], [SoLuongBanTang], [ThoiGianToChuc], [TienCocLan1], [TienCocLan2], [TongBanSetup], [TongTienDuKien], [TongTienGiam], [TongTienPhaiTra], [TrangThai])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19);"
2023-12-04T06:28:37.4796086+07:00 [INF] (Serilog.AspNetCore.RequestLoggingMiddleware) HTTP "POST" "/api/dat-tiec/add" responded 200 in 68.6167 ms
